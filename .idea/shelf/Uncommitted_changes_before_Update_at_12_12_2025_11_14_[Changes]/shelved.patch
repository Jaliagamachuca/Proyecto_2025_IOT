Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38_[Changes]/shelved.patch	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
+++ /dev/null	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
@@ -1,4626 +0,0 @@
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.*;\r\nimport com.example.proyecto_2025.model.*;\r\n\r\npublic class AssignGuideActivity extends AppCompatActivity {\r\n    @SuppressLint(\"SetTextI18n\")\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.assign_guide);\r\n\r\n        String offerId = getIntent().getStringExtra(\"offerId\");\r\n        com.example.proyecto_2025.model.Offer o =\r\n                com.example.proyecto_2025.data.OfferRepository.get().byId(offerId);\r\n        com.example.proyecto_2025.model.Guide g =\r\n                com.example.proyecto_2025.data.GuideRepository.get().byId(o.getGuideId());\r\n\r\n        TextView tv = findViewById(R.id.tvSummary);\r\n        // Usamos el ID de tour como placeholder hasta enlazar tu TourRepository real\r\n        String tourDisplay = (o.getTourId() != null) ? o.getTourId() : \"(sin tour)\";\r\n        tv.setText(\"Tour: \" + tourDisplay\r\n                + \"\\nGuía: \" + (g != null ? g.getName() : \"(desconocido)\")\r\n                + \"\\nPago: \" + o.getPayMode() + \" S/\" + o.getAmount());\r\n\r\n        Button btn = findViewById(R.id.btnConfirm);\r\n        btn.setOnClickListener(v -> {\r\n            // Aquí solo confirmamos. Cuando integremos con tu TourRepository real,\r\n            // marcamos el tour como \"con guía\".\r\n            android.widget.Toast.makeText(this, \"Guía asignado.\", android.widget.Toast.LENGTH_LONG).show();\r\n            finish();\r\n        });\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java	(date 1763325761451)
-@@ -5,36 +5,89 @@
- import android.widget.Button;
- import android.widget.TextView;
- import android.widget.Toast;
-+
- import androidx.appcompat.app.AppCompatActivity;
-+
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.data.*;
--import com.example.proyecto_2025.model.*;
-+import com.example.proyecto_2025.data.OfferRepository;
-+import com.example.proyecto_2025.data.repository.GuiaRepository;
-+import com.example.proyecto_2025.model.Guia;
-+import com.example.proyecto_2025.model.Offer;
-+
-+import java.util.List;
- 
- public class AssignGuideActivity extends AppCompatActivity {
-+
-     @SuppressLint("SetTextI18n")
--    @Override protected void onCreate(Bundle b){
-+    @Override
-+    protected void onCreate(Bundle b) {
-         super.onCreate(b);
-         setContentView(R.layout.assign_guide);
- 
-         String offerId = getIntent().getStringExtra("offerId");
--        com.example.proyecto_2025.model.Offer o =
--                com.example.proyecto_2025.data.OfferRepository.get().byId(offerId);
--        com.example.proyecto_2025.model.Guide g =
--                com.example.proyecto_2025.data.GuideRepository.get().byId(o.getGuideId());
-+        if (offerId == null) {
-+            Toast.makeText(this, "Oferta no especificada", Toast.LENGTH_LONG).show();
-+            finish();
-+            return;
-+        }
-+
-+        // OfferRepository sigue siendo síncrono (byId)
-+        Offer o = OfferRepository.get().byId(offerId);
-+        if (o == null) {
-+            Toast.makeText(this, "Oferta no encontrada", Toast.LENGTH_LONG).show();
-+            finish();
-+            return;
-+        }
- 
-         TextView tv = findViewById(R.id.tvSummary);
--        // Usamos el ID de tour como placeholder hasta enlazar tu TourRepository real
--        String tourDisplay = (o.getTourId() != null) ? o.getTourId() : "(sin tour)";
--        tv.setText("Tour: " + tourDisplay
--                + "\nGuía: " + (g != null ? g.getName() : "(desconocido)")
--                + "\nPago: " + o.getPayMode() + " S/" + o.getAmount());
-+        Button btn = findViewById(R.id.btnConfirm);
-+        btn.setEnabled(false); // se habilita cuando carguemos al guía
-+
-+        // Cargar guías activos y buscar el que corresponde a la oferta
-+        GuiaRepository.get().getGuiasActivos(
-+                new GuiaRepository.Callback<List<Guia>>() {
-+                    @Override
-+                    public void onSuccess(List<Guia> result) {
-+                        Guia guia = null;
-+                        if (result != null && o.getGuideId() != null) {
-+                            for (Guia g : result) {
-+                                // asumiendo que Guia tiene getUid() que coincide con guideId
-+                                if (g.getUid() != null && g.getUid().equals(o.getGuideId())) {
-+                                    guia = g;
-+                                    break;
-+                                }
-+                            }
-+                        }
-+
-+                        String tourDisplay = (o.getTourId() != null) ? o.getTourId() : "(sin tour)";
-+                        String guiaNombre;
-+                        if (guia != null && guia.getDisplayName() != null && !guia.getDisplayName().isEmpty()) {
-+                            guiaNombre = guia.getDisplayName();
-+                        } else {
-+                            guiaNombre = "(desconocido)";
-+                        }
-+
-+                        tv.setText("Tour: " + tourDisplay
-+                                + "\nGuía: " + guiaNombre
-+                                + "\nPago: " + o.getPayMode() + " S/" + o.getAmount());
- 
--        Button btn = findViewById(R.id.btnConfirm);
--        btn.setOnClickListener(v -> {
--            // Aquí solo confirmamos. Cuando integremos con tu TourRepository real,
--            // marcamos el tour como "con guía".
--            android.widget.Toast.makeText(this, "Guía asignado.", android.widget.Toast.LENGTH_LONG).show();
--            finish();
--        });
-+                        btn.setEnabled(true);
-+                        btn.setOnClickListener(v -> {
-+                            // Aquí solo confirmamos. Cuando integres TourRepository,
-+                            // podrás marcar el tour como "con guía".
-+                            Toast.makeText(AssignGuideActivity.this,
-+                                    "Guía asignado.", Toast.LENGTH_LONG).show();
-+                            finish();
-+                        });
-+                    }
-+
-+                    @Override
-+                    public void onError(Exception e) {
-+                        Toast.makeText(AssignGuideActivity.this,
-+                                "Error al cargar guía: " + e.getMessage(),
-+                                Toast.LENGTH_LONG).show();
-+                        finish();
-+                    }
-+                });
-     }
- }
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Superadmin;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.example.proyecto_2025.BaseActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminAdministradoresSedeBinding;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminClientesBinding;\r\nimport com.google.android.material.dialog.MaterialAlertDialogBuilder;\r\n\r\npublic class Superadmin_Clientes extends BaseActivity {\r\n\r\n    private ActivitySuperadminClientesBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivitySuperadminClientesBinding.inflate(getLayoutInflater());\r\n        setActivityContent(binding.getRoot());\r\n\r\n        binding.btn1.setOnClickListener(view ->\r\n                activarCliente());\r\n\r\n        binding.btn2.setOnClickListener(view ->\r\n                desactivarCliente());\r\n\r\n        binding.InfoCliente1.setOnClickListener(v -> {\r\n            // Creamos un Intent para ir a OtraActivity\r\n            Intent intent = new Intent(this, Superadmin_Ver_Cliente.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        binding.InfoCliente2.setOnClickListener(v -> {\r\n            // Creamos un Intent para ir a OtraActivity\r\n            Intent intent = new Intent(this, Superadmin_Ver_Cliente.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    public void activarCliente() {\r\n        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);\r\n        dialogBuilder.setTitle(\"Activar Cliente\");\r\n        dialogBuilder.setMessage(\"¿Está seguro de activar este usuario?\");\r\n        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn neutral\"));\r\n        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn positivo\"));\r\n        dialogBuilder.show();\r\n    }\r\n    public void desactivarCliente() {\r\n        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);\r\n        dialogBuilder.setTitle(\"Desactivar Cliente\");\r\n        dialogBuilder.setMessage(\"¿Está seguro de desactivar este usuario?\");\r\n        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn neutral\"));\r\n        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn positivo\"));\r\n        dialogBuilder.show();\r\n    }\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java	(date 1762211860671)
-@@ -19,12 +19,10 @@
- 
- public class Superadmin_Clientes extends BaseActivity {
- 
--    private ActivitySuperadminClientesBinding binding;
--
-     @Override
-     protected void onCreate(@Nullable Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
--        binding = ActivitySuperadminClientesBinding.inflate(getLayoutInflater());
-+        ActivitySuperadminClientesBinding binding = ActivitySuperadminClientesBinding.inflate(getLayoutInflater());
-         setActivityContent(binding.getRoot());
- 
-         binding.btn1.setOnClickListener(view ->
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.EditText;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.adapter.GuideAdapter;\r\nimport com.example.proyecto_2025.data.GuideRepository;\r\nimport com.example.proyecto_2025.model.Guide;\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class GuideDirectoryActivity extends AppCompatActivity implements GuideAdapter.OnAction {\r\n    private List<Guide> base = new ArrayList<>();\r\n    private List<Guide> view = new ArrayList<>();\r\n    private GuideAdapter adapter;\r\n\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.guide_directory);\r\n\r\n        base = GuideRepository.get().all();\r\n        view.addAll(base);\r\n\r\n        RecyclerView rv = findViewById(R.id.rvGuides);\r\n        rv.setLayoutManager(new LinearLayoutManager(this));\r\n        adapter = new GuideAdapter(this, view, this);\r\n        rv.setAdapter(adapter);\r\n\r\n        EditText etSearch = findViewById(R.id.etSearch);\r\n        etSearch.addTextChangedListener(new android.text.TextWatcher(){\r\n            public void beforeTextChanged(CharSequence s,int a,int b,int c){}\r\n            public void onTextChanged(CharSequence s,int a,int b,int c){\r\n                String q = s.toString().toLowerCase(Locale.getDefault());\r\n                view.clear();\r\n                view.addAll(base.stream().filter(g ->\r\n                        g.getName().toLowerCase(Locale.getDefault()).contains(q) ||\r\n                                g.getZone().toLowerCase(Locale.getDefault()).contains(q)\r\n                ).collect(Collectors.toList()));\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n            public void afterTextChanged(android.text.Editable s){}\r\n        });\r\n    }\r\n\r\n    @Override public void onProfile(Guide g) {\r\n        Intent i = new Intent(this, GuideProfileActivity.class);\r\n        i.putExtra(\"guide\", g);\r\n        startActivity(i);\r\n    }\r\n\r\n    @Override public void onOffer(Guide g) {\r\n        Intent i = new Intent(this, OfferCreateActivity.class);\r\n        i.putExtra(\"guide\", g);\r\n        startActivity(i);\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java	(date 1763322936744)
-@@ -2,59 +2,125 @@
- 
- import android.content.Intent;
- import android.os.Bundle;
-+import android.text.Editable;
-+import android.text.TextWatcher;
- import android.widget.EditText;
-+
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
-+
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.adapter.GuideAdapter;
--import com.example.proyecto_2025.data.GuideRepository;
--import com.example.proyecto_2025.model.Guide;
--import java.util.*;
-+import com.example.proyecto_2025.adapter.GuiasAdapter;
-+import com.example.proyecto_2025.data.repository.GuiaRepository;
-+import com.example.proyecto_2025.model.Guia;
-+import com.google.android.material.snackbar.Snackbar;
-+
-+import java.util.ArrayList;
-+import java.util.List;
-+import java.util.Locale;
- import java.util.stream.Collectors;
- 
--public class GuideDirectoryActivity extends AppCompatActivity implements GuideAdapter.OnAction {
--    private List<Guide> base = new ArrayList<>();
--    private List<Guide> view = new ArrayList<>();
--    private GuideAdapter adapter;
-+public class GuideDirectoryActivity extends AppCompatActivity {
- 
--    @Override protected void onCreate(Bundle b){
--        super.onCreate(b);
-+    private final List<Guia> base = new ArrayList<>();
-+    private final List<Guia> filtered = new ArrayList<>();
-+    private GuiasAdapter adapter;
-+
-+    @Override
-+    protected void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-         setContentView(R.layout.guide_directory);
- 
--        base = GuideRepository.get().all();
--        view.addAll(base);
--
-+        // RecyclerView
-         RecyclerView rv = findViewById(R.id.rvGuides);
-         rv.setLayoutManager(new LinearLayoutManager(this));
--        adapter = new GuideAdapter(this, view, this);
-+
-+        // GuiasAdapter: usamos Mode.APPROVED y reasignamos las acciones
-+        adapter = new GuiasAdapter(
-+                GuiasAdapter.Mode.APPROVED,
-+                // onToggle -> ver perfil
-+                g -> {
-+                    Intent i = new Intent(GuideDirectoryActivity.this,
-+                            GuideProfileActivity.class);
-+                    i.putExtra("guia", g);
-+                    startActivity(i);
-+                },
-+                // onApprove -> crear oferta
-+                g -> {
-+                    Intent i = new Intent(GuideDirectoryActivity.this,
-+                            OfferCreateActivity.class);
-+                    i.putExtra("guia", g);
-+                    startActivity(i);
-+                },
-+                // onReject -> por ahora solo mensaje
-+                g -> Snackbar.make(
-+                        findViewById(android.R.id.content),
-+                        "Acción de rechazo no implementada aún",
-+                        Snackbar.LENGTH_SHORT
-+                ).show()
-+        );
-         rv.setAdapter(adapter);
- 
-+        // Cargar guías activos desde Firestore
-+        cargarGuiasActivos();
-+
-+        // Buscador
-         EditText etSearch = findViewById(R.id.etSearch);
--        etSearch.addTextChangedListener(new android.text.TextWatcher(){
--            public void beforeTextChanged(CharSequence s,int a,int b,int c){}
--            public void onTextChanged(CharSequence s,int a,int b,int c){
-+        etSearch.addTextChangedListener(new TextWatcher() {
-+            @Override public void beforeTextChanged(CharSequence s, int a, int b, int c) {}
-+            @Override public void afterTextChanged(Editable s) {}
-+
-+            @Override
-+            public void onTextChanged(CharSequence s, int a, int b, int c) {
-                 String q = s.toString().toLowerCase(Locale.getDefault());
--                view.clear();
--                view.addAll(base.stream().filter(g ->
--                        g.getName().toLowerCase(Locale.getDefault()).contains(q) ||
--                                g.getZone().toLowerCase(Locale.getDefault()).contains(q)
--                ).collect(Collectors.toList()));
--                adapter.notifyDataSetChanged();
-+                aplicarFiltro(q);
-             }
--            public void afterTextChanged(android.text.Editable s){}
--        });
-+        });
-+    }
-+
-+    private void cargarGuiasActivos() {
-+        GuiaRepository.get().getGuiasActivos(
-+                new GuiaRepository.Callback<List<Guia>>() {
-+                    @Override
-+                    public void onSuccess(List<Guia> result) {
-+                        base.clear();
-+                        if (result != null) base.addAll(result);
-+
-+                        // Sin filtro inicial: mostrar todo
-+                        aplicarFiltro("");
-+                    }
-+
-+                    @Override
-+                    public void onError(Exception e) {
-+                        base.clear();
-+                        filtered.clear();
-+                        adapter.setData(filtered);
-+                        Snackbar.make(findViewById(android.R.id.content),
-+                                "Error cargando guías", Snackbar.LENGTH_SHORT).show();
-+                    }
-+                });
-     }
- 
--    @Override public void onProfile(Guide g) {
--        Intent i = new Intent(this, GuideProfileActivity.class);
--        i.putExtra("guide", g);
--        startActivity(i);
--    }
-+    private void aplicarFiltro(String q) {
-+        filtered.clear();
-+
-+        if (q == null || q.isEmpty()) {
-+            filtered.addAll(base);
-+        } else {
-+            filtered.addAll(
-+                    base.stream()
-+                            .filter(g ->
-+                                    (g.getName() != null &&
-+                                            g.getName().toLowerCase(Locale.getDefault()).contains(q))
-+                                            ||
-+                                            (g.getZone() != null &&
-+                                                    g.getZone().toLowerCase(Locale.getDefault()).contains(q))
-+                            )
-+                            .collect(Collectors.toList())
-+            );
-+        }
- 
--    @Override public void onOffer(Guide g) {
--        Intent i = new Intent(this, OfferCreateActivity.class);
--        i.putExtra("guide", g);
--        startActivity(i);
-+        adapter.setData(filtered);
-     }
- }
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.OfferRepository;\r\nimport com.example.proyecto_2025.model.Guide;\r\nimport com.example.proyecto_2025.model.Offer;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Locale;\r\nimport java.util.UUID;\r\n\r\npublic class OfferCreateActivity extends AppCompatActivity {\r\n\r\n    // Listas simples para el spinner (mock por ahora)\r\n    private final ArrayList<String> tourIds    = new ArrayList<>();\r\n    private final ArrayList<String> tourTitles = new ArrayList<>();\r\n\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.offer_create);\r\n\r\n        Guide guide = (Guide) getIntent().getSerializableExtra(\"guide\");\r\n        if (guide == null) { finish(); return; }\r\n\r\n        TextView tvGuide   = findViewById(R.id.tvGuide);\r\n        TextView tvStart   = findViewById(R.id.tvStart);\r\n        TextView tvEnd     = findViewById(R.id.tvEnd);\r\n        RadioGroup rgPay   = findViewById(R.id.rgPay);\r\n        EditText etAmount  = findViewById(R.id.etAmount);\r\n        Button btnSend     = findViewById(R.id.btnSend);\r\n        android.widget.Spinner spTour = findViewById(R.id.spTour);\r\n\r\n        tvGuide.setText(\"Guía: \" + guide.getName());\r\n\r\n        // --------- CARGA DE TOURS (MOCK) ----------\r\n        seedToursForDemo(); // quita esto cuando conectes tu repo real\r\n\r\n        ArrayAdapter<String> ad = new ArrayAdapter<>(\r\n                this, android.R.layout.simple_spinner_dropdown_item, tourTitles);\r\n        spTour.setAdapter(ad);\r\n        // ------------------------------------------\r\n\r\n        final Calendar start = Calendar.getInstance();\r\n        final Calendar end   = Calendar.getInstance();\r\n\r\n        tvStart.setOnClickListener(v -> pickDate(tvStart, start));\r\n        tvEnd.setOnClickListener(v -> pickDate(tvEnd, end));\r\n\r\n        btnSend.setOnClickListener(v -> {\r\n            if (spTour.getSelectedItemPosition() == android.widget.AdapterView.INVALID_POSITION) {\r\n                Toast.makeText(this, \"Selecciona un tour\", Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n            String tourId = tourIds.get(spTour.getSelectedItemPosition());\r\n\r\n            Offer.PayMode payMode =\r\n                    (rgPay.getCheckedRadioButtonId() == R.id.rbFijo)\r\n                            ? Offer.PayMode.FIJO\r\n                            : Offer.PayMode.POR_HORA;\r\n\r\n            double amount;\r\n            try {\r\n                amount = Double.parseDouble(etAmount.getText().toString().trim());\r\n            } catch (Exception e) {\r\n                Toast.makeText(this, \"Monto inválido\", Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            Offer o = new Offer(\r\n                    UUID.randomUUID().toString(),\r\n                    guide.getId(),\r\n                    tourId,\r\n                    start.getTime(),\r\n                    end.getTime(),\r\n                    payMode,\r\n                    amount,\r\n                    Offer.Status.PENDIENTE\r\n            );\r\n            OfferRepository.get().add(o);\r\n\r\n            Toast.makeText(this, \"Oferta enviada\", Toast.LENGTH_SHORT).show();\r\n            startActivity(new Intent(this, OfferInboxActivity.class));\r\n            finish();\r\n        });\r\n    }\r\n\r\n    private void pickDate(TextView tv, Calendar cal){\r\n        new DatePickerDialog(this, (view, year, month, dayOfMonth) -> {\r\n            cal.set(Calendar.YEAR, year);\r\n            cal.set(Calendar.MONTH, month);\r\n            cal.set(Calendar.DAY_OF_MONTH, dayOfMonth);\r\n            tv.setText(String.format(Locale.getDefault(), \"%02d/%02d/%04d\", dayOfMonth, month + 1, year));\r\n        }, cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH)).show();\r\n    }\r\n\r\n    /** Datos de ejemplo para que el flujo sea presentable */\r\n    private void seedToursForDemo() {\r\n        if (!tourIds.isEmpty()) return;\r\n        tourIds.add(\"t1\");  tourTitles.add(\"City Tour Cusco\");\r\n        tourIds.add(\"t2\");  tourTitles.add(\"Valle Sagrado Full Day\");\r\n        // agrega más si quieres\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java	(date 1763322966918)
-@@ -14,7 +14,7 @@
- 
- import com.example.proyecto_2025.R;
- import com.example.proyecto_2025.data.OfferRepository;
--import com.example.proyecto_2025.model.Guide;
-+import com.example.proyecto_2025.model.Guia;
- import com.example.proyecto_2025.model.Offer;
- 
- import java.util.ArrayList;
-@@ -32,7 +32,7 @@
-         super.onCreate(b);
-         setContentView(R.layout.offer_create);
- 
--        Guide guide = (Guide) getIntent().getSerializableExtra("guide");
-+        Guia guide = (Guia) getIntent().getSerializableExtra("guide");
-         if (guide == null) { finish(); return; }
- 
-         TextView tvGuide   = findViewById(R.id.tvGuide);
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideProfileActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.model.Guide;\r\n\r\npublic class GuideProfileActivity extends AppCompatActivity {\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.guide_profile);\r\n\r\n        Guide g = (Guide) getIntent().getSerializableExtra(\"guide\");\r\n\r\n        ImageView img = findViewById(R.id.img);\r\n        TextView name = findViewById(R.id.name);\r\n        TextView langs = findViewById(R.id.langs);\r\n        TextView bio = findViewById(R.id.bio);\r\n        TextView zone = findViewById(R.id.zone);\r\n        TextView rating = findViewById(R.id.rating);\r\n        Button btnOffer = findViewById(R.id.btnOffer);\r\n\r\n        Glide.with(this).load(g.getPhotoUrl()).into(img);\r\n        name.setText(g.getName());\r\n        langs.setText(\"Idiomas: \"+g.getLanguages().toString().replace(\"[\",\"\").replace(\"]\",\"\").replace(\",\",\" · \"));\r\n        bio.setText(g.getBio());\r\n        zone.setText(\"Zona: \"+g.getZone());\r\n        rating.setText(String.format(\"★ %.1f\", g.getRating()));\r\n\r\n        btnOffer.setOnClickListener(v->{\r\n            Intent i = new Intent(this, OfferCreateActivity.class);\r\n            i.putExtra(\"guide\", g);\r\n            startActivity(i);\r\n        });\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideProfileActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideProfileActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideProfileActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideProfileActivity.java	(date 1762986312457)
-@@ -5,37 +5,109 @@
- import android.widget.Button;
- import android.widget.ImageView;
- import android.widget.TextView;
-+
- import androidx.appcompat.app.AppCompatActivity;
-+
- import com.bumptech.glide.Glide;
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.model.Guide;
-+import com.example.proyecto_2025.model.Guia;
-+
-+import java.io.Serializable;
-+import java.util.ArrayList;
-+import java.util.List;
- 
- public class GuideProfileActivity extends AppCompatActivity {
--    @Override protected void onCreate(Bundle b){
-+
-+    private Serializable originalExtra; // para reenviar el MISMO tipo a la siguiente pantalla
-+    private Guia guia;                  // versión unificada para mostrar en UI
-+
-+    @Override
-+    protected void onCreate(Bundle b) {
-         super.onCreate(b);
-         setContentView(R.layout.guide_profile);
- 
--        Guide g = (Guide) getIntent().getSerializableExtra("guide");
-+        // 1) Obtener el extra en cualquiera de los dos formatos
-+        originalExtra = getIntent().getSerializableExtra("guide");
-+        if (originalExtra instanceof Guia) {
-+            guia = (Guia) originalExtra;
-+        } else if (originalExtra instanceof Guia) {
-+            guia = convertOldToNew((Guia) originalExtra);
-+        } else {
-+            // Sin datos: cerrar o mostrar error
-+            finish();
-+            return;
-+        }
- 
--        ImageView img = findViewById(R.id.img);
--        TextView name = findViewById(R.id.name);
--        TextView langs = findViewById(R.id.langs);
--        TextView bio = findViewById(R.id.bio);
--        TextView zone = findViewById(R.id.zone);
-+        // 2) Referencias de vista
-+        ImageView img   = findViewById(R.id.img);
-+        TextView name   = findViewById(R.id.name);
-+        TextView langs  = findViewById(R.id.langs);
-+        TextView bio    = findViewById(R.id.bio);
-+        TextView zone   = findViewById(R.id.zone);
-         TextView rating = findViewById(R.id.rating);
-         Button btnOffer = findViewById(R.id.btnOffer);
- 
--        Glide.with(this).load(g.getPhotoUrl()).into(img);
--        name.setText(g.getName());
--        langs.setText("Idiomas: "+g.getLanguages().toString().replace("[","").replace("]","").replace(","," · "));
--        bio.setText(g.getBio());
--        zone.setText("Zona: "+g.getZone());
--        rating.setText(String.format("★ %.1f", g.getRating()));
-+        // 3) Pintar datos (con fallbacks seguros)
-+        String photo = guia.getPhotoUrl() != null ? guia.getPhotoUrl() : "";
-+        Glide.with(this)
-+                .load(photo.isEmpty() ? R.drawable.ic_user_placeholder : photo)
-+                .into(img);
- 
--        btnOffer.setOnClickListener(v->{
-+        name.setText(nullSafe(guia.getName()));
-+        langs.setText("Idiomas: " + joinLanguages(guia.getLanguages()));
-+        bio.setText(nullSafe(guia.getBio()));
-+        zone.setText("Zona: " + nullSafe(guia.getZone()));
-+        rating.setText(String.format("★ %.1f", guia.getRating()));
-+
-+        // 4) Reenviar el MISMO tipo de objeto que recibimos (compatibilidad)
-+        btnOffer.setOnClickListener(v -> {
-             Intent i = new Intent(this, OfferCreateActivity.class);
--            i.putExtra("guide", g);
-+            i.putExtra("guide", originalExtra != null ? originalExtra : guia);
-             startActivity(i);
-         });
-     }
-+
-+    // ===== Helpers =====
-+
-+    private String nullSafe(String s) {
-+        return s == null ? "" : s;
-+    }
-+
-+    private String joinLanguages(List<Guia.Language> langs) {
-+        if (langs == null || langs.isEmpty()) return "—";
-+        List<String> xs = new ArrayList<>();
-+        for (Guia.Language l : langs) xs.add(l.name());
-+        return String.join(" · ", xs);
-+    }
-+
-+    /** Conversión simple del modelo antiguo Guide -> nuevo Guia (para UI). */
-+    private Guia convertOldToNew(Guia oldG) {
-+        if (oldG == null) return new Guia();
-+
-+        // Mapear idiomas del enum antiguo al nuevo
-+        List<Guia.Language> newLangs = new ArrayList<>();
-+        if (oldG.getLanguages() != null) {
-+            for (Guia.Language l : oldG.getLanguages()) {
-+                try {
-+                    newLangs.add(Guia.Language.valueOf(l.name()));
-+                } catch (IllegalArgumentException ignore) {
-+                    // idioma no mapeado, lo omitimos
-+                }
-+            }
-+        }
-+
-+        Guia g = new Guia(
-+                oldG.getId(),
-+                oldG.getName(),
-+                newLangs,
-+                oldG.getPhotoUrl(),
-+                oldG.getBio(),
-+                oldG.getRating(),
-+                oldG.getZone()
-+        );
-+        // Campos de gestión por defecto para guías legados
-+        g.setRole("guia");
-+        if (g.getStatus() == null) g.setStatus("active"); // si venía de catálogo anterior
-+        return g;
-+    }
- }
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferDetailActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.adapter.MessageAdapter;\r\nimport com.example.proyecto_2025.data.GuideRepository;\r\nimport com.example.proyecto_2025.data.OfferRepository;\r\nimport com.example.proyecto_2025.data.TourRepository;\r\nimport com.example.proyecto_2025.model.Guide;\r\nimport com.example.proyecto_2025.model.Message;\r\nimport com.example.proyecto_2025.model.Offer;\r\nimport com.example.proyecto_2025.model.Tour;\r\nimport com.google.android.material.appbar.MaterialToolbar;\r\nimport com.google.android.material.chip.Chip;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.snackbar.Snackbar;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Locale;\r\n\r\npublic class OfferDetailActivity extends AppCompatActivity {\r\n\r\n    private Offer offer;\r\n    private MessageAdapter messageAdapter;\r\n    private RecyclerView rvMensajes;\r\n    private EditText etMensaje;\r\n    private SimpleDateFormat dateFormat;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_offer_detail);\r\n\r\n        dateFormat = new SimpleDateFormat(\"dd MMM yyyy\", Locale.getDefault());\r\n\r\n        // Obtener la oferta\r\n        String offerId = getIntent().getStringExtra(\"offerId\");\r\n        if (offerId == null) {\r\n            finish();\r\n            return;\r\n        }\r\n\r\n        offer = OfferRepository.get().findById(offerId);\r\n        if (offer == null) {\r\n            finish();\r\n            return;\r\n        }\r\n\r\n        // Configurar toolbar\r\n        MaterialToolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n        if (getSupportActionBar() != null) {\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n        }\r\n        toolbar.setNavigationOnClickListener(v -> finish());\r\n\r\n        // Views\r\n        TextView tvGuiaNombre = findViewById(R.id.tvGuiaNombre);\r\n        TextView tvTourTitulo = findViewById(R.id.tvTourTitulo);\r\n        TextView tvFechaInicio = findViewById(R.id.tvFechaInicio);\r\n        TextView tvFechaFin = findViewById(R.id.tvFechaFin);\r\n        TextView tvMonto = findViewById(R.id.tvMonto);\r\n        Chip chipEstado = findViewById(R.id.chipEstado);\r\n        rvMensajes = findViewById(R.id.rvMensajes);\r\n        etMensaje = findViewById(R.id.etMensaje);\r\n        FloatingActionButton btnEnviar = findViewById(R.id.btnEnviar);\r\n\r\n        // Cargar datos de la oferta\r\n        Guide guia = GuideRepository.get().byId(offer.getGuideId());\r\n        Tour tour = new TourRepository(this).findById(offer.getTourId());\r\n\r\n        tvGuiaNombre.setText(guia != null ? guia.getName() : \"Guía desconocido\");\r\n        tvTourTitulo.setText(tour != null ? tour.titulo : \"Tour desconocido\");\r\n        tvFechaInicio.setText(dateFormat.format(offer.getStartDate()));\r\n        tvFechaFin.setText(dateFormat.format(offer.getEndDate()));\r\n\r\n        String montoText = \"S/ \" + String.format(Locale.getDefault(), \"%.2f\", offer.getAmount())\r\n                + \" (\" + (offer.getPayMode() == Offer.PayMode.FIJO ? \"Fijo\" : \"Por hora\") + \")\";\r\n        tvMonto.setText(montoText);\r\n\r\n        // Estado con colores\r\n        switch (offer.getStatus()) {\r\n            case PENDIENTE:\r\n                chipEstado.setText(\"⏳ Pendiente\");\r\n                chipEstado.setChipBackgroundColorResource(android.R.color.holo_orange_light);\r\n                break;\r\n            case ACEPTADA:\r\n                chipEstado.setText(\"✓ Aceptada\");\r\n                chipEstado.setChipBackgroundColorResource(android.R.color.holo_green_light);\r\n                break;\r\n            case RECHAZADA:\r\n                chipEstado.setText(\"✗ Rechazada\");\r\n                chipEstado.setChipBackgroundColorResource(android.R.color.holo_red_light);\r\n                break;\r\n            case VENCIDA:\r\n                chipEstado.setText(\"⏱ Vencida\");\r\n                chipEstado.setChipBackgroundColorResource(android.R.color.darker_gray);\r\n                break;\r\n        }\r\n\r\n        // Configurar RecyclerView de mensajes\r\n        messageAdapter = new MessageAdapter(offer.getMensajes());\r\n        rvMensajes.setLayoutManager(new LinearLayoutManager(this));\r\n        rvMensajes.setAdapter(messageAdapter);\r\n\r\n        // Scroll al último mensaje\r\n        if (!offer.getMensajes().isEmpty()) {\r\n            rvMensajes.scrollToPosition(offer.getMensajes().size() - 1);\r\n        }\r\n\r\n        // Crear algunos mensajes de ejemplo si está vacío (solo para demo)\r\n        if (offer.getMensajes().isEmpty()) {\r\n            crearMensajesDeEjemplo();\r\n        }\r\n\r\n        // Botón enviar mensaje\r\n        btnEnviar.setOnClickListener(v -> enviarMensaje());\r\n    }\r\n\r\n    private void enviarMensaje() {\r\n        String texto = etMensaje.getText().toString().trim();\r\n        if (texto.isEmpty()) {\r\n            Snackbar.make(findViewById(android.R.id.content),\r\n                    \"Escribe un mensaje\", Snackbar.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n\r\n        // Crear y agregar el mensaje\r\n        Message mensaje = new Message(offer.getId(), Message.Sender.ADMIN, texto);\r\n        offer.addMensaje(mensaje);\r\n\r\n        // Actualizar en el repositorio\r\n        OfferRepository.get().update(offer);\r\n\r\n        // Actualizar UI\r\n        messageAdapter.notifyItemInserted(offer.getMensajes().size() - 1);\r\n        rvMensajes.scrollToPosition(offer.getMensajes().size() - 1);\r\n\r\n        // Limpiar input\r\n        etMensaje.setText(\"\");\r\n\r\n        Snackbar.make(findViewById(android.R.id.content),\r\n                \"Mensaje enviado ✓\", Snackbar.LENGTH_SHORT).show();\r\n    }\r\n\r\n    /**\r\n     * Crea mensajes de ejemplo para que se vea el chat funcionando\r\n     * ELIMINAR ESTE MÉTODO cuando tengas datos reales\r\n     */\r\n    private void crearMensajesDeEjemplo() {\r\n        Message m1 = new Message(offer.getId(), Message.Sender.GUIDE,\r\n                \"Hola, vi la oferta. ¿Podríamos negociar el precio?\");\r\n        Message m2 = new Message(offer.getId(), Message.Sender.ADMIN,\r\n                \"Claro, ¿cuánto propones?\");\r\n        Message m3 = new Message(offer.getId(), Message.Sender.GUIDE,\r\n                \"¿Qué tal S/ 180? Tengo experiencia en este tipo de tours.\");\r\n\r\n        offer.addMensaje(m1);\r\n        offer.addMensaje(m2);\r\n        offer.addMensaje(m3);\r\n\r\n        OfferRepository.get().update(offer);\r\n        messageAdapter.notifyDataSetChanged();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferDetailActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferDetailActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferDetailActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferDetailActivity.java	(date 1763323005202)
-@@ -1,7 +1,6 @@
- package com.example.proyecto_2025.Activities_Administrador;
- 
- import android.os.Bundle;
--import android.view.View;
- import android.widget.EditText;
- import android.widget.TextView;
- import androidx.appcompat.app.AppCompatActivity;
-@@ -9,10 +8,10 @@
- import androidx.recyclerview.widget.RecyclerView;
- import com.example.proyecto_2025.R;
- import com.example.proyecto_2025.adapter.MessageAdapter;
--import com.example.proyecto_2025.data.GuideRepository;
- import com.example.proyecto_2025.data.OfferRepository;
- import com.example.proyecto_2025.data.TourRepository;
--import com.example.proyecto_2025.model.Guide;
-+import com.example.proyecto_2025.data.repository.GuiaRepository;
-+import com.example.proyecto_2025.model.Guia;
- import com.example.proyecto_2025.model.Message;
- import com.example.proyecto_2025.model.Offer;
- import com.example.proyecto_2025.model.Tour;
-@@ -71,7 +70,7 @@
-         FloatingActionButton btnEnviar = findViewById(R.id.btnEnviar);
- 
-         // Cargar datos de la oferta
--        Guide guia = GuideRepository.get().byId(offer.getGuideId());
-+        Guia guia = GuiaRepository.get().byId(offer.getGuideId());
-         Tour tour = new TourRepository(this).findById(offer.getTourId());
- 
-         tvGuiaNombre.setText(guia != null ? guia.getName() : "Guía desconocido");
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/Admin_HomeActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.util.Patterns;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.IdRes;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.adapter.ImageUriAdapter;\r\nimport com.example.proyecto_2025.adapter.GuideAdapter;\r\nimport com.example.proyecto_2025.adapter.TourAdapter;\r\nimport com.example.proyecto_2025.data.EmpresaRepository;\r\nimport com.example.proyecto_2025.data.TourRepository;\r\nimport com.example.proyecto_2025.data.OfferRepository;\r\nimport com.example.proyecto_2025.data.GuideRepository;\r\nimport com.example.proyecto_2025.data.AdminRepository;\r\nimport com.example.proyecto_2025.databinding.ActivityAdminHomeBinding;\r\nimport com.example.proyecto_2025.model.Empresa;\r\nimport com.example.proyecto_2025.model.Guide;\r\nimport com.example.proyecto_2025.model.Offer;\r\nimport com.example.proyecto_2025.model.Tour;\r\nimport com.example.proyecto_2025.model.TourEstado;\r\nimport com.example.proyecto_2025.model.Admin;\r\nimport com.google.android.material.snackbar.Snackbar;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class Admin_HomeActivity extends AppCompatActivity {\r\n\r\n    // ===================== BINDING & CONSTANTS =====================\r\n    private ActivityAdminHomeBinding binding;\r\n\r\n    private static final int SCR_EMPRESA  = R.id.scrEmpresa;\r\n    private static final int SCR_TOURS    = R.id.scrTours;\r\n    private static final int SCR_GUIAS    = R.id.scrGuias;\r\n    private static final int SCR_REPORTES = R.id.scrReportes;\r\n    private static final int SCR_PERFIL   = R.id.scrPerfil;\r\n\r\n    // ===================== REPOSITORIES =====================\r\n    private EmpresaRepository empresaRepo;\r\n    private AdminRepository adminRepo;\r\n\r\n    // ===================== DATA MODELS =====================\r\n    private Empresa empresa;\r\n    private Admin admin;\r\n    private final List<Uri> galeriaUris = new ArrayList<>();\r\n    private final List<Guide> sugeridos = new ArrayList<>();\r\n    private GuideAdapter guiasAdapter;\r\n\r\n    // ===================== LAUNCHERS =====================\r\n    private ActivityResultLauncher<Intent> pickImagesLauncher;\r\n    private ActivityResultLauncher<Intent> pickLocationLauncher;\r\n\r\n    // ===================== LIFECYCLE =====================\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityAdminHomeBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        // Configurar toolbar\r\n        setupToolbar();\r\n\r\n        // Inicializar repositorios y datos\r\n        initializeRepositories();\r\n\r\n        // Configurar launchers\r\n        setupLaunchers();\r\n\r\n        // Configurar bottom navigation\r\n        binding.bottomNav.setOnItemSelectedListener(this::onBottomItemSelected);\r\n\r\n        // Inicializar todas las secciones\r\n        initializeAllSections();\r\n\r\n        // Pantalla inicial\r\n        binding.bottomNav.setSelectedItemId(R.id.nav_empresa);\r\n        showScreen(SCR_EMPRESA);\r\n\r\n        // Datos de prueba (eliminar en producci├│n)\r\n        crearDatosDePruebaSiEsNecesario();\r\n    }\r\n\r\n    // ===================== SETUP METHODS =====================\r\n\r\n    private void setupToolbar() {\r\n        setSupportActionBar(binding.toolbar);\r\n        if (getSupportActionBar() != null) {\r\n            getSupportActionBar().setTitle(\"\");\r\n            getSupportActionBar().setDisplayShowTitleEnabled(false);\r\n        }\r\n    }\r\n\r\n    private void initializeRepositories() {\r\n        GuideRepository.get().seedIfEmpty(this);\r\n        empresaRepo = new EmpresaRepository(this);\r\n        empresa = empresaRepo.load();\r\n        adminRepo = new AdminRepository(this);\r\n        admin = adminRepo.load();\r\n    }\r\n\r\n    private void setupLaunchers() {\r\n        // Launcher para seleccionar im├ígenes\r\n        pickImagesLauncher = registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(), result -> {\r\n                    if (result.getResultCode() != Activity.RESULT_OK || result.getData() == null) return;\r\n                    Intent data = result.getData();\r\n\r\n                    try {\r\n                        if (data.getClipData() != null) {\r\n                            int count = data.getClipData().getItemCount();\r\n                            for (int i = 0; i < count; i++) {\r\n                                Uri u = data.getClipData().getItemAt(i).getUri();\r\n                                getContentResolver().takePersistableUriPermission(\r\n                                        u, Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n                                galeriaUris.add(u);\r\n                            }\r\n                        } else if (data.getData() != null) {\r\n                            Uri u = data.getData();\r\n                            getContentResolver().takePersistableUriPermission(\r\n                                    u, Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n                            galeriaUris.add(u);\r\n                        }\r\n                    } catch (SecurityException ignore) {\r\n                        if (data.getData() != null) galeriaUris.add(data.getData());\r\n                    }\r\n\r\n                    if (binding.scrEmpresa.rvGaleria.getAdapter() != null) {\r\n                        binding.scrEmpresa.rvGaleria.getAdapter().notifyDataSetChanged();\r\n                    }\r\n                    actualizarChecklistYEstado();\r\n                });\r\n\r\n        // Launcher para seleccionar ubicaci├│n\r\n        pickLocationLauncher = registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(), result -> {\r\n                    if (result.getResultCode() != Activity.RESULT_OK || result.getData() == null) return;\r\n                    Intent d = result.getData();\r\n\r\n                    empresa.direccion = d.getStringExtra(\"direccion\");\r\n                    empresa.lat = d.getDoubleExtra(\"lat\", 0d);\r\n                    empresa.lon = d.getDoubleExtra(\"lon\", 0d);\r\n\r\n                    binding.scrEmpresa.tvDireccion.setText(\r\n                            (empresa.direccion == null || empresa.direccion.isEmpty())\r\n                                    ? \"Sin direcci├│n\"\r\n                                    : empresa.direccion\r\n                    );\r\n\r\n                    updateMapPreview();\r\n                    actualizarChecklistYEstado();\r\n                });\r\n    }\r\n\r\n    private void initializeAllSections() {\r\n        initEmpresaSection();\r\n        initToursSection();\r\n        initGuiasSection();\r\n        initReportesSection();\r\n        initPerfilSection();\r\n    }\r\n\r\n    // ===================== NAVIGATION =====================\r\n\r\n    private boolean onBottomItemSelected(MenuItem item) {\r\n        int id = item.getItemId();\r\n        if (id == R.id.nav_empresa) { showScreen(SCR_EMPRESA); return true; }\r\n        else if (id == R.id.nav_tours) { showScreen(SCR_TOURS); return true; }\r\n        else if (id == R.id.nav_guias) { showScreen(SCR_GUIAS); return true; }\r\n        else if (id == R.id.nav_reportes) { showScreen(SCR_REPORTES); return true; }\r\n        else if (id == R.id.nav_perfil) { showScreen(SCR_PERFIL); return true; }\r\n        return false;\r\n    }\r\n\r\n    private void showScreen(@IdRes int screenId) {\r\n        // Ocultar todas las pantallas\r\n        binding.scrEmpresa.getRoot().setVisibility(View.GONE);\r\n        binding.scrTours.getRoot().setVisibility(View.GONE);\r\n        binding.scrGuias.getRoot().setVisibility(View.GONE);\r\n        binding.scrReportes.getRoot().setVisibility(View.GONE);\r\n        binding.scrPerfil.getRoot().setVisibility(View.GONE);\r\n\r\n        // Mostrar pantalla seleccionada\r\n        View target =\r\n                (screenId == SCR_EMPRESA)  ? binding.scrEmpresa.getRoot() :\r\n                        (screenId == SCR_TOURS)    ? binding.scrTours.getRoot() :\r\n                                (screenId == SCR_GUIAS)    ? binding.scrGuias.getRoot() :\r\n                                        (screenId == SCR_REPORTES) ? binding.scrReportes.getRoot() : binding.scrPerfil.getRoot();\r\n\r\n        target.setVisibility(View.VISIBLE);\r\n\r\n        // FAB visible solo en ciertas pantallas\r\n        binding.fab.setVisibility(View.GONE);\r\n        binding.fab.setOnClickListener(null);\r\n\r\n        // Actualizar datos si es necesario\r\n        if (screenId == SCR_GUIAS) {\r\n            refreshGuiasDashboard();\r\n        }\r\n    }\r\n\r\n    // ===================== SECTION 1: EMPRESA =====================\r\n\r\n    private void initEmpresaSection() {\r\n        setupMapPreview();\r\n        updateMapPreview();\r\n\r\n        // Cargar datos previos\r\n        binding.scrEmpresa.etNombre.setText(empresa.nombre);\r\n        binding.scrEmpresa.etCorreo.setText(empresa.correo);\r\n        binding.scrEmpresa.etTelefono.setText(empresa.telefono);\r\n        binding.scrEmpresa.etWeb.setText(empresa.web);\r\n        binding.scrEmpresa.etDescripcion.setText(empresa.descripcion);\r\n\r\n        if (empresa.direccion != null && !empresa.direccion.isEmpty()) {\r\n            binding.scrEmpresa.tvDireccion.setText(empresa.direccion);\r\n        }\r\n\r\n        // Configurar galer├¡a\r\n        for (String s : empresa.imagenUris) galeriaUris.add(Uri.parse(s));\r\n        binding.scrEmpresa.rvGaleria.setLayoutManager(\r\n                new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false));\r\n        binding.scrEmpresa.rvGaleria.setAdapter(new ImageUriAdapter(galeriaUris, pos -> {\r\n            galeriaUris.remove(pos);\r\n            binding.scrEmpresa.rvGaleria.getAdapter().notifyItemRemoved(pos);\r\n            actualizarChecklistYEstado();\r\n        }));\r\n\r\n        // Botones\r\n        binding.scrEmpresa.btnAgregarFotos.setOnClickListener(v -> abrirPickerImagenes());\r\n        binding.scrEmpresa.btnElegirUbicacion.setOnClickListener(v -> abrirPickerUbicacion());\r\n        binding.scrEmpresa.btnGuardar.setOnClickListener(v -> guardarEmpresa(false));\r\n        binding.scrEmpresa.btnPublicar.setOnClickListener(v -> guardarEmpresa(true));\r\n\r\n        actualizarChecklistYEstado();\r\n    }\r\n\r\n    private void setupMapPreview() {\r\n        org.osmdroid.config.Configuration.getInstance().setUserAgentValue(getPackageName());\r\n        binding.scrEmpresa.mapPreview.setMultiTouchControls(false);\r\n        binding.scrEmpresa.mapPreview.setTileSource(\r\n                org.osmdroid.tileprovider.tilesource.TileSourceFactory.MAPNIK);\r\n        binding.scrEmpresa.mapPreview.getController().setZoom(4.0);\r\n        binding.scrEmpresa.mapPreview.getController().setCenter(\r\n                new org.osmdroid.util.GeoPoint(-9.19, -75.02)); // Per├║\r\n    }\r\n\r\n    private void updateMapPreview() {\r\n        boolean hasLoc = empresa != null && empresa.lat != 0 && empresa.lon != 0\r\n                && empresa.direccion != null && !empresa.direccion.isEmpty();\r\n\r\n        if (!hasLoc) {\r\n            binding.scrEmpresa.tvDireccion.setText(\"Sin direcci├│n\");\r\n            binding.scrEmpresa.mapPreview.getOverlays().clear();\r\n            binding.scrEmpresa.mapPreview.getController().setZoom(4.0);\r\n            binding.scrEmpresa.mapPreview.getController().setCenter(\r\n                    new org.osmdroid.util.GeoPoint(-9.19, -75.02));\r\n            binding.scrEmpresa.mapPreview.invalidate();\r\n            return;\r\n        }\r\n\r\n        org.osmdroid.util.GeoPoint p = new org.osmdroid.util.GeoPoint(empresa.lat, empresa.lon);\r\n        binding.scrEmpresa.mapPreview.getOverlays().clear();\r\n\r\n        org.osmdroid.views.overlay.Marker m =\r\n                new org.osmdroid.views.overlay.Marker(binding.scrEmpresa.mapPreview);\r\n        m.setPosition(p);\r\n        m.setAnchor(org.osmdroid.views.overlay.Marker.ANCHOR_CENTER,\r\n                org.osmdroid.views.overlay.Marker.ANCHOR_BOTTOM);\r\n        m.setTitle(\"Ubicaci├│n seleccionada\");\r\n        binding.scrEmpresa.mapPreview.getOverlays().add(m);\r\n\r\n        binding.scrEmpresa.mapPreview.getController().setZoom(15.0);\r\n        binding.scrEmpresa.mapPreview.getController().setCenter(p);\r\n        binding.scrEmpresa.tvDireccion.setText(empresa.direccion);\r\n        binding.scrEmpresa.mapPreview.invalidate();\r\n    }\r\n\r\n    private void abrirPickerImagenes() {\r\n        Intent i = new Intent(Intent.ACTION_OPEN_DOCUMENT);\r\n        i.addCategory(Intent.CATEGORY_OPENABLE);\r\n        i.setType(\"image/*\");\r\n        i.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n        i.putExtra(Intent.EXTRA_LOCAL_ONLY, true);\r\n        i.addFlags(Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION |\r\n                Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n        pickImagesLauncher.launch(Intent.createChooser(i, \"Selecciona im├ígenes\"));\r\n    }\r\n\r\n    private void abrirPickerUbicacion() {\r\n        pickLocationLauncher.launch(new Intent(this, MapPickerActivity.class));\r\n    }\r\n\r\n    private void guardarEmpresa(boolean publicar) {\r\n        if (!capturarFormulario(publicar)) return;\r\n\r\n        if (publicar && !empresa.esCompleta()) {\r\n            Snackbar.make(binding.getRoot(),\r\n                    \"A├║n faltan requisitos para publicar.\", Snackbar.LENGTH_LONG).show();\r\n            return;\r\n        }\r\n\r\n        persistir();\r\n        String msg = publicar ? \"Perfil publicado Ô£à\" : \"Empresa guardada\";\r\n        Snackbar.make(binding.getRoot(), msg, Snackbar.LENGTH_SHORT).show();\r\n    }\r\n\r\n    private boolean capturarFormulario(boolean validarTodo) {\r\n        EditText etNombre = binding.scrEmpresa.etNombre;\r\n        EditText etCorreo = binding.scrEmpresa.etCorreo;\r\n        EditText etTelefono = binding.scrEmpresa.etTelefono;\r\n        EditText etDescripcion = binding.scrEmpresa.etDescripcion;\r\n\r\n        empresa.nombre = etNombre.getText().toString().trim();\r\n        empresa.correo = etCorreo.getText().toString().trim();\r\n        empresa.telefono = etTelefono.getText().toString().trim();\r\n        empresa.web = binding.scrEmpresa.etWeb.getText().toString().trim();\r\n        empresa.descripcion = etDescripcion.getText().toString().trim();\r\n\r\n        // Validaciones\r\n        if (empresa.nombre.isEmpty()) {\r\n            etNombre.setError(\"Requerido\");\r\n            if (validarTodo) return false;\r\n        }\r\n\r\n        if (empresa.correo.isEmpty() || !Patterns.EMAIL_ADDRESS.matcher(empresa.correo).matches()) {\r\n            etCorreo.setError(\"Correo inv├ílido\");\r\n            if (validarTodo) return false;\r\n        }\r\n\r\n        if (empresa.telefono.isEmpty()) {\r\n            etTelefono.setError(\"Requerido\");\r\n            if (validarTodo) return false;\r\n        }\r\n\r\n        if (validarTodo && empresa.descripcion.isEmpty()) {\r\n            etDescripcion.setError(\"Requerida\");\r\n            return false;\r\n        }\r\n\r\n        // Guardar URIs de galer├¡a\r\n        empresa.imagenUris.clear();\r\n        for (Uri u : galeriaUris) empresa.imagenUris.add(u.toString());\r\n\r\n        return true;\r\n    }\r\n\r\n    private void persistir() {\r\n        empresaRepo.save(empresa);\r\n        actualizarChecklistYEstado();\r\n    }\r\n\r\n    private void actualizarChecklistYEstado() {\r\n        setCheck(binding.scrEmpresa.chkContacto,\r\n                !empresa.correo.isEmpty() && !empresa.telefono.isEmpty());\r\n        setCheck(binding.scrEmpresa.chkUbicacion,\r\n                empresa.direccion != null && !empresa.direccion.isEmpty());\r\n        setCheck(binding.scrEmpresa.chkFotos, galeriaUris.size() >= 2);\r\n        setCheck(binding.scrEmpresa.chkDescripcion, !empresa.descripcion.isEmpty());\r\n\r\n        TextView tvEstado = binding.scrEmpresa.tvEstado;\r\n        boolean completa = empresa.esCompleta();\r\n        tvEstado.setText(completa ? \"Ô£à Perfil completo\" : \"ÔÜá´©Å Perfil incompleto\");\r\n\r\n        Button btnPublicar = binding.scrEmpresa.btnPublicar;\r\n        btnPublicar.setEnabled(completa);\r\n    }\r\n\r\n    private void setCheck(TextView tv, boolean ok) {\r\n        tv.setText((ok ? \"Ô£ô \" : \"ÔÇó \") + tv.getText().toString().replaceFirst(\"^[Ô£ôÔÇó]\\\\s*\", \"\"));\r\n    }\r\n\r\n    // ===================== SECTION 2: TOURS =====================\r\n\r\n    private void initToursSection() {\r\n        TourRepository repo = new TourRepository(this);\r\n        List<Tour> ultimos = repo.findLastN(3);\r\n        List<Tour> todosTours = repo.findAll();\r\n\r\n        // Configurar RecyclerView horizontal\r\n        LinearLayoutManager lm = new LinearLayoutManager(this,\r\n                LinearLayoutManager.HORIZONTAL, false);\r\n        binding.scrTours.rvUltimos.setLayoutManager(lm);\r\n\r\n        TourAdapter adapter = new TourAdapter(\r\n                ultimos,\r\n                t -> {\r\n                    Intent i = new Intent(this, TourDetalleActivity.class);\r\n                    i.putExtra(\"id\", t.id);\r\n                    startActivity(i);\r\n                },\r\n                (t, anchor) -> {}\r\n        );\r\n        binding.scrTours.rvUltimos.setAdapter(adapter);\r\n\r\n        // Actualizar KPIs\r\n        actualizarKPIsTours(todosTours);\r\n\r\n        // Botones\r\n        binding.scrTours.btnVerTodosUltimos.setOnClickListener(v ->\r\n                startActivity(new Intent(this, TourListActivity.class)));\r\n\r\n        binding.scrTours.fabNuevoTour.setVisibility(View.VISIBLE);\r\n        binding.scrTours.fabNuevoTour.setOnClickListener(v -> {\r\n            if (empresa == null || !empresa.esCompleta()) {\r\n                Snackbar.make(binding.getRoot(),\r\n                        \"Primero completa el perfil de tu empresa\",\r\n                        Snackbar.LENGTH_LONG).show();\r\n                binding.bottomNav.setSelectedItemId(R.id.nav_empresa);\r\n                return;\r\n            }\r\n            startActivity(new Intent(this, TourFormActivity.class));\r\n        });\r\n    }\r\n\r\n    private void actualizarKPIsTours(List<Tour> tours) {\r\n        int publicados = 0, pendientes = 0, borradores = 0;\r\n\r\n        for (Tour tour : tours) {\r\n            if (tour.estado == null) continue;\r\n            switch (tour.estado) {\r\n                case PUBLICADO:\r\n                    publicados++;\r\n                    break;\r\n                case PENDIENTE_GUIA:\r\n                    pendientes++;\r\n                    break;\r\n                case BORRADOR:\r\n                    borradores++;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        binding.scrTours.tvCountPublicados.setText(String.valueOf(publicados));\r\n        binding.scrTours.tvCountPendientes.setText(String.valueOf(pendientes));\r\n        binding.scrTours.tvCountBorradores.setText(String.valueOf(borradores));\r\n    }\r\n\r\n    // ===================== SECTION 3: GU├ìAS =====================\r\n\r\n    private void initGuiasSection() {\r\n        // Acciones r├ípidas\r\n        binding.scrGuias.btnExplorarGuias.setOnClickListener(v ->\r\n                startActivity(new Intent(this, GuideDirectoryActivity.class)));\r\n\r\n        binding.scrGuias.btnOfertasGuias.setOnClickListener(v ->\r\n                startActivity(new Intent(this, OfferInboxActivity.class)));\r\n\r\n        // Carrusel horizontal de gu├¡as sugeridos\r\n        RecyclerView rv = binding.scrGuias.rvGuiasSugeridos;\r\n        rv.setLayoutManager(new LinearLayoutManager(this,\r\n                LinearLayoutManager.HORIZONTAL, false));\r\n\r\n        guiasAdapter = new GuideAdapter(this, sugeridos, new GuideAdapter.OnAction() {\r\n            @Override\r\n            public void onProfile(Guide g) {\r\n                Intent i = new Intent(Admin_HomeActivity.this,\r\n                        GuideProfileActivity.class);\r\n                i.putExtra(\"guide\", g);\r\n                startActivity(i);\r\n            }\r\n\r\n            @Override\r\n            public void onOffer(Guide g) {\r\n                Intent i = new Intent(Admin_HomeActivity.this,\r\n                        OfferCreateActivity.class);\r\n                i.putExtra(\"guide\", g);\r\n                startActivity(i);\r\n            }\r\n        });\r\n        rv.setAdapter(guiasAdapter);\r\n\r\n        refreshGuiasDashboard();\r\n    }\r\n\r\n    private void refreshGuiasDashboard() {\r\n        // Actualizar KPIs\r\n        int pend = OfferRepository.get().byStatus(Offer.Status.PENDIENTE).size();\r\n        int acep = OfferRepository.get().byStatus(Offer.Status.ACEPTADA).size();\r\n        int activos = GuideRepository.get().all().size();\r\n\r\n        binding.scrGuias.kpiOfertasPendientes.setText(String.valueOf(pend));\r\n        binding.scrGuias.kpiOfertasAceptadas.setText(String.valueOf(acep));\r\n        binding.scrGuias.kpiGuiasActivos.setText(String.valueOf(activos));\r\n\r\n        // Actualizar gu├¡as sugeridos\r\n        sugeridos.clear();\r\n        List<Guide> all = GuideRepository.get().all();\r\n        for (int i = 0; i < Math.min(5, all.size()); i++) {\r\n            sugeridos.add(all.get(i));\r\n        }\r\n        guiasAdapter.notifyDataSetChanged();\r\n\r\n        binding.scrGuias.emptyStateGuias.setVisibility(\r\n                sugeridos.isEmpty() ? View.VISIBLE : View.GONE);\r\n    }\r\n\r\n    // ===================== SECTION 4: REPORTES =====================\r\n\r\n    private void initReportesSection() {\r\n        // Filtros de per├¡odo\r\n        binding.scrReportes.chipSemana.setOnClickListener(v -> cargarReportes(\"SEMANA\"));\r\n        binding.scrReportes.chipMes.setOnClickListener(v -> cargarReportes(\"MES\"));\r\n        binding.scrReportes.chipAnio.setOnClickListener(v -> cargarReportes(\"ANIO\"));\r\n\r\n        // Ver todas las transacciones\r\n        binding.scrReportes.btnVerTodasTransacciones.setOnClickListener(v -> {\r\n            Snackbar.make(binding.getRoot(),\r\n                    \"Funcionalidad en desarrollo\", Snackbar.LENGTH_SHORT).show();\r\n        });\r\n\r\n        // Cargar datos iniciales (mes)\r\n        cargarReportes(\"MES\");\r\n    }\r\n\r\n    private void cargarReportes(String periodo) {\r\n        // KPIs principales (datos de ejemplo - reemplazar con BD real)\r\n        switch (periodo) {\r\n            case \"SEMANA\":\r\n                binding.scrReportes.tvIngresosTotales.setText(\"S/ 2,850\");\r\n                binding.scrReportes.tvIngresosCambio.setText(\"Ôåæ +12% vs anterior\");\r\n                binding.scrReportes.tvReservasTotales.setText(\"12\");\r\n                binding.scrReportes.tvReservasCambio.setText(\"Ôåæ +3 vs anterior\");\r\n                break;\r\n            case \"MES\":\r\n                binding.scrReportes.tvIngresosTotales.setText(\"S/ 12,450\");\r\n                binding.scrReportes.tvIngresosCambio.setText(\"Ôåæ +15% vs anterior\");\r\n                binding.scrReportes.tvReservasTotales.setText(\"48\");\r\n                binding.scrReportes.tvReservasCambio.setText(\"Ôåæ +8 vs anterior\");\r\n                break;\r\n            case \"ANIO\":\r\n                binding.scrReportes.tvIngresosTotales.setText(\"S/ 148,900\");\r\n                binding.scrReportes.tvIngresosCambio.setText(\"Ôåæ +23% vs anterior\");\r\n                binding.scrReportes.tvReservasTotales.setText(\"567\");\r\n                binding.scrReportes.tvReservasCambio.setText(\"Ôåæ +89 vs anterior\");\r\n                break;\r\n        }\r\n\r\n        // KPIs secundarios\r\n        TourRepository tourRepo = new TourRepository(this);\r\n        int toursActivos = 0;\r\n        for (Tour t : tourRepo.findAll()) {\r\n            if (t.estado == TourEstado.PUBLICADO) toursActivos++;\r\n        }\r\n\r\n        binding.scrReportes.tvToursActivos.setText(String.valueOf(toursActivos));\r\n        binding.scrReportes.tvGuiasContratados.setText(\r\n                String.valueOf(GuideRepository.get().all().size()));\r\n        binding.scrReportes.tvSatisfaccion.setText(\"4.7\");\r\n    }\r\n\r\n    // ===================== SECTION 5: PERFIL =====================\r\n\r\n    private void initPerfilSection() {\r\n        // Cargar datos del admin\r\n        binding.scrPerfil.tvNombre.setText(admin.getNombre());\r\n        binding.scrPerfil.tvEmail.setText(admin.getEmail());\r\n        binding.scrPerfil.tvTelefono.setText(\"+51 \" + admin.getTelefono());\r\n\r\n        // Datos de empresa\r\n        binding.scrPerfil.tvEmpresaNombre.setText(empresa.nombre);\r\n        binding.scrPerfil.tvRuc.setText(\"20123456789\");\r\n\r\n        // Botones\r\n        binding.scrPerfil.btnEditarPerfil.setOnClickListener(v -> mostrarDialogEditarPerfil());\r\n\r\n        binding.scrPerfil.btnCambiarFoto.setOnClickListener(v -> {\r\n            Snackbar.make(binding.getRoot(),\r\n                    \"Funcionalidad en desarrollo\", Snackbar.LENGTH_SHORT).show();\r\n        });\r\n\r\n        binding.scrPerfil.btnVerEmpresa.setOnClickListener(v -> {\r\n            binding.bottomNav.setSelectedItemId(R.id.nav_empresa);\r\n        });\r\n\r\n        // Switches\r\n        binding.scrPerfil.switchNotificaciones.setOnCheckedChangeListener((buttonView, isChecked) -> {\r\n            String msg = isChecked ? \"Notificaciones activadas\" : \"Notificaciones desactivadas\";\r\n            Snackbar.make(binding.getRoot(), msg, Snackbar.LENGTH_SHORT).show();\r\n        });\r\n\r\n        binding.scrPerfil.switchModoOscuro.setOnCheckedChangeListener((buttonView, isChecked) -> {\r\n            String msg = isChecked ? \"Modo oscuro activado\" : \"Modo oscuro desactivado\";\r\n            Snackbar.make(binding.getRoot(), msg, Snackbar.LENGTH_SHORT).show();\r\n        });\r\n\r\n        binding.scrPerfil.btnIdioma.setOnClickListener(v -> {\r\n            Snackbar.make(binding.getRoot(),\r\n                    \"Funcionalidad en desarrollo\", Snackbar.LENGTH_SHORT).show();\r\n        });\r\n\r\n        // Cerrar sesi├│n\r\n        binding.scrPerfil.btnCerrarSesion.setOnClickListener(v -> {\r\n            new androidx.appcompat.app.AlertDialog.Builder(this)\r\n                    .setTitle(\"Cerrar sesi├│n\")\r\n                    .setMessage(\"┬┐Est├ís seguro de que deseas cerrar sesi├│n?\")\r\n                    .setPositiveButton(\"S├¡\", (dialog, which) -> {\r\n                        adminRepo.clear();\r\n                        Snackbar.make(binding.getRoot(),\r\n                                \"Sesi├│n cerrada\", Snackbar.LENGTH_LONG).show();\r\n                        // TODO: Redirigir al login cuando est├® implementado\r\n                        // startActivity(new Intent(this, LoginActivity.class));\r\n                        // finish();\r\n                    })\r\n                    .setNegativeButton(\"Cancelar\", null)\r\n                    .show();\r\n        });\r\n    }\r\n\r\n    private void mostrarDialogEditarPerfil() {\r\n        View dialogView = getLayoutInflater().inflate(R.layout.dialog_editar_perfil, null);\r\n\r\n        com.google.android.material.textfield.TextInputEditText etNombre =\r\n                dialogView.findViewById(R.id.etNombre);\r\n        com.google.android.material.textfield.TextInputEditText etEmail =\r\n                dialogView.findViewById(R.id.etEmail);\r\n        com.google.android.material.textfield.TextInputEditText etTelefono =\r\n                dialogView.findViewById(R.id.etTelefono);\r\n\r\n        // Llenar con datos actuales\r\n        etNombre.setText(admin.getNombre());\r\n        etEmail.setText(admin.getEmail());\r\n        etTelefono.setText(admin.getTelefono());\r\n\r\n        androidx.appcompat.app.AlertDialog dialog =\r\n                new androidx.appcompat.app.AlertDialog.Builder(this)\r\n                        .setView(dialogView)\r\n                        .create();\r\n\r\n        // Bot├│n cancelar\r\n        dialogView.findViewById(R.id.btnCancelar).setOnClickListener(v -> dialog.dismiss());\r\n\r\n        // Bot├│n guardar\r\n        dialogView.findViewById(R.id.btnGuardar).setOnClickListener(v -> {\r\n            String nombre = etNombre.getText().toString().trim();\r\n            String telefono = etTelefono.getText().toString().trim();\r\n\r\n            // Validaciones\r\n            if (nombre.isEmpty()) {\r\n                etNombre.setError(\"El nombre es requerido\");\r\n                return;\r\n            }\r\n\r\n            if (telefono.isEmpty() || telefono.length() < 9) {\r\n                etTelefono.setError(\"Tel├®fono inv├ílido (m├¡nimo 9 d├¡gitos)\");\r\n                return;\r\n            }\r\n\r\n            // Actualizar admin (email NO cambia)\r\n            admin.setNombre(nombre);\r\n            admin.setTelefono(telefono);\r\n            adminRepo.save(admin);\r\n\r\n            // Actualizar UI\r\n            binding.scrPerfil.tvNombre.setText(admin.getNombre());\r\n            binding.scrPerfil.tvTelefono.setText(\"+51 \" + admin.getTelefono());\r\n\r\n            dialog.dismiss();\r\n            Snackbar.make(binding.getRoot(),\r\n                    \"Perfil actualizado Ô£ô\", Snackbar.LENGTH_SHORT).show();\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n\r\n    // ===================== DATA SEEDING (DEVELOPMENT ONLY) =====================\r\n\r\n    /**\r\n     * Crea tours de prueba si la BD est├í vac├¡a\r\n     * ELIMINAR en producci├│n\r\n     */\r\n    private void crearDatosDePruebaSiEsNecesario() {\r\n        TourRepository repo = new TourRepository(this);\r\n        if (!repo.findAll().isEmpty()) return;\r\n\r\n        // Tour 1\r\n        Tour t1 = new Tour();\r\n        t1.id = \"1\";\r\n        t1.titulo = \"City Tour Lima Centro\";\r\n        t1.descripcionCorta = \"Conoce el centro hist├│rico de Lima\";\r\n        t1.precioPorPersona = 50.0;\r\n        t1.cupos = 15;\r\n        t1.estado = TourEstado.PUBLICADO;\r\n        repo.upsert(t1);\r\n\r\n        // Tour 2\r\n        Tour t2 = new Tour();\r\n        t2.id = \"2\";\r\n        t2.titulo = \"Tour Gastron├│mico Miraflores\";\r\n        t2.descripcionCorta = \"Degusta los mejores platos peruanos\";\r\n        t2.precioPorPersona = 80.0;\r\n        t2.cupos = 10;\r\n        t2.estado = TourEstado.PUBLICADO;\r\n        repo.upsert(t2);\r\n\r\n        // Tour 3\r\n        Tour t3 = new Tour();\r\n        t3.id = \"3\";\r\n        t3.titulo = \"Huacachina Aventura\";\r\n        t3.descripcionCorta = \"Sandboarding en el desierto\";\r\n        t3.precioPorPersona = 120.0;\r\n        t3.cupos = 8;\r\n        t3.estado = TourEstado.EN_CURSO;\r\n        repo.upsert(t3);\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/Admin_HomeActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/Admin_HomeActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/Admin_HomeActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/Admin_HomeActivity.java	(date 1763322434605)
-@@ -1,4 +1,5 @@
- package com.example.proyecto_2025.Activities_Administrador;
-+
- import android.app.Activity;
- import android.content.Intent;
- import android.net.Uri;
-@@ -19,26 +20,25 @@
- 
- import com.example.proyecto_2025.R;
- import com.example.proyecto_2025.adapter.ImageUriAdapter;
--import com.example.proyecto_2025.adapter.GuideAdapter;
-+import com.example.proyecto_2025.adapter.GuiasAdapter;
- import com.example.proyecto_2025.adapter.TourAdapter;
-+import com.example.proyecto_2025.data.AdminRepository;
- import com.example.proyecto_2025.data.EmpresaRepository;
--import com.example.proyecto_2025.data.TourRepository;
- import com.example.proyecto_2025.data.OfferRepository;
--import com.example.proyecto_2025.data.GuideRepository;
--import com.example.proyecto_2025.data.AdminRepository;
-+import com.example.proyecto_2025.data.TourRepository;
-+import com.example.proyecto_2025.data.repository.GuiaRepository;
- import com.example.proyecto_2025.databinding.ActivityAdminHomeBinding;
-+import com.example.proyecto_2025.model.Admin;
- import com.example.proyecto_2025.model.Empresa;
--import com.example.proyecto_2025.model.Guide;
-+import com.example.proyecto_2025.model.Guia;
- import com.example.proyecto_2025.model.Offer;
- import com.example.proyecto_2025.model.Tour;
- import com.example.proyecto_2025.model.TourEstado;
--import com.example.proyecto_2025.model.Admin;
- import com.google.android.material.snackbar.Snackbar;
- 
- import java.util.ArrayList;
- import java.util.List;
- 
--
- public class Admin_HomeActivity extends AppCompatActivity {
- 
-     // ===================== BINDING & CONSTANTS =====================
-@@ -58,8 +58,8 @@
-     private Empresa empresa;
-     private Admin admin;
-     private final List<Uri> galeriaUris = new ArrayList<>();
--    private final List<Guide> sugeridos = new ArrayList<>();
--    private GuideAdapter guiasAdapter;
-+    private final List<Guia> sugeridos = new ArrayList<>();
-+    private GuiasAdapter guiasAdapter;
- 
-     // ===================== LAUNCHERS =====================
-     private ActivityResultLauncher<Intent> pickImagesLauncher;
-@@ -72,26 +72,17 @@
-         binding = ActivityAdminHomeBinding.inflate(getLayoutInflater());
-         setContentView(binding.getRoot());
- 
--        // Configurar toolbar
-         setupToolbar();
--
--        // Inicializar repositorios y datos
-         initializeRepositories();
--
--        // Configurar launchers
-         setupLaunchers();
- 
--        // Configurar bottom navigation
-         binding.bottomNav.setOnItemSelectedListener(this::onBottomItemSelected);
- 
--        // Inicializar todas las secciones
-         initializeAllSections();
- 
--        // Pantalla inicial
-         binding.bottomNav.setSelectedItemId(R.id.nav_empresa);
-         showScreen(SCR_EMPRESA);
- 
--        // Datos de prueba (eliminar en producci├│n)
-         crearDatosDePruebaSiEsNecesario();
-     }
- 
-@@ -106,7 +97,6 @@
-     }
- 
-     private void initializeRepositories() {
--        GuideRepository.get().seedIfEmpty(this);
-         empresaRepo = new EmpresaRepository(this);
-         empresa = empresaRepo.load();
-         adminRepo = new AdminRepository(this);
-@@ -114,7 +104,7 @@
-     }
- 
-     private void setupLaunchers() {
--        // Launcher para seleccionar im├ígenes
-+        // Imágenes
-         pickImagesLauncher = registerForActivityResult(
-                 new ActivityResultContracts.StartActivityForResult(), result -> {
-                     if (result.getResultCode() != Activity.RESULT_OK || result.getData() == null) return;
-@@ -145,7 +135,7 @@
-                     actualizarChecklistYEstado();
-                 });
- 
--        // Launcher para seleccionar ubicaci├│n
-+        // Ubicación
-         pickLocationLauncher = registerForActivityResult(
-                 new ActivityResultContracts.StartActivityForResult(), result -> {
-                     if (result.getResultCode() != Activity.RESULT_OK || result.getData() == null) return;
-@@ -157,7 +147,7 @@
- 
-                     binding.scrEmpresa.tvDireccion.setText(
-                             (empresa.direccion == null || empresa.direccion.isEmpty())
--                                    ? "Sin direcci├│n"
-+                                    ? "Sin dirección"
-                                     : empresa.direccion
-                     );
- 
-@@ -187,27 +177,24 @@
-     }
- 
-     private void showScreen(@IdRes int screenId) {
--        // Ocultar todas las pantallas
-         binding.scrEmpresa.getRoot().setVisibility(View.GONE);
-         binding.scrTours.getRoot().setVisibility(View.GONE);
-         binding.scrGuias.getRoot().setVisibility(View.GONE);
-         binding.scrReportes.getRoot().setVisibility(View.GONE);
-         binding.scrPerfil.getRoot().setVisibility(View.GONE);
- 
--        // Mostrar pantalla seleccionada
-         View target =
-                 (screenId == SCR_EMPRESA)  ? binding.scrEmpresa.getRoot() :
-                         (screenId == SCR_TOURS)    ? binding.scrTours.getRoot() :
-                                 (screenId == SCR_GUIAS)    ? binding.scrGuias.getRoot() :
--                                        (screenId == SCR_REPORTES) ? binding.scrReportes.getRoot() : binding.scrPerfil.getRoot();
-+                                        (screenId == SCR_REPORTES) ? binding.scrReportes.getRoot() :
-+                                                binding.scrPerfil.getRoot();
- 
-         target.setVisibility(View.VISIBLE);
- 
--        // FAB visible solo en ciertas pantallas
-         binding.fab.setVisibility(View.GONE);
-         binding.fab.setOnClickListener(null);
- 
--        // Actualizar datos si es necesario
-         if (screenId == SCR_GUIAS) {
-             refreshGuiasDashboard();
-         }
-@@ -219,7 +206,6 @@
-         setupMapPreview();
-         updateMapPreview();
- 
--        // Cargar datos previos
-         binding.scrEmpresa.etNombre.setText(empresa.nombre);
-         binding.scrEmpresa.etCorreo.setText(empresa.correo);
-         binding.scrEmpresa.etTelefono.setText(empresa.telefono);
-@@ -230,7 +216,6 @@
-             binding.scrEmpresa.tvDireccion.setText(empresa.direccion);
-         }
- 
--        // Configurar galer├¡a
-         for (String s : empresa.imagenUris) galeriaUris.add(Uri.parse(s));
-         binding.scrEmpresa.rvGaleria.setLayoutManager(
-                 new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false));
-@@ -240,7 +225,6 @@
-             actualizarChecklistYEstado();
-         }));
- 
--        // Botones
-         binding.scrEmpresa.btnAgregarFotos.setOnClickListener(v -> abrirPickerImagenes());
-         binding.scrEmpresa.btnElegirUbicacion.setOnClickListener(v -> abrirPickerUbicacion());
-         binding.scrEmpresa.btnGuardar.setOnClickListener(v -> guardarEmpresa(false));
-@@ -256,7 +240,7 @@
-                 org.osmdroid.tileprovider.tilesource.TileSourceFactory.MAPNIK);
-         binding.scrEmpresa.mapPreview.getController().setZoom(4.0);
-         binding.scrEmpresa.mapPreview.getController().setCenter(
--                new org.osmdroid.util.GeoPoint(-9.19, -75.02)); // Per├║
-+                new org.osmdroid.util.GeoPoint(-9.19, -75.02)); // Perú
-     }
- 
-     private void updateMapPreview() {
-@@ -264,7 +248,7 @@
-                 && empresa.direccion != null && !empresa.direccion.isEmpty();
- 
-         if (!hasLoc) {
--            binding.scrEmpresa.tvDireccion.setText("Sin direcci├│n");
-+            binding.scrEmpresa.tvDireccion.setText("Sin dirección");
-             binding.scrEmpresa.mapPreview.getOverlays().clear();
-             binding.scrEmpresa.mapPreview.getController().setZoom(4.0);
-             binding.scrEmpresa.mapPreview.getController().setCenter(
-@@ -281,7 +265,7 @@
-         m.setPosition(p);
-         m.setAnchor(org.osmdroid.views.overlay.Marker.ANCHOR_CENTER,
-                 org.osmdroid.views.overlay.Marker.ANCHOR_BOTTOM);
--        m.setTitle("Ubicaci├│n seleccionada");
-+        m.setTitle("Ubicación seleccionada");
-         binding.scrEmpresa.mapPreview.getOverlays().add(m);
- 
-         binding.scrEmpresa.mapPreview.getController().setZoom(15.0);
-@@ -298,7 +282,7 @@
-         i.putExtra(Intent.EXTRA_LOCAL_ONLY, true);
-         i.addFlags(Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION |
-                 Intent.FLAG_GRANT_READ_URI_PERMISSION);
--        pickImagesLauncher.launch(Intent.createChooser(i, "Selecciona im├ígenes"));
-+        pickImagesLauncher.launch(Intent.createChooser(i, "Selecciona imágenes"));
-     }
- 
-     private void abrirPickerUbicacion() {
-@@ -310,12 +294,12 @@
- 
-         if (publicar && !empresa.esCompleta()) {
-             Snackbar.make(binding.getRoot(),
--                    "A├║n faltan requisitos para publicar.", Snackbar.LENGTH_LONG).show();
-+                    "Aún faltan requisitos para publicar.", Snackbar.LENGTH_LONG).show();
-             return;
-         }
- 
-         persistir();
--        String msg = publicar ? "Perfil publicado Ô£à" : "Empresa guardada";
-+        String msg = publicar ? "Perfil publicado ✅" : "Empresa guardada";
-         Snackbar.make(binding.getRoot(), msg, Snackbar.LENGTH_SHORT).show();
-     }
- 
-@@ -331,14 +315,14 @@
-         empresa.web = binding.scrEmpresa.etWeb.getText().toString().trim();
-         empresa.descripcion = etDescripcion.getText().toString().trim();
- 
--        // Validaciones
-         if (empresa.nombre.isEmpty()) {
-             etNombre.setError("Requerido");
-             if (validarTodo) return false;
-         }
- 
--        if (empresa.correo.isEmpty() || !Patterns.EMAIL_ADDRESS.matcher(empresa.correo).matches()) {
--            etCorreo.setError("Correo inv├ílido");
-+        if (empresa.correo.isEmpty() ||
-+                !Patterns.EMAIL_ADDRESS.matcher(empresa.correo).matches()) {
-+            etCorreo.setError("Correo inválido");
-             if (validarTodo) return false;
-         }
- 
-@@ -352,7 +336,6 @@
-             return false;
-         }
- 
--        // Guardar URIs de galer├¡a
-         empresa.imagenUris.clear();
-         for (Uri u : galeriaUris) empresa.imagenUris.add(u.toString());
- 
-@@ -374,14 +357,14 @@
- 
-         TextView tvEstado = binding.scrEmpresa.tvEstado;
-         boolean completa = empresa.esCompleta();
--        tvEstado.setText(completa ? "Ô£à Perfil completo" : "ÔÜá´©Å Perfil incompleto");
-+        tvEstado.setText(completa ? "✅ Perfil completo" : "⚠️ Perfil incompleto");
- 
-         Button btnPublicar = binding.scrEmpresa.btnPublicar;
-         btnPublicar.setEnabled(completa);
-     }
- 
-     private void setCheck(TextView tv, boolean ok) {
--        tv.setText((ok ? "Ô£ô " : "ÔÇó ") + tv.getText().toString().replaceFirst("^[Ô£ôÔÇó]\\s*", ""));
-+        tv.setText((ok ? "✔ " : "• ") + tv.getText().toString().replaceFirst("^[✔•]\\s*", ""));
-     }
- 
-     // ===================== SECTION 2: TOURS =====================
-@@ -391,11 +374,11 @@
-         List<Tour> ultimos = repo.findLastN(3);
-         List<Tour> todosTours = repo.findAll();
- 
--        // Configurar RecyclerView horizontal
-         LinearLayoutManager lm = new LinearLayoutManager(this,
-                 LinearLayoutManager.HORIZONTAL, false);
-         binding.scrTours.rvUltimos.setLayoutManager(lm);
- 
-+        // Tu TourAdapter tiene 3 parámetros en el constructor
-         TourAdapter adapter = new TourAdapter(
-                 ultimos,
-                 t -> {
-@@ -403,14 +386,14 @@
-                     i.putExtra("id", t.id);
-                     startActivity(i);
-                 },
--                (t, anchor) -> {}
-+                (t, anchor) -> {
-+                    // aquí podrías abrir un menú contextual si quieres
-+                }
-         );
-         binding.scrTours.rvUltimos.setAdapter(adapter);
- 
--        // Actualizar KPIs
-         actualizarKPIsTours(todosTours);
- 
--        // Botones
-         binding.scrTours.btnVerTodosUltimos.setOnClickListener(v ->
-                 startActivity(new Intent(this, TourListActivity.class)));
- 
-@@ -433,15 +416,9 @@
-         for (Tour tour : tours) {
-             if (tour.estado == null) continue;
-             switch (tour.estado) {
--                case PUBLICADO:
--                    publicados++;
--                    break;
--                case PENDIENTE_GUIA:
--                    pendientes++;
--                    break;
--                case BORRADOR:
--                    borradores++;
--                    break;
-+                case PUBLICADO:      publicados++; break;
-+                case PENDIENTE_GUIA: pendientes++; break;
-+                case BORRADOR:       borradores++; break;
-             }
-         }
- 
-@@ -450,107 +427,117 @@
-         binding.scrTours.tvCountBorradores.setText(String.valueOf(borradores));
-     }
- 
--    // ===================== SECTION 3: GU├ìAS =====================
-+    // ===================== SECTION 3: GUÍAS =====================
- 
-     private void initGuiasSection() {
--        // Acciones r├ípidas
-+        // Acciones rápidas
-         binding.scrGuias.btnExplorarGuias.setOnClickListener(v ->
-                 startActivity(new Intent(this, GuideDirectoryActivity.class)));
- 
-         binding.scrGuias.btnOfertasGuias.setOnClickListener(v ->
-                 startActivity(new Intent(this, OfferInboxActivity.class)));
- 
--        // Carrusel horizontal de gu├¡as sugeridos
-         RecyclerView rv = binding.scrGuias.rvGuiasSugeridos;
-         rv.setLayoutManager(new LinearLayoutManager(this,
-                 LinearLayoutManager.HORIZONTAL, false));
- 
--        guiasAdapter = new GuideAdapter(this, sugeridos, new GuideAdapter.OnAction() {
--            @Override
--            public void onProfile(Guide g) {
--                Intent i = new Intent(Admin_HomeActivity.this,
--                        GuideProfileActivity.class);
--                i.putExtra("guide", g);
--                startActivity(i);
--            }
--
--            @Override
--            public void onOffer(Guide g) {
--                Intent i = new Intent(Admin_HomeActivity.this,
--                        OfferCreateActivity.class);
--                i.putExtra("guide", g);
--                startActivity(i);
--            }
--        });
-+        // NUEVO constructor de GuiasAdapter: 4 argumentos
-+        guiasAdapter = new GuiasAdapter(
-+                GuiasAdapter.Mode.APPROVED,
-+                // onToggle: abrir perfil del guía
-+                g -> {
-+                    Intent i = new Intent(Admin_HomeActivity.this,
-+                            GuideProfileActivity.class);
-+                    i.putExtra("guide", g);
-+                    startActivity(i);
-+                },
-+                // onApprove: crear oferta
-+                g -> {
-+                    Intent i = new Intent(Admin_HomeActivity.this,
-+                            OfferCreateActivity.class);
-+                    i.putExtra("guide", g);
-+                    startActivity(i);
-+                },
-+                // onReject: por ahora solo mostramos un mensaje
-+                g -> Snackbar.make(binding.getRoot(),
-+                        "Acción de rechazo no implementada aún",
-+                        Snackbar.LENGTH_SHORT).show()
-+        );
-         rv.setAdapter(guiasAdapter);
- 
-         refreshGuiasDashboard();
-     }
- 
-     private void refreshGuiasDashboard() {
--        // Actualizar KPIs
-         int pend = OfferRepository.get().byStatus(Offer.Status.PENDIENTE).size();
-         int acep = OfferRepository.get().byStatus(Offer.Status.ACEPTADA).size();
--        int activos = GuideRepository.get().all().size();
- 
-         binding.scrGuias.kpiOfertasPendientes.setText(String.valueOf(pend));
-         binding.scrGuias.kpiOfertasAceptadas.setText(String.valueOf(acep));
--        binding.scrGuias.kpiGuiasActivos.setText(String.valueOf(activos));
-+        binding.scrGuias.kpiGuiasActivos.setText("...");
- 
--        // Actualizar gu├¡as sugeridos
--        sugeridos.clear();
--        List<Guide> all = GuideRepository.get().all();
--        for (int i = 0; i < Math.min(5, all.size()); i++) {
--            sugeridos.add(all.get(i));
--        }
--        guiasAdapter.notifyDataSetChanged();
-+        // Uso de Callback con clase anónima (no lambda)
-+        GuiaRepository.get().getGuiasActivos(
-+                new GuiaRepository.Callback<List<Guia>>() {
-+                    @Override
-+                    public void onSuccess(List<Guia> all) {
-+                        binding.scrGuias.kpiGuiasActivos
-+                                .setText(String.valueOf(all.size()));
-+
-+                        sugeridos.clear();
-+                        for (int i = 0; i < Math.min(5, all.size()); i++) {
-+                            sugeridos.add(all.get(i));
-+                        }
-+                        guiasAdapter.setData(sugeridos);
- 
--        binding.scrGuias.emptyStateGuias.setVisibility(
--                sugeridos.isEmpty() ? View.VISIBLE : View.GONE);
--    }
-+                        binding.scrGuias.emptyStateGuias.setVisibility(
-+                                sugeridos.isEmpty() ? View.VISIBLE : View.GONE);
-+                    }
- 
-+                    @Override
-+                    public void onError(Exception e) {
-+                        binding.scrGuias.kpiGuiasActivos.setText("0");
-+                        binding.scrGuias.emptyStateGuias.setVisibility(View.VISIBLE);
-+                    }
-+                });
-+    }
-+
-     // ===================== SECTION 4: REPORTES =====================
- 
-     private void initReportesSection() {
--        // Filtros de per├¡odo
-         binding.scrReportes.chipSemana.setOnClickListener(v -> cargarReportes("SEMANA"));
-         binding.scrReportes.chipMes.setOnClickListener(v -> cargarReportes("MES"));
-         binding.scrReportes.chipAnio.setOnClickListener(v -> cargarReportes("ANIO"));
- 
--        // Ver todas las transacciones
--        binding.scrReportes.btnVerTodasTransacciones.setOnClickListener(v -> {
--            Snackbar.make(binding.getRoot(),
--                    "Funcionalidad en desarrollo", Snackbar.LENGTH_SHORT).show();
--        });
-+        binding.scrReportes.btnVerTodasTransacciones.setOnClickListener(v ->
-+                Snackbar.make(binding.getRoot(),
-+                        "Funcionalidad en desarrollo", Snackbar.LENGTH_SHORT).show());
- 
--        // Cargar datos iniciales (mes)
-         cargarReportes("MES");
-     }
- 
-     private void cargarReportes(String periodo) {
--        // KPIs principales (datos de ejemplo - reemplazar con BD real)
-         switch (periodo) {
-             case "SEMANA":
-                 binding.scrReportes.tvIngresosTotales.setText("S/ 2,850");
--                binding.scrReportes.tvIngresosCambio.setText("Ôåæ +12% vs anterior");
-+                binding.scrReportes.tvIngresosCambio.setText("📈 +12% vs anterior");
-                 binding.scrReportes.tvReservasTotales.setText("12");
--                binding.scrReportes.tvReservasCambio.setText("Ôåæ +3 vs anterior");
-+                binding.scrReportes.tvReservasCambio.setText("📈 +3 vs anterior");
-                 break;
-             case "MES":
-                 binding.scrReportes.tvIngresosTotales.setText("S/ 12,450");
--                binding.scrReportes.tvIngresosCambio.setText("Ôåæ +15% vs anterior");
-+                binding.scrReportes.tvIngresosCambio.setText("📈 +15% vs anterior");
-                 binding.scrReportes.tvReservasTotales.setText("48");
--                binding.scrReportes.tvReservasCambio.setText("Ôåæ +8 vs anterior");
-+                binding.scrReportes.tvReservasCambio.setText("📈 +8 vs anterior");
-                 break;
-             case "ANIO":
-                 binding.scrReportes.tvIngresosTotales.setText("S/ 148,900");
--                binding.scrReportes.tvIngresosCambio.setText("Ôåæ +23% vs anterior");
-+                binding.scrReportes.tvIngresosCambio.setText("📈 +23% vs anterior");
-                 binding.scrReportes.tvReservasTotales.setText("567");
--                binding.scrReportes.tvReservasCambio.setText("Ôåæ +89 vs anterior");
-+                binding.scrReportes.tvReservasCambio.setText("📈 +89 vs anterior");
-                 break;
-         }
- 
--        // KPIs secundarios
-         TourRepository tourRepo = new TourRepository(this);
-         int toursActivos = 0;
-         for (Tour t : tourRepo.findAll()) {
-@@ -558,36 +545,44 @@
-         }
- 
-         binding.scrReportes.tvToursActivos.setText(String.valueOf(toursActivos));
--        binding.scrReportes.tvGuiasContratados.setText(
--                String.valueOf(GuideRepository.get().all().size()));
-+        binding.scrReportes.tvGuiasContratados.setText("0");
-         binding.scrReportes.tvSatisfaccion.setText("4.7");
-+
-+        // Guias activos para reportes
-+        GuiaRepository.get().getGuiasActivos(
-+                new GuiaRepository.Callback<List<Guia>>() {
-+                    @Override
-+                    public void onSuccess(List<Guia> all) {
-+                        binding.scrReportes.tvGuiasContratados
-+                                .setText(String.valueOf(all.size()));
-+                    }
-+
-+                    @Override
-+                    public void onError(Exception e) {
-+                        binding.scrReportes.tvGuiasContratados.setText("0");
-+                    }
-+                });
-     }
- 
-     // ===================== SECTION 5: PERFIL =====================
- 
-     private void initPerfilSection() {
--        // Cargar datos del admin
-         binding.scrPerfil.tvNombre.setText(admin.getNombre());
-         binding.scrPerfil.tvEmail.setText(admin.getEmail());
-         binding.scrPerfil.tvTelefono.setText("+51 " + admin.getTelefono());
- 
--        // Datos de empresa
-         binding.scrPerfil.tvEmpresaNombre.setText(empresa.nombre);
-         binding.scrPerfil.tvRuc.setText("20123456789");
- 
--        // Botones
-         binding.scrPerfil.btnEditarPerfil.setOnClickListener(v -> mostrarDialogEditarPerfil());
- 
--        binding.scrPerfil.btnCambiarFoto.setOnClickListener(v -> {
--            Snackbar.make(binding.getRoot(),
--                    "Funcionalidad en desarrollo", Snackbar.LENGTH_SHORT).show();
--        });
-+        binding.scrPerfil.btnCambiarFoto.setOnClickListener(v ->
-+                Snackbar.make(binding.getRoot(),
-+                        "Funcionalidad en desarrollo", Snackbar.LENGTH_SHORT).show());
- 
--        binding.scrPerfil.btnVerEmpresa.setOnClickListener(v -> {
--            binding.bottomNav.setSelectedItemId(R.id.nav_empresa);
--        });
-+        binding.scrPerfil.btnVerEmpresa.setOnClickListener(v ->
-+                binding.bottomNav.setSelectedItemId(R.id.nav_empresa));
- 
--        // Switches
-         binding.scrPerfil.switchNotificaciones.setOnCheckedChangeListener((buttonView, isChecked) -> {
-             String msg = isChecked ? "Notificaciones activadas" : "Notificaciones desactivadas";
-             Snackbar.make(binding.getRoot(), msg, Snackbar.LENGTH_SHORT).show();
-@@ -598,23 +593,18 @@
-             Snackbar.make(binding.getRoot(), msg, Snackbar.LENGTH_SHORT).show();
-         });
- 
--        binding.scrPerfil.btnIdioma.setOnClickListener(v -> {
--            Snackbar.make(binding.getRoot(),
--                    "Funcionalidad en desarrollo", Snackbar.LENGTH_SHORT).show();
--        });
-+        binding.scrPerfil.btnIdioma.setOnClickListener(v ->
-+                Snackbar.make(binding.getRoot(),
-+                        "Funcionalidad en desarrollo", Snackbar.LENGTH_SHORT).show());
- 
--        // Cerrar sesi├│n
-         binding.scrPerfil.btnCerrarSesion.setOnClickListener(v -> {
-             new androidx.appcompat.app.AlertDialog.Builder(this)
--                    .setTitle("Cerrar sesi├│n")
--                    .setMessage("┬┐Est├ís seguro de que deseas cerrar sesi├│n?")
--                    .setPositiveButton("S├¡", (dialog, which) -> {
-+                    .setTitle("Cerrar sesión")
-+                    .setMessage("¿Estás seguro de que deseas cerrar sesión?")
-+                    .setPositiveButton("Sí", (dialog, which) -> {
-                         adminRepo.clear();
-                         Snackbar.make(binding.getRoot(),
--                                "Sesi├│n cerrada", Snackbar.LENGTH_LONG).show();
--                        // TODO: Redirigir al login cuando est├® implementado
--                        // startActivity(new Intent(this, LoginActivity.class));
--                        // finish();
-+                                "Sesión cerrada", Snackbar.LENGTH_LONG).show();
-                     })
-                     .setNegativeButton("Cancelar", null)
-                     .show();
-@@ -631,7 +621,6 @@
-         com.google.android.material.textfield.TextInputEditText etTelefono =
-                 dialogView.findViewById(R.id.etTelefono);
- 
--        // Llenar con datos actuales
-         etNombre.setText(admin.getNombre());
-         etEmail.setText(admin.getEmail());
-         etTelefono.setText(admin.getTelefono());
-@@ -641,73 +630,61 @@
-                         .setView(dialogView)
-                         .create();
- 
--        // Bot├│n cancelar
-         dialogView.findViewById(R.id.btnCancelar).setOnClickListener(v -> dialog.dismiss());
- 
--        // Bot├│n guardar
-         dialogView.findViewById(R.id.btnGuardar).setOnClickListener(v -> {
-             String nombre = etNombre.getText().toString().trim();
-             String telefono = etTelefono.getText().toString().trim();
- 
--            // Validaciones
-             if (nombre.isEmpty()) {
-                 etNombre.setError("El nombre es requerido");
-                 return;
-             }
- 
-             if (telefono.isEmpty() || telefono.length() < 9) {
--                etTelefono.setError("Tel├®fono inv├ílido (m├¡nimo 9 d├¡gitos)");
-+                etTelefono.setError("Teléfono inválido (mínimo 9 dígitos)");
-                 return;
-             }
- 
--            // Actualizar admin (email NO cambia)
-             admin.setNombre(nombre);
-             admin.setTelefono(telefono);
-             adminRepo.save(admin);
- 
--            // Actualizar UI
-             binding.scrPerfil.tvNombre.setText(admin.getNombre());
-             binding.scrPerfil.tvTelefono.setText("+51 " + admin.getTelefono());
- 
-             dialog.dismiss();
-             Snackbar.make(binding.getRoot(),
--                    "Perfil actualizado Ô£ô", Snackbar.LENGTH_SHORT).show();
-+                    "Perfil actualizado ✅", Snackbar.LENGTH_SHORT).show();
-         });
- 
-         dialog.show();
-     }
- 
--    // ===================== DATA SEEDING (DEVELOPMENT ONLY) =====================
-+    // ===================== DATA SEEDING (DEV ONLY) =====================
- 
--    /**
--     * Crea tours de prueba si la BD est├í vac├¡a
--     * ELIMINAR en producci├│n
--     */
-     private void crearDatosDePruebaSiEsNecesario() {
-         TourRepository repo = new TourRepository(this);
-         if (!repo.findAll().isEmpty()) return;
- 
--        // Tour 1
-         Tour t1 = new Tour();
-         t1.id = "1";
-         t1.titulo = "City Tour Lima Centro";
--        t1.descripcionCorta = "Conoce el centro hist├│rico de Lima";
-+        t1.descripcionCorta = "Conoce el centro histórico de Lima";
-         t1.precioPorPersona = 50.0;
-         t1.cupos = 15;
-         t1.estado = TourEstado.PUBLICADO;
-         repo.upsert(t1);
- 
--        // Tour 2
-         Tour t2 = new Tour();
-         t2.id = "2";
--        t2.titulo = "Tour Gastron├│mico Miraflores";
-+        t2.titulo = "Tour Gastronómico Miraflores";
-         t2.descripcionCorta = "Degusta los mejores platos peruanos";
-         t2.precioPorPersona = 80.0;
-         t2.cupos = 10;
-         t2.estado = TourEstado.PUBLICADO;
-         repo.upsert(t2);
- 
--        // Tour 3
-         Tour t3 = new Tour();
-         t3.id = "3";
-         t3.titulo = "Huacachina Aventura";
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_HomeActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Superadmin;\r\n\r\nimport android.content.Intent;\r\nimport android.content.res.ColorStateList;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.IdRes;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminVistaInicialBinding;\r\nimport com.github.mikephil.charting.data.PieData;\r\nimport com.github.mikephil.charting.data.PieDataSet;\r\nimport com.github.mikephil.charting.data.PieEntry;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\n\r\n/**\r\n * HomeView Superadmin (sin fragments):\r\n * Bottom bar fija: Dashboard, Admins, Guías, Clientes, Registros, Perfil\r\n * FAB contextual sólo en Admins (Registrar Admin) y Guías (Registrar Guías).\r\n * Ahora también: Carga los datos del usuario logueado desde Firestore.\r\n */\r\npublic class Superadmin_HomeActivity extends AppCompatActivity {\r\n\r\n    private ActivitySuperadminVistaInicialBinding binding;\r\n\r\n    // Firebase\r\n    private final FirebaseAuth auth = FirebaseAuth.getInstance();\r\n    private final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    // Retrofit (dejas tu servicio como lo tengas)\r\n    private EmployeeService employeeService;\r\n\r\n    // IDs de raíces (coinciden con los android:id de cada <include/>)\r\n    private static final int SCR_DASHBOARD = R.id.scrDashboard;\r\n    private static final int SCR_ADMINS    = R.id.scrAdmins;\r\n    private static final int SCR_GUIAS     = R.id.scrGuias;\r\n    private static final int SCR_CLIENTES  = R.id.scrClientes;\r\n    private static final int SCR_REGISTROS = R.id.scrRegistros;\r\n    private static final int SCR_PERFIL    = R.id.scrPerfil;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivitySuperadminVistaInicialBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        // Si no usarás \"Registros\" aún:\r\n        binding.bottomNav.getMenu().findItem(R.id.nav_registros).setVisible(false);\r\n\r\n        setSupportActionBar(binding.toolbar);\r\n        if (getSupportActionBar() != null) {\r\n            getSupportActionBar().setTitle(\"\");\r\n            getSupportActionBar().setDisplayShowTitleEnabled(false);\r\n        }\r\n\r\n        // Navegación inferior\r\n        binding.bottomNav.setOnItemSelectedListener(this::onBottomItemSelected);\r\n\r\n        // Estado inicial\r\n        binding.bottomNav.setSelectedItemId(R.id.nav_dashboard);\r\n        showScreen(SCR_DASHBOARD);\r\n\r\n        // Acciones rápidas Dashboard\r\n        binding.scrDashboard.btnRegistrarAdmin.setOnClickListener(v ->\r\n                startActivity(new Intent(this, Superadmin_Registrar_Administrador.class)));\r\n        binding.scrDashboard.btnRegistrarGuias.setOnClickListener(v ->\r\n                startActivity(new Intent(this, Superadmin_Registrar_Guias_Turismo.class)));\r\n\r\n        // Imágenes Dashboard\r\n        Glide.with(this).load(\"https://cdn-icons-png.flaticon.com/512/190/190411.png\")\r\n                .into(binding.scrDashboard.imgRegistrarAdmin);\r\n        Glide.with(this).load(\"https://cdn-icons-png.flaticon.com/512/2922/2922510.png\")\r\n                .into(binding.scrDashboard.imgRegistrarGuias);\r\n        Glide.with(this).load(\"https://cdn-icons-png.flaticon.com/512/29/29302.png\")\r\n                .into(binding.scrDashboard.imgDescargarCSV);\r\n        Glide.with(this).load(\"https://cdn-icons-png.flaticon.com/512/337/337946.png\")\r\n                .into(binding.scrDashboard.imgDescargarPDF);\r\n\r\n        // Cargar datos del usuario logueado (desde Auth/Firestore)\r\n        loadLoggedUser();\r\n\r\n        // Mantengo tu lógica de listas/gráficos:\r\n        createRetrofitService();\r\n        cargarListaWebService();\r\n    }\r\n\r\n    // ==== CARGAR USUARIO LOGUEADO (desde Firestore) ====\r\n    private void loadLoggedUser() {\r\n        if (auth.getCurrentUser() == null) {\r\n            Toast.makeText(this, \"Sesión expirada. Inicia sesión nuevamente.\", Toast.LENGTH_LONG).show();\r\n            finish();\r\n            return;\r\n        }\r\n        String uid = auth.getCurrentUser().getUid();\r\n        db.collection(\"users\").document(uid).get()\r\n                .addOnSuccessListener(this::bindUserToUI)\r\n                .addOnFailureListener(e -> {\r\n                    Log.e(\"superadmin\", \"No se pudo leer el perfil: \" + e.getMessage());\r\n                    Toast.makeText(this, \"No se pudo cargar tu perfil.\", Toast.LENGTH_LONG).show();\r\n                });\r\n    }\r\n\r\n    private void bindUserToUI(DocumentSnapshot snap) {\r\n        if (!snap.exists()) return;\r\n        String displayName = safe(snap.getString(\"displayName\"), \"Superadmin\");\r\n        String email       = safe(snap.getString(\"email\"), \"\");\r\n        String role        = safe(snap.getString(\"role\"), \"superadmin\");\r\n        String dni         = safe(snap.getString(\"dni\"), \"\");\r\n        String photoUrl    = safe(snap.getString(\"photoUrl\"),\r\n                \"https://i.pravatar.cc/200?img=3\"); // fallback\r\n\r\n        // Toolbar\r\n        binding.toolbar.setTitle(\"Hola, \" + displayName);\r\n\r\n        // ====== Perfil (si existen los IDs, se llenan; si no, no pasa nada) ======\r\n        TextView tvNombre = binding.getRoot().findViewById(R.id.tvNombrePerfil);\r\n        TextView tvCorreo = binding.getRoot().findViewById(R.id.tvCorreoPerfil);\r\n        TextView tvRol    = binding.getRoot().findViewById(R.id.tvRolPerfil);\r\n        TextView tvDni    = binding.getRoot().findViewById(R.id.tvDniPerfil);\r\n        ImageView imgFoto = binding.getRoot().findViewById(R.id.imgFotoPerfil);\r\n\r\n        if (tvNombre != null) tvNombre.setText(displayName);\r\n        if (tvCorreo != null) tvCorreo.setText(email);\r\n        if (tvRol    != null) tvRol.setText(role);\r\n        if (tvDni    != null) tvDni.setText(dni);\r\n        if (imgFoto  != null) Glide.with(this).load(photoUrl).into(imgFoto);\r\n    }\r\n\r\n    private String safe(String s, String def) { return (s == null || s.trim().isEmpty()) ? def : s; }\r\n\r\n    // ==== Navegación bottom ====\r\n    private boolean onBottomItemSelected(MenuItem item) {\r\n        int id = item.getItemId();\r\n        if (id == R.id.nav_dashboard) { showScreen(SCR_DASHBOARD); return true; }\r\n        else if (id == R.id.nav_admins) { showScreen(SCR_ADMINS); return true; }\r\n        else if (id == R.id.nav_guias) { showScreen(SCR_GUIAS); return true; }\r\n        else if (id == R.id.nav_clientes) { showScreen(SCR_CLIENTES); return true; }\r\n        else if (id == R.id.nav_registros) { showScreen(SCR_REGISTROS); return true; }\r\n        else if (id == R.id.nav_perfil) { showScreen(SCR_PERFIL); return true; }\r\n        return false;\r\n    }\r\n\r\n    private void showScreen(@IdRes int screenId) {\r\n        View vDash     = binding.scrDashboard.getRoot();\r\n        View vAdmins   = binding.scrAdmins.getRoot();\r\n        View vGuias    = binding.scrGuias.getRoot();\r\n        View vClientes = binding.scrClientes.getRoot();\r\n        View vReg      = binding.scrRegistros.getRoot();\r\n        View vPerfil   = binding.scrPerfil.getRoot();\r\n\r\n        vDash.setVisibility(View.GONE);\r\n        vAdmins.setVisibility(View.GONE);\r\n        vGuias.setVisibility(View.GONE);\r\n        vClientes.setVisibility(View.GONE);\r\n        vReg.setVisibility(View.GONE);\r\n        vPerfil.setVisibility(View.GONE);\r\n\r\n        View target =\r\n                (screenId == SCR_DASHBOARD) ? vDash :\r\n                        (screenId == SCR_ADMINS)    ? vAdmins :\r\n                                (screenId == SCR_GUIAS)     ? vGuias :\r\n                                        (screenId == SCR_CLIENTES)  ? vClientes :\r\n                                                (screenId == SCR_REGISTROS) ? vReg : vPerfil;\r\n        target.setVisibility(View.VISIBLE);\r\n\r\n        // FAB contextual\r\n        if (screenId == SCR_ADMINS) {\r\n            binding.fab.setVisibility(View.VISIBLE);\r\n            binding.fab.setImageResource(R.drawable.ic_person_add_24);\r\n            binding.fab.setBackgroundTintList(\r\n                    ContextCompat.getColorStateList(this, R.color.teal_700));\r\n            binding.fab.setImageTintList(\r\n                    ColorStateList.valueOf(ContextCompat.getColor(this, R.color.white)));\r\n            binding.fab.setOnClickListener(v ->\r\n                    startActivity(new Intent(this, Superadmin_Registrar_Administrador.class)));\r\n        } else if (screenId == SCR_GUIAS) {\r\n            binding.fab.setVisibility(View.VISIBLE);\r\n            binding.fab.setImageResource(R.drawable.ic_person_add_24);\r\n            binding.fab.setOnClickListener(v ->\r\n                    startActivity(new Intent(this, Superadmin_Registrar_Guias_Turismo.class)));\r\n        } else if (screenId == SCR_CLIENTES) {\r\n            binding.fab.setVisibility(View.VISIBLE);\r\n            binding.fab.setImageResource(R.drawable.ic_person_add_24);\r\n            binding.fab.setOnClickListener(v ->\r\n                    startActivity(new Intent(this, Superadmin_Ver_Cliente.class)));\r\n        } else {\r\n            binding.fab.setVisibility(View.GONE);\r\n            binding.fab.setOnClickListener(null);\r\n        }\r\n    }\r\n\r\n    // ================== Retrofit (tu setup) ==================\r\n    public void createRetrofitService() {\r\n        employeeService = new Retrofit.Builder()\r\n                .baseUrl(\"http://10.0.2.2:8080\")\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .build()\r\n                .create(EmployeeService.class);\r\n    }\r\n\r\n    public void cargarListaWebService() {\r\n        // \uD83D\uDD38 Mantengo tu ejemplo de repositorio local. Ajusta a tu implementación real.\r\n        UserRepository repo = UserRepository.get();\r\n        repo.seedIfEmpty(this);\r\n\r\n        List<User> listaAdmins = repo.allAdmins();\r\n        List<User> listaGuias = repo.allGuias();\r\n        List<User> listaClientes = repo.allClientes();\r\n\r\n        configurarGrafico(binding.scrDashboard.chartAdmins, \"Administradores\", listaAdmins);\r\n        configurarGrafico(binding.scrDashboard.chartGuias,  \"Guías\",           listaGuias);\r\n        configurarGrafico(binding.scrDashboard.chartClientes,\"Clientes\",        listaClientes);\r\n\r\n        EmployeeAdapter adapterAdmins = new EmployeeAdapter();\r\n        adapterAdmins.setListaEmpleados(listaAdmins);\r\n        adapterAdmins.setContext(this);\r\n        binding.scrAdmins.recyclerView.setAdapter(adapterAdmins);\r\n        binding.scrAdmins.recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        EmployeeAdapter adapterGuias = new EmployeeAdapter();\r\n        adapterGuias.setListaEmpleados(listaGuias);\r\n        adapterGuias.setContext(this);\r\n        binding.scrGuias.recyclerView.setAdapter(adapterGuias);\r\n        binding.scrGuias.recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        EmployeeAdapter adapterClientes = new EmployeeAdapter();\r\n        adapterClientes.setListaEmpleados(listaClientes);\r\n        adapterClientes.setContext(this);\r\n        binding.scrClientes.recyclerView.setAdapter(adapterClientes);\r\n        binding.scrClientes.recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        Log.d(\"msg-superadmin\", \"Lista cargada desde UserRepository: \" +\r\n                (listaAdmins.size() + listaGuias.size() + listaClientes.size()));\r\n    }\r\n\r\n    private void configurarGrafico(com.github.mikephil.charting.charts.PieChart chart,\r\n                                   String titulo, List<User> lista) {\r\n\r\n        long activos = 0;\r\n        for (User u : lista) if (u.isActivo()) activos++;\r\n        long inactivos = lista.size() - activos;\r\n\r\n        List<PieEntry> entries = new ArrayList<>();\r\n        entries.add(new PieEntry(activos, \"Activos\"));\r\n        entries.add(new PieEntry(inactivos, \"Inactivos\"));\r\n\r\n        PieDataSet dataSet = new PieDataSet(entries, titulo);\r\n        dataSet.setColors(\r\n                ContextCompat.getColor(this, R.color.teal_700),\r\n                ContextCompat.getColor(this, R.color.gray)\r\n        );\r\n\r\n        PieData data = new PieData(dataSet);\r\n        data.setValueTextSize(14f);\r\n        data.setValueTextColor(ContextCompat.getColor(this, R.color.black));\r\n\r\n        chart.setData(data);\r\n        chart.setCenterText(titulo);\r\n        chart.setCenterTextSize(16f);\r\n        chart.getDescription().setEnabled(false);\r\n        chart.getLegend().setEnabled(true);\r\n        chart.animateY(1000);\r\n        chart.invalidate();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_HomeActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_HomeActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_HomeActivity.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_HomeActivity.java	(date 1763329629040)
-@@ -14,6 +14,7 @@
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.core.content.ContextCompat;
- import androidx.recyclerview.widget.LinearLayoutManager;
-+import androidx.recyclerview.widget.RecyclerView;
- 
- import com.bumptech.glide.Glide;
- import com.example.proyecto_2025.R;
-@@ -31,24 +32,15 @@
- import retrofit2.Retrofit;
- import retrofit2.converter.gson.GsonConverterFactory;
- 
--/**
-- * HomeView Superadmin (sin fragments):
-- * Bottom bar fija: Dashboard, Admins, Guías, Clientes, Registros, Perfil
-- * FAB contextual sólo en Admins (Registrar Admin) y Guías (Registrar Guías).
-- * Ahora también: Carga los datos del usuario logueado desde Firestore.
-- */
- public class Superadmin_HomeActivity extends AppCompatActivity {
- 
-     private ActivitySuperadminVistaInicialBinding binding;
- 
--    // Firebase
-     private final FirebaseAuth auth = FirebaseAuth.getInstance();
-     private final FirebaseFirestore db = FirebaseFirestore.getInstance();
- 
--    // Retrofit (dejas tu servicio como lo tengas)
-     private EmployeeService employeeService;
- 
--    // IDs de raíces (coinciden con los android:id de cada <include/>)
-     private static final int SCR_DASHBOARD = R.id.scrDashboard;
-     private static final int SCR_ADMINS    = R.id.scrAdmins;
-     private static final int SCR_GUIAS     = R.id.scrGuias;
-@@ -62,7 +54,6 @@
-         binding = ActivitySuperadminVistaInicialBinding.inflate(getLayoutInflater());
-         setContentView(binding.getRoot());
- 
--        // Si no usarás "Registros" aún:
-         binding.bottomNav.getMenu().findItem(R.id.nav_registros).setVisible(false);
- 
-         setSupportActionBar(binding.toolbar);
-@@ -71,20 +62,16 @@
-             getSupportActionBar().setDisplayShowTitleEnabled(false);
-         }
- 
--        // Navegación inferior
-         binding.bottomNav.setOnItemSelectedListener(this::onBottomItemSelected);
- 
--        // Estado inicial
-         binding.bottomNav.setSelectedItemId(R.id.nav_dashboard);
-         showScreen(SCR_DASHBOARD);
- 
--        // Acciones rápidas Dashboard
-         binding.scrDashboard.btnRegistrarAdmin.setOnClickListener(v ->
-                 startActivity(new Intent(this, Superadmin_Registrar_Administrador.class)));
-         binding.scrDashboard.btnRegistrarGuias.setOnClickListener(v ->
-                 startActivity(new Intent(this, Superadmin_Registrar_Guias_Turismo.class)));
- 
--        // Imágenes Dashboard
-         Glide.with(this).load("https://cdn-icons-png.flaticon.com/512/190/190411.png")
-                 .into(binding.scrDashboard.imgRegistrarAdmin);
-         Glide.with(this).load("https://cdn-icons-png.flaticon.com/512/2922/2922510.png")
-@@ -94,15 +81,12 @@
-         Glide.with(this).load("https://cdn-icons-png.flaticon.com/512/337/337946.png")
-                 .into(binding.scrDashboard.imgDescargarPDF);
- 
--        // Cargar datos del usuario logueado (desde Auth/Firestore)
-         loadLoggedUser();
- 
--        // Mantengo tu lógica de listas/gráficos:
-         createRetrofitService();
-         cargarListaWebService();
-     }
- 
--    // ==== CARGAR USUARIO LOGUEADO (desde Firestore) ====
-     private void loadLoggedUser() {
-         if (auth.getCurrentUser() == null) {
-             Toast.makeText(this, "Sesión expirada. Inicia sesión nuevamente.", Toast.LENGTH_LONG).show();
-@@ -125,12 +109,10 @@
-         String role        = safe(snap.getString("role"), "superadmin");
-         String dni         = safe(snap.getString("dni"), "");
-         String photoUrl    = safe(snap.getString("photoUrl"),
--                "https://i.pravatar.cc/200?img=3"); // fallback
-+                "https://i.pravatar.cc/200?img=3");
- 
--        // Toolbar
-         binding.toolbar.setTitle("Hola, " + displayName);
- 
--        // ====== Perfil (si existen los IDs, se llenan; si no, no pasa nada) ======
-         TextView tvNombre = binding.getRoot().findViewById(R.id.tvNombrePerfil);
-         TextView tvCorreo = binding.getRoot().findViewById(R.id.tvCorreoPerfil);
-         TextView tvRol    = binding.getRoot().findViewById(R.id.tvRolPerfil);
-@@ -144,9 +126,10 @@
-         if (imgFoto  != null) Glide.with(this).load(photoUrl).into(imgFoto);
-     }
- 
--    private String safe(String s, String def) { return (s == null || s.trim().isEmpty()) ? def : s; }
-+    private String safe(String s, String def) {
-+        return (s == null || s.trim().isEmpty()) ? def : s;
-+    }
- 
--    // ==== Navegación bottom ====
-     private boolean onBottomItemSelected(MenuItem item) {
-         int id = item.getItemId();
-         if (id == R.id.nav_dashboard) { showScreen(SCR_DASHBOARD); return true; }
-@@ -181,7 +164,6 @@
-                                                 (screenId == SCR_REGISTROS) ? vReg : vPerfil;
-         target.setVisibility(View.VISIBLE);
- 
--        // FAB contextual
-         if (screenId == SCR_ADMINS) {
-             binding.fab.setVisibility(View.VISIBLE);
-             binding.fab.setImageResource(R.drawable.ic_person_add_24);
-@@ -207,7 +189,6 @@
-         }
-     }
- 
--    // ================== Retrofit (tu setup) ==================
-     public void createRetrofitService() {
-         employeeService = new Retrofit.Builder()
-                 .baseUrl("http://10.0.2.2:8080")
-@@ -217,35 +198,45 @@
-     }
- 
-     public void cargarListaWebService() {
--        // 🔸 Mantengo tu ejemplo de repositorio local. Ajusta a tu implementación real.
-         UserRepository repo = UserRepository.get();
-         repo.seedIfEmpty(this);
- 
--        List<User> listaAdmins = repo.allAdmins();
--        List<User> listaGuias = repo.allGuias();
-+        List<User> listaAdmins   = repo.allAdmins();
-+        List<User> listaGuias    = repo.allGuias();
-         List<User> listaClientes = repo.allClientes();
- 
--        configurarGrafico(binding.scrDashboard.chartAdmins, "Administradores", listaAdmins);
--        configurarGrafico(binding.scrDashboard.chartGuias,  "Guías",           listaGuias);
-+        configurarGrafico(binding.scrDashboard.chartAdmins,  "Administradores", listaAdmins);
-+        configurarGrafico(binding.scrDashboard.chartGuias,   "Guías",           listaGuias);
-         configurarGrafico(binding.scrDashboard.chartClientes,"Clientes",        listaClientes);
- 
-+        // ⬇⬇⬇ AQUÍ EL CAMBIO IMPORTANTE: usamos findViewById dentro de cada include
-+
-+        // ADMINS
-+        RecyclerView rvAdmins = binding.scrAdmins.getRoot()
-+                .findViewById(R.id.recyclerView);  // usa el id real de tu RecyclerView en screen_superadmin_admins.xml
-         EmployeeAdapter adapterAdmins = new EmployeeAdapter();
-         adapterAdmins.setListaEmpleados(listaAdmins);
-         adapterAdmins.setContext(this);
--        binding.scrAdmins.recyclerView.setAdapter(adapterAdmins);
--        binding.scrAdmins.recyclerView.setLayoutManager(new LinearLayoutManager(this));
-+        rvAdmins.setAdapter(adapterAdmins);
-+        rvAdmins.setLayoutManager(new LinearLayoutManager(this));
- 
-+        // GUÍAS
-+        RecyclerView rvGuias = binding.scrGuias.getRoot()
-+                .findViewById(R.id.recyclerView);  // id del RecyclerView en screen_superadmin_guias.xml
-         EmployeeAdapter adapterGuias = new EmployeeAdapter();
-         adapterGuias.setListaEmpleados(listaGuias);
-         adapterGuias.setContext(this);
--        binding.scrGuias.recyclerView.setAdapter(adapterGuias);
--        binding.scrGuias.recyclerView.setLayoutManager(new LinearLayoutManager(this));
-+        rvGuias.setAdapter(adapterGuias);
-+        rvGuias.setLayoutManager(new LinearLayoutManager(this));
- 
-+        // CLIENTES
-+        RecyclerView rvClientes = binding.scrClientes.getRoot()
-+                .findViewById(R.id.recyclerView);  // id del RecyclerView en screen_superadmin_clientes.xml
-         EmployeeAdapter adapterClientes = new EmployeeAdapter();
-         adapterClientes.setListaEmpleados(listaClientes);
-         adapterClientes.setContext(this);
--        binding.scrClientes.recyclerView.setAdapter(adapterClientes);
--        binding.scrClientes.recyclerView.setLayoutManager(new LinearLayoutManager(this));
-+        rvClientes.setAdapter(adapterClientes);
-+        rvClientes.setLayoutManager(new LinearLayoutManager(this));
- 
-         Log.d("msg-superadmin", "Lista cargada desde UserRepository: " +
-                 (listaAdmins.size() + listaGuias.size() + listaClientes.size()));
-Index: app/src/main/java/com/example/proyecto_2025/data/GuideRepository.java
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/data/GuideRepository.java b/app/src/main/java/com/example/proyecto_2025/data/GuideRepository.java
-deleted file mode 100644
---- a/app/src/main/java/com/example/proyecto_2025/data/GuideRepository.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,45 +0,0 @@
--package com.example.proyecto_2025.data;
--
--import android.content.Context;
--import com.example.proyecto_2025.model.Guide;
--import java.util.*;
--
--public class GuideRepository {
--    private static GuideRepository instance;
--    private final List<Guide> guides = new ArrayList<>();
--
--    private GuideRepository(){}
--
--    public static GuideRepository get(){
--        if (instance == null) instance = new GuideRepository();
--        return instance;
--    }
--
--    /** Carga data de demo si no hay guías aún */
--    public void seedIfEmpty(Context ctx){
--        if (!guides.isEmpty()) return;
--        guides.add(new Guide("g1","María Quispe",
--                Arrays.asList(Guide.Language.ES, Guide.Language.EN),
--                "https://picsum.photos/seed/guide1/400",
--                "Guía certificada con 5 años en Cusco y Valle Sagrado.",4.8f,"Cusco"));
--        guides.add(new Guide("g2","José Huamán",
--                Arrays.asList(Guide.Language.ES, Guide.Language.FR),
--                "https://picsum.photos/seed/guide2/400",
--                "Especialista en turismo vivencial y trekking.",4.6f,"Valle Sagrado"));
--        guides.add(new Guide("g3","Ana Poma",
--                Arrays.asList(Guide.Language.ES, Guide.Language.EN, Guide.Language.DE),
--                "https://picsum.photos/seed/guide3/400",
--                "Arqueóloga y guía con enfoque histórico.",4.9f,"Machu Picchu"));
--        guides.add(new Guide("g4","Luis Ccapa",
--                Arrays.asList(Guide.Language.ES, Guide.Language.PT),
--                "https://picsum.photos/seed/guide4/400",
--                "Conductor-guía para tours full day.",4.5f,"Montaña de 7 Colores"));
--        guides.add(new Guide("g5","Rosa Ñusta",
--                Arrays.asList(Guide.Language.ES, Guide.Language.EN),
--                "https://picsum.photos/seed/guide5/400",
--                "Experta en gastronomía y cultura local.",4.7f,"Cusco Centro"));
--    }
--
--    public List<Guide> all(){ return new ArrayList<>(guides); }
--    public Guide byId(String id){ for (Guide g: guides) if (g.getId().equals(id)) return g; return null; }
--}
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10_[Changes]/shelved.patch	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,1395 +0,0 @@
--Index: app/src/main/java/com/example/proyecto_2025/login/ExitoClienteActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class ExitoClienteActivity extends AppCompatActivity {\r\n\r\n    private Button btnIrInicio;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_exito_cliente_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnIrInicio = findViewById(R.id.btn_ir_inicio);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnIrInicio.setOnClickListener(v -> {\r\n            // Volver al login o ir a pantalla principal\r\n            finish();\r\n        });\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/ExitoClienteActivity.java b/app/src/main/java/com/example/proyecto_2025/login/ExitoClienteActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/ExitoClienteActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/ExitoClienteActivity.java	(date 1762104287178)
--@@ -1,9 +1,13 @@
-- package com.example.proyecto_2025.login;
-- 
--+import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Button;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
--+import com.google.firebase.auth.FirebaseAuth;
-- 
-- public class ExitoClienteActivity extends AppCompatActivity {
-- 
--@@ -12,19 +16,17 @@
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_exito_cliente_joaco);
--+        setContentView(R.layout.activity_exito_cliente);
-- 
---        initViews();
---        setupListeners();
---    }
---
---    private void initViews() {
--         btnIrInicio = findViewById(R.id.btn_ir_inicio);
---    }
-- 
---    private void setupListeners() {
--         btnIrInicio.setOnClickListener(v -> {
---            // Volver al login o ir a pantalla principal
--+            // por si el usuario quedó logueado tras el registro
--+            FirebaseAuth.getInstance().signOut();
--+
--+            Intent i = new Intent(this, LoginActivity.class);
--+            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
--+            startActivity(i);
--             finish();
--         });
--     }
--Index: app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.data.auth;\r\n\r\nimport com.google.firebase.auth.*;\r\nimport com.google.firebase.firestore.*;\r\nimport java.util.*;\r\nimport static com.google.firebase.firestore.FieldValue.serverTimestamp;\r\n\r\npublic class AuthRepository {\r\n    private final FirebaseAuth auth = FirebaseAuth.getInstance();\r\n    private final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    public interface Callback<T> { void onSuccess(T t); void onError(Exception e); }\r\n\r\n    // LOGIN\r\n    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {\r\n        auth.signInWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r ->\r\n                        db.collection(\"users\").document(r.getUser().getUid()).get()\r\n                                .addOnSuccessListener(snap -> {\r\n                                    if (!snap.exists()) { cb.onError(new Exception(\"Perfil no encontrado.\")); return; }\r\n                                    String status = snap.getString(\"status\");\r\n                                    if (!\"active\".equals(status)) { cb.onError(new Exception(\"Usuario deshabilitado.\")); return; }\r\n                                    cb.onSuccess(snap);\r\n                                })\r\n                                .addOnFailureListener(cb::onError)\r\n                )\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    public void signUp(String name, String email, String pass, String role, Callback<Void> cb) {\r\n        auth.createUserWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r -> {\r\n                    String uid = r.getUser().getUid();\r\n                    Map<String,Object> m = new HashMap<>();\r\n                    m.put(\"uid\", uid);\r\n                    m.put(\"email\", email);\r\n                    m.put(\"displayName\", name);\r\n                    m.put(\"role\", role.toLowerCase());\r\n                    m.put(\"status\", \"active\");\r\n                    m.put(\"companyId\", null);\r\n                    m.put(\"createdAt\", serverTimestamp());\r\n                    m.put(\"updatedAt\", serverTimestamp());\r\n                    db.collection(\"users\").document(uid).set(m)\r\n                            .addOnSuccessListener(v -> cb.onSuccess(null))\r\n                            .addOnFailureListener(cb::onError);\r\n                })\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    // Buscar usuario por email (para promoción)\r\n    public void findUserByEmail(String email, Callback<QuerySnapshot> cb){\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"email\", email).limit(1)\r\n                .get()\r\n                .addOnSuccessListener(cb::onSuccess)\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    // Promover a admin (cambia role + companyId)\r\n    public void promoteToAdmin(String uid, String companyId, Callback<Void> cb){\r\n        Map<String,Object> m = new HashMap<>();\r\n        m.put(\"role\",\"admin\");\r\n        m.put(\"companyId\", companyId);\r\n        m.put(\"updatedAt\", FieldValue.serverTimestamp());\r\n        db.collection(\"users\").document(uid).update(m)\r\n                .addOnSuccessListener(v -> cb.onSuccess(null))\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    // (Opcional) Crear admin desde cero (Auth + Firestore)\r\n    public void createAdminFromScratch(String name, String email, String pass, String companyId, Callback<Void> cb){\r\n        auth.createUserWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r -> {\r\n                    String uid = r.getUser().getUid();\r\n                    Map<String,Object> u = new HashMap<>();\r\n                    u.put(\"uid\", uid);\r\n                    u.put(\"email\", email);\r\n                    u.put(\"displayName\", name);\r\n                    u.put(\"role\", \"admin\");\r\n                    u.put(\"status\", \"active\");\r\n                    u.put(\"companyId\", companyId);\r\n                    u.put(\"createdAt\", FieldValue.serverTimestamp());\r\n                    u.put(\"updatedAt\", FieldValue.serverTimestamp());\r\n                    db.collection(\"users\").document(uid).set(u)\r\n                            .addOnSuccessListener(x -> cb.onSuccess(null))\r\n                            .addOnFailureListener(cb::onError);\r\n                })\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    public void logout(){ auth.signOut(); }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java b/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java
----- a/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java	(date 1762146378781)
--@@ -1,86 +1,80 @@
-- package com.example.proyecto_2025.data.auth;
-- 
---import com.google.firebase.auth.*;
---import com.google.firebase.firestore.*;
---import java.util.*;
---import static com.google.firebase.firestore.FieldValue.serverTimestamp;
--+import com.google.firebase.auth.AuthResult;
--+import com.google.firebase.auth.FirebaseAuth;
--+import com.google.firebase.auth.FirebaseUser;
--+import com.google.firebase.firestore.FieldValue;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+import com.google.firebase.firestore.DocumentSnapshot;
--+
--+import java.util.HashMap;
--+import java.util.Map;
--+import java.util.Random;
-- 
-- public class AuthRepository {
--+
--     private final FirebaseAuth auth = FirebaseAuth.getInstance();
--     private final FirebaseFirestore db = FirebaseFirestore.getInstance();
-- 
---    public interface Callback<T> { void onSuccess(T t); void onError(Exception e); }
---
---    // LOGIN
---    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {
---        auth.signInWithEmailAndPassword(email, pass)
---                .addOnSuccessListener(r ->
---                        db.collection("users").document(r.getUser().getUid()).get()
---                                .addOnSuccessListener(snap -> {
---                                    if (!snap.exists()) { cb.onError(new Exception("Perfil no encontrado.")); return; }
---                                    String status = snap.getString("status");
---                                    if (!"active".equals(status)) { cb.onError(new Exception("Usuario deshabilitado.")); return; }
---                                    cb.onSuccess(snap);
---                                })
---                                .addOnFailureListener(cb::onError)
---                )
---                .addOnFailureListener(cb::onError);
---    }
---
---    public void signUp(String name, String email, String pass, String role, Callback<Void> cb) {
---        auth.createUserWithEmailAndPassword(email, pass)
---                .addOnSuccessListener(r -> {
---                    String uid = r.getUser().getUid();
---                    Map<String,Object> m = new HashMap<>();
---                    m.put("uid", uid);
---                    m.put("email", email);
---                    m.put("displayName", name);
---                    m.put("role", role.toLowerCase());
---                    m.put("status", "active");
---                    m.put("companyId", null);
---                    m.put("createdAt", serverTimestamp());
---                    m.put("updatedAt", serverTimestamp());
---                    db.collection("users").document(uid).set(m)
---                            .addOnSuccessListener(v -> cb.onSuccess(null))
---                            .addOnFailureListener(cb::onError);
---                })
---                .addOnFailureListener(cb::onError);
--+    public interface Callback<T> {
--+        void onSuccess(T t);
--+        void onError(Exception e);
--     }
-- 
---    // Buscar usuario por email (para promoción)
---    public void findUserByEmail(String email, Callback<QuerySnapshot> cb){
---        db.collection("users")
---                .whereEqualTo("email", email).limit(1)
---                .get()
---                .addOnSuccessListener(cb::onSuccess)
---                .addOnFailureListener(cb::onError);
--+    // 🔸 si luego quieres volver al código, ya tienes este generador
--+    private String genCode() {
--+        int n = new Random().nextInt(900000) + 100000; // 100000..999999
--+        return String.valueOf(n);
--     }
-- 
---    // Promover a admin (cambia role + companyId)
---    public void promoteToAdmin(String uid, String companyId, Callback<Void> cb){
---        Map<String,Object> m = new HashMap<>();
---        m.put("role","admin");
---        m.put("companyId", companyId);
---        m.put("updatedAt", FieldValue.serverTimestamp());
---        db.collection("users").document(uid).update(m)
---                .addOnSuccessListener(v -> cb.onSuccess(null))
---                .addOnFailureListener(cb::onError);
---    }
--+    /**
--+     * REGISTRO de cliente/guia
--+     * Versión SIMPLE: crea el usuario en Auth y en Firestore, y queda listo para loguear.
--+     * - cliente: status=active
--+     * - guia:    status=pending (hasta que lo apruebe un admin/superadmin)
--+     */
--+    public void signUp(String name,
--+                       String email,
--+                       String pass,
--+                       String role,
--+                       Callback<Void> cb) {
-- 
---    // (Opcional) Crear admin desde cero (Auth + Firestore)
---    public void createAdminFromScratch(String name, String email, String pass, String companyId, Callback<Void> cb){
--         auth.createUserWithEmailAndPassword(email, pass)
---                .addOnSuccessListener(r -> {
---                    String uid = r.getUser().getUid();
---                    Map<String,Object> u = new HashMap<>();
--+                .addOnSuccessListener((AuthResult r) -> {
--+                    FirebaseUser fUser = r.getUser();
--+                    if (fUser == null) {
--+                        cb.onError(new Exception("No se pudo crear el usuario."));
--+                        return;
--+                    }
--+                    String uid = fUser.getUid();
--+
--+                    // status según rol
--+                    String status = "active";
--+                    if ("guia".equalsIgnoreCase(role)) {
--+                        status = "pending";
--+                    }
--+
--+                    Map<String, Object> u = new HashMap<>();
--                     u.put("uid", uid);
---                    u.put("email", email);
--                     u.put("displayName", name);
---                    u.put("role", "admin");
---                    u.put("status", "active");
---                    u.put("companyId", companyId);
--+                    u.put("email", email);
--+                    u.put("role", role.toLowerCase());
--+                    u.put("status", status);
--+                    u.put("dni", null);
--+                    u.put("phone", null);
--+                    u.put("photoUrl", "https://example.com/default-user.png");
--+                    u.put("companyId", null);
--                     u.put("createdAt", FieldValue.serverTimestamp());
--                     u.put("updatedAt", FieldValue.serverTimestamp());
--+
--+                    // 🔻🔻🔻 FLUJO REAL CON CÓDIGO / EMAIL (COMENTADO)
--+                    // String code = genCode();
--+                    // u.put("emailVerified", false);
--+                    // u.put("verificationCode", code);
--+                    // u.put("verificationRequired", true);
--+                    // fUser.sendEmailVerification(); // correo de Firebase (link)
--+                    // 🔺🔺🔺
--+
--                     db.collection("users").document(uid).set(u)
--                             .addOnSuccessListener(x -> cb.onSuccess(null))
--                             .addOnFailureListener(cb::onError);
--@@ -88,5 +82,30 @@
--                 .addOnFailureListener(cb::onError);
--     }
-- 
---    public void logout(){ auth.signOut(); }
--+    /**
--+     * LOGIN → devuelve el doc de Firestore del usuario
--+     */
--+    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {
--+        auth.signInWithEmailAndPassword(email, pass)
--+                .addOnSuccessListener((AuthResult r) -> {
--+                    FirebaseUser fUser = auth.getCurrentUser();
--+                    if (fUser == null) {
--+                        cb.onError(new Exception("No se encontró el usuario."));
--+                        return;
--+                    }
--+                    String uid = fUser.getUid();
--+                    db.collection("users").document(uid).get()
--+                            .addOnSuccessListener(cb::onSuccess)
--+                            .addOnFailureListener(cb::onError);
--+                })
--+                .addOnFailureListener(cb::onError);
--+    }
--+
--+    public FirebaseUser getCurrentUser() {
--+        return auth.getCurrentUser();
--+    }
--+
--+    public void signOut() {
--+        auth.signOut();
--+    }
-- }
--Index: app/src/main/java/com/example/proyecto_2025/login/PendienteGuiaActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class PendienteGuiaActivity extends AppCompatActivity {\r\n\r\n    private Button btnCerrarSesion;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_pendiente_guia_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnCerrarSesion = findViewById(R.id.btn_cerrar_sesion);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnCerrarSesion.setOnClickListener(v -> {\r\n            finish();\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/PendienteGuiaActivity.java b/app/src/main/java/com/example/proyecto_2025/login/PendienteGuiaActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/PendienteGuiaActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/PendienteGuiaActivity.java	(date 1762105004305)
--@@ -1,9 +1,13 @@
-- package com.example.proyecto_2025.login;
-- 
--+import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Button;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
--+import com.google.firebase.auth.FirebaseAuth;
-- 
-- public class PendienteGuiaActivity extends AppCompatActivity {
-- 
--@@ -12,19 +16,18 @@
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_pendiente_guia_joaco);
--+        setContentView(R.layout.activity_pendiente_guia);
-- 
---        initViews();
---        setupListeners();
---    }
---
---    private void initViews() {
--         btnCerrarSesion = findViewById(R.id.btn_cerrar_sesion);
---    }
-- 
---    private void setupListeners() {
--         btnCerrarSesion.setOnClickListener(v -> {
--+            // 1. cerrar sesión
--+            FirebaseAuth.getInstance().signOut();
--+            // 2. ir al login y limpiar activities
--+            Intent i = new Intent(PendienteGuiaActivity.this, LoginActivity.class);
--+            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
--+            startActivity(i);
--             finish();
--         });
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/proyecto_2025/login/RecuperarPasswordActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class RecuperarPasswordActivity extends AppCompatActivity {\r\n\r\n    private Button btnContinuar;\r\n    private ImageButton btnVolver;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_recuperar_password_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnContinuar = findViewById(R.id.btn_continuar);\r\n        btnVolver = findViewById(R.id.btn_volver);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnVolver.setOnClickListener(v -> {\r\n            finish(); // Volver al login\r\n        });\r\n\r\n        btnContinuar.setOnClickListener(v -> {\r\n            Intent intent = new Intent(this, ConfirmarEmailActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/RecuperarPasswordActivity.java b/app/src/main/java/com/example/proyecto_2025/login/RecuperarPasswordActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/RecuperarPasswordActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/RecuperarPasswordActivity.java	(date 1762110595403)
--@@ -4,36 +4,63 @@
-- import android.os.Bundle;
-- import android.widget.Button;
-- import android.widget.ImageButton;
--+import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
--+import com.google.android.material.textfield.TextInputEditText;
--+import com.google.firebase.auth.FirebaseAuth;
-- 
-- public class RecuperarPasswordActivity extends AppCompatActivity {
-- 
--     private Button btnContinuar;
--     private ImageButton btnVolver;
--+    private TextInputEditText etCorreo;
--+
--+    private FirebaseAuth auth;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_recuperar_password_joaco);
-- 
--+        auth = FirebaseAuth.getInstance();
--         initViews();
--         setupListeners();
--     }
-- 
--     private void initViews() {
--         btnContinuar = findViewById(R.id.btn_continuar);
---        btnVolver = findViewById(R.id.btn_volver);
--+        btnVolver    = findViewById(R.id.btn_volver);
--+        etCorreo     = findViewById(R.id.et_correo);
--     }
-- 
--     private void setupListeners() {
---        btnVolver.setOnClickListener(v -> {
---            finish(); // Volver al login
---        });
--+        btnVolver.setOnClickListener(v -> finish()); // volver al login
-- 
--         btnContinuar.setOnClickListener(v -> {
---            Intent intent = new Intent(this, ConfirmarEmailActivity.class);
---            startActivity(intent);
--+            String email = etCorreo.getText() == null ? "" : etCorreo.getText().toString().trim();
--+
--+            if (email.isEmpty()) {
--+                Toast.makeText(this, "Ingresa tu correo electrónico.", Toast.LENGTH_LONG).show();
--+                return;
--+            }
--+
--+            // enviar correo de recuperación real
--+            auth.sendPasswordResetEmail(email)
--+                    .addOnSuccessListener(unused -> {
--+                        Toast.makeText(this, "Te enviamos un correo para restablecer tu contraseña.", Toast.LENGTH_LONG).show();
--+
--+                        // volver al login limpio
--+                        Intent intent = new Intent(this, LoginActivity.class);
--+                        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
--+                        startActivity(intent);
--+                        finish();
--+                    })
--+                    .addOnFailureListener(e -> {
--+                        Toast.makeText(this, "Error: " + e.getMessage(), Toast.LENGTH_LONG).show();
--+                    });
--         });
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/proyecto_2025/login/ConfirmarEmailActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class ConfirmarEmailActivity extends AppCompatActivity {\r\n\r\n    private Button btnContinuar;\r\n    private Button btnReenviar;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_confirmar_email_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnContinuar = findViewById(R.id.btn_continuar);\r\n        btnReenviar = findViewById(R.id.btn_reenviar);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnContinuar.setOnClickListener(v -> {\r\n            Intent intent = new Intent(this, CodigoConfirmacionActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        btnReenviar.setOnClickListener(v -> {\r\n            // Simular reenvío de código\r\n            android.widget.Toast.makeText(this, \"Código reenviado\", android.widget.Toast.LENGTH_SHORT).show();\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/ConfirmarEmailActivity.java b/app/src/main/java/com/example/proyecto_2025/login/ConfirmarEmailActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/ConfirmarEmailActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/ConfirmarEmailActivity.java	(date 1762013485612)
--@@ -3,37 +3,110 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Button;
--+import android.widget.TextView;
--+import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
--+import com.google.firebase.auth.FirebaseAuth;
--+import com.google.firebase.auth.FirebaseUser;
--+import com.google.firebase.firestore.FieldValue;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+
--+import java.util.HashMap;
--+import java.util.Map;
--+import java.util.Random;
-- 
-- public class ConfirmarEmailActivity extends AppCompatActivity {
-- 
--     private Button btnContinuar;
--     private Button btnReenviar;
--+    private TextView txtEmailUsuario;
--+
--+    private FirebaseAuth auth;
--+    private FirebaseFirestore db;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_confirmar_email_joaco);
--+        setContentView(R.layout.activity_confirmar_email);
--+
--+        auth = FirebaseAuth.getInstance();
--+        db   = FirebaseFirestore.getInstance();
-- 
--         initViews();
--+        fillEmail();
--         setupListeners();
--     }
-- 
--     private void initViews() {
---        btnContinuar = findViewById(R.id.btn_continuar);
---        btnReenviar = findViewById(R.id.btn_reenviar);
--+        btnContinuar    = findViewById(R.id.btn_continuar);
--+        btnReenviar     = findViewById(R.id.btn_reenviar);
--+        txtEmailUsuario = findViewById(R.id.txt_email_usuario);
--+    }
--+
--+    private void fillEmail() {
--+        // 1) si vino por intent, úsalo
--+        String email = getIntent().getStringExtra("email");
--+
--+        // 2) si no vino, usa el del usuario logueado
--+        if (email == null) {
--+            FirebaseUser u = auth.getCurrentUser();
--+            if (u != null) {
--+                email = u.getEmail();
--+            }
--+        }
--+
--+        if (email != null) {
--+            txtEmailUsuario.setText(email);
--+        }
--     }
-- 
--     private void setupListeners() {
--         btnContinuar.setOnClickListener(v -> {
--+            // pasamos el email para mostrarlo en la pantalla de 4 dígitos
--+            String email = txtEmailUsuario.getText().toString();
--             Intent intent = new Intent(this, CodigoConfirmacionActivity.class);
--+            intent.putExtra("email", email);
--             startActivity(intent);
--         });
-- 
---        btnReenviar.setOnClickListener(v -> {
---            // Simular reenvío de código
---            android.widget.Toast.makeText(this, "Código reenviado", android.widget.Toast.LENGTH_SHORT).show();
---        });
--+        btnReenviar.setOnClickListener(v -> reenviarCodigo());
--     }
---}
--\ No newline at end of file
--+
--+    private void reenviarCodigo() {
--+        FirebaseUser u = auth.getCurrentUser();
--+        if (u == null) {
--+            Toast.makeText(this, "Vuelve a iniciar sesión para reenviar.", Toast.LENGTH_LONG).show();
--+            return;
--+        }
--+
--+        String uid = u.getUid();
--+
--+        // 1. generar nuevo código (4 dígitos)
--+        String newCode = gen4Code();
--+
--+        // 2. actualizar en Firestore
--+        Map<String, Object> updates = new HashMap<>();
--+        updates.put("verificationCode", newCode);
--+        updates.put("verificationRequired", true);
--+        updates.put("updatedAt", FieldValue.serverTimestamp());
--+
--+        db.collection("users").document(uid).update(updates)
--+                .addOnSuccessListener(x -> {
--+                    // 3. enviar correo de verificación de Firebase (el link)
--+                    u.sendEmailVerification();
--+
--+                    Toast.makeText(this, "Te reenviamos el código al correo.", Toast.LENGTH_LONG).show();
--+                })
--+                .addOnFailureListener(e ->
--+                        Toast.makeText(this, "Error al reenviar: " + e.getMessage(), Toast.LENGTH_LONG).show()
--+                );
--+    }
--+
--+    private String gen4Code() {
--+        int n = new Random().nextInt(9000) + 1000; // 1000..9999
--+        return String.valueOf(n);
--+    }
--+}
--Index: app/src/main/java/com/example/proyecto_2025/login/CrearPasswordActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class CrearPasswordActivity extends AppCompatActivity {\r\n\r\n    private Button btnConfirmar;\r\n    private ImageButton btnVolver;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_crear_password_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnConfirmar = findViewById(R.id.btn_confirmar);\r\n        btnVolver = findViewById(R.id.btn_volver);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnVolver.setOnClickListener(v -> {\r\n            finish(); // Volver a la pantalla anterior\r\n        });\r\n\r\n        btnConfirmar.setOnClickListener(v -> {\r\n            // Mostrar mensaje de éxito y volver al login\r\n            Toast.makeText(this, \"Contraseña actualizada correctamente\", Toast.LENGTH_LONG).show();\r\n\r\n            // Navegar al login y limpiar stack de activities\r\n            Intent intent = new Intent(this, LoginActivity.class);\r\n            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/CrearPasswordActivity.java b/app/src/main/java/com/example/proyecto_2025/login/CrearPasswordActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/CrearPasswordActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/CrearPasswordActivity.java	(date 1762103618595)
--@@ -5,41 +5,101 @@
-- import android.widget.Button;
-- import android.widget.ImageButton;
-- import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
--+import com.google.android.material.textfield.TextInputEditText;
--+import com.google.firebase.auth.FirebaseAuth;
--+import com.google.firebase.auth.FirebaseUser;
--+import com.google.firebase.firestore.FieldValue;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+
--+import java.util.HashMap;
--+import java.util.Map;
-- 
-- public class CrearPasswordActivity extends AppCompatActivity {
-- 
--     private Button btnConfirmar;
--     private ImageButton btnVolver;
--+    private TextInputEditText etPassword, etConfirmPassword;
--+
--+    private FirebaseAuth auth;
--+    private FirebaseFirestore db;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_crear_password_joaco);
--+        setContentView(R.layout.activity_crear_password);
--+
--+        auth = FirebaseAuth.getInstance();
--+        db   = FirebaseFirestore.getInstance();
-- 
--         initViews();
--         setupListeners();
--     }
-- 
--     private void initViews() {
---        btnConfirmar = findViewById(R.id.btn_confirmar);
---        btnVolver = findViewById(R.id.btn_volver);
--+        btnConfirmar       = findViewById(R.id.btn_confirmar);
--+        btnVolver          = findViewById(R.id.btn_volver);
--+        etPassword         = findViewById(R.id.et_password);
--+        etConfirmPassword  = findViewById(R.id.et_confirm_password);
--     }
-- 
--     private void setupListeners() {
---        btnVolver.setOnClickListener(v -> {
---            finish(); // Volver a la pantalla anterior
---        });
--+        btnVolver.setOnClickListener(v -> finish());
-- 
--         btnConfirmar.setOnClickListener(v -> {
---            // Mostrar mensaje de éxito y volver al login
---            Toast.makeText(this, "Contraseña actualizada correctamente", Toast.LENGTH_LONG).show();
--+            String pass  = etPassword.getText() == null ? "" : etPassword.getText().toString().trim();
--+            String pass2 = etConfirmPassword.getText() == null ? "" : etConfirmPassword.getText().toString().trim();
--+
--+            if (pass.isEmpty() || pass2.isEmpty()) {
--+                Toast.makeText(this, "Completa ambas contraseñas.", Toast.LENGTH_LONG).show();
--+                return;
--+            }
--+            if (!pass.equals(pass2)) {
--+                Toast.makeText(this, "Las contraseñas no coinciden.", Toast.LENGTH_LONG).show();
--+                return;
--+            }
--+            if (pass.length() < 6) {
--+                Toast.makeText(this, "La contraseña debe tener al menos 6 caracteres.", Toast.LENGTH_LONG).show();
--+                return;
--+            }
--+
--+            FirebaseUser u = auth.getCurrentUser();
--+            if (u == null) {
--+                Toast.makeText(this, "Tu sesión expiró. Vuelve a iniciar sesión.", Toast.LENGTH_LONG).show();
--+                goLogin();
--+                return;
--+            }
--+
--+            // 1) actualizar password en Auth
--+            u.updatePassword(pass)
--+                    .addOnSuccessListener(x -> {
--+                        // 2) actualizar doc en Firestore (opcional, pero útil)
--+                        Map<String, Object> updates = new HashMap<>();
--+                        updates.put("updatedAt", FieldValue.serverTimestamp());
--+                        updates.put("passwordSet", true); // por si quieres saber si ya la cambió
--+
--+                        db.collection("users").document(u.getUid()).update(updates)
--+                                .addOnCompleteListener(t -> {
--+                                    Toast.makeText(this, "Contraseña actualizada correctamente", Toast.LENGTH_LONG).show();
--+                                    // cerrar sesión y mandar al login
--+                                    auth.signOut();
--+                                    goLogin();
--+                                });
--+                    })
--+                    .addOnFailureListener(e -> {
--+                        // puede fallar si requiere re-autenticación
--+                        Toast.makeText(this, "No se pudo actualizar la contraseña: " + e.getMessage(), Toast.LENGTH_LONG).show();
--+                    });
--+        });
--+    }
-- 
---            // Navegar al login y limpiar stack de activities
---            Intent intent = new Intent(this, LoginActivity.class);
---            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
---            startActivity(intent);
---        });
--+    private void goLogin() {
--+        Intent intent = new Intent(this, LoginActivity.class);
--+        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
--+        startActivity(intent);
--+        finish();
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.proyecto_2025.Activities_Administrador.Admin_HomeActivity;\r\nimport com.example.proyecto_2025.Activities_Guia.Guia_HomeActivity;\r\nimport com.example.proyecto_2025.Activities_Superadmin.Superadmin_HomeActivity;\r\nimport com.example.proyecto_2025.Activities_Usuario.Cliente_HomeActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.auth.AuthRepository;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n    private AuthRepository repo;\r\n    private TextInputEditText etCorreo, etPassword;\r\n\r\n    @Override protected void onCreate(Bundle b) {\r\n        super.onCreate(b);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        repo = new AuthRepository();\r\n        etCorreo   = findViewById(R.id.et_correo);\r\n        etPassword = findViewById(R.id.et_password);\r\n\r\n        findViewById(R.id.btn_acceder).setOnClickListener(v -> {\r\n            String email = etCorreo.getText() == null ? \"\" : etCorreo.getText().toString().trim();\r\n            String pass  = etPassword.getText() == null ? \"\" : etPassword.getText().toString();\r\n\r\n            if (email.isEmpty() || pass.isEmpty()) {\r\n                Toast.makeText(this,\"Ingresa correo y contraseña.\",Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            repo.login(email, pass, new AuthRepository.Callback<DocumentSnapshot>() {\r\n                @Override public void onSuccess(DocumentSnapshot snap) {\r\n                    routeByRole(snap.getString(\"role\"));\r\n                }\r\n                @Override public void onError(Exception e) {\r\n                    Toast.makeText(LoginActivity.this, \"Error: \"+e.getMessage(), Toast.LENGTH_LONG).show();\r\n                }\r\n            });\r\n        });\r\n\r\n        // (Opcional) listeners de “olvidaste contraseña” y “registrarse”\r\n        findViewById(R.id.txt_olvidaste_password).setOnClickListener(v -> {\r\n            String email = etCorreo.getText()==null? \"\" : etCorreo.getText().toString().trim();\r\n            if (email.isEmpty()) { Toast.makeText(this,\"Escribe tu correo arriba.\",Toast.LENGTH_SHORT).show(); return; }\r\n            com.google.firebase.auth.FirebaseAuth.getInstance()\r\n                    .sendPasswordResetEmail(email)\r\n                    .addOnSuccessListener(x -> Toast.makeText(this,\"Te enviamos un correo de recuperación.\",Toast.LENGTH_LONG).show())\r\n                    .addOnFailureListener(err -> Toast.makeText(this,err.getMessage(),Toast.LENGTH_LONG).show());\r\n        });\r\n\r\n        findViewById(R.id.txt_registrarse).setOnClickListener(v ->\r\n                startActivity(new Intent(this, RegistroActivity.class)));\r\n    }\r\n\r\n    private void routeByRole(String role){\r\n        Class<?> next = Cliente_HomeActivity.class;\r\n        if (\"superadmin\".equals(role)) next = Superadmin_HomeActivity.class;\r\n        else if (\"admin\".equals(role)) next = Admin_HomeActivity.class;\r\n        else if (\"guia\".equals(role))  next = Guia_HomeActivity.class;\r\n        startActivity(new Intent(this, next));\r\n        finish();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java b/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java	(date 1762146389749)
--@@ -3,6 +3,7 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
-- 
-- import com.example.proyecto_2025.Activities_Administrador.Admin_HomeActivity;
--@@ -15,10 +16,12 @@
-- import com.google.firebase.firestore.DocumentSnapshot;
-- 
-- public class LoginActivity extends AppCompatActivity {
--+
--     private AuthRepository repo;
--     private TextInputEditText etCorreo, etPassword;
-- 
---    @Override protected void onCreate(Bundle b) {
--+    @Override
--+    protected void onCreate(Bundle b) {
--         super.onCreate(b);
--         setContentView(R.layout.activity_login);
-- 
--@@ -26,6 +29,7 @@
--         etCorreo   = findViewById(R.id.et_correo);
--         etPassword = findViewById(R.id.et_password);
-- 
--+        // botón ACCEDER
--         findViewById(R.id.btn_acceder).setOnClickListener(v -> {
--             String email = etCorreo.getText() == null ? "" : etCorreo.getText().toString().trim();
--             String pass  = etPassword.getText() == null ? "" : etPassword.getText().toString();
--@@ -37,33 +41,78 @@
-- 
--             repo.login(email, pass, new AuthRepository.Callback<DocumentSnapshot>() {
--                 @Override public void onSuccess(DocumentSnapshot snap) {
---                    routeByRole(snap.getString("role"));
--+                    if (!snap.exists()) {
--+                        Toast.makeText(LoginActivity.this, "Perfil no encontrado.", Toast.LENGTH_LONG).show();
--+                        return;
--+                    }
--+
--+                    String role   = snap.getString("role");
--+                    String status = snap.getString("status");
--+                    if (status == null) status = "active";
--+
--+                    // 🔻🔻🔻 FLUJO REAL DE VERIFICACIÓN (COMENTADO)
--+                    // Boolean verReq  = snap.getBoolean("verificationRequired");
--+                    // Boolean emailOk = snap.getBoolean("emailVerified");
--+                    // if (verReq == null) verReq = false;
--+                    // if (emailOk == null) emailOk = false;
--+                    // if (verReq && !emailOk) {
--+                    //     Intent i = new Intent(LoginActivity.this, CodigoConfirmacionActivity.class);
--+                    //     i.putExtra("email", snap.getString("email"));
--+                    //     startActivity(i);
--+                    //     return;
--+                    // }
--+                    // 🔺🔺🔺
--+
--+                    // guía pendiente → lo mandamos a la pantalla de "espera aprobación"
--+                    if ("guia".equalsIgnoreCase(role) && "pending".equalsIgnoreCase(status)) {
--+                        startActivity(new Intent(LoginActivity.this, PendienteGuiaActivity.class));
--+                        finish();
--+                        return;
--+                    }
--+
--+                    // usuario deshabilitado (excepto superadmin)
--+                    if (!"active".equalsIgnoreCase(status) && !"superadmin".equalsIgnoreCase(role)) {
--+                        Toast.makeText(LoginActivity.this, "Tu cuenta está deshabilitada.", Toast.LENGTH_LONG).show();
--+                        repo.signOut();
--+                        return;
--+                    }
--+
--+                    routeByRole(role);
--                 }
--+
--                 @Override public void onError(Exception e) {
--                     Toast.makeText(LoginActivity.this, "Error: "+e.getMessage(), Toast.LENGTH_LONG).show();
--                 }
--             });
--         });
-- 
---        // (Opcional) listeners de “olvidaste contraseña” y “registrarse”
--+        // recuperar password
--         findViewById(R.id.txt_olvidaste_password).setOnClickListener(v -> {
--             String email = etCorreo.getText()==null? "" : etCorreo.getText().toString().trim();
---            if (email.isEmpty()) { Toast.makeText(this,"Escribe tu correo arriba.",Toast.LENGTH_SHORT).show(); return; }
--+            if (email.isEmpty()) {
--+                Toast.makeText(this,"Escribe tu correo arriba.",Toast.LENGTH_SHORT).show();
--+                return;
--+            }
--             com.google.firebase.auth.FirebaseAuth.getInstance()
--                     .sendPasswordResetEmail(email)
--                     .addOnSuccessListener(x -> Toast.makeText(this,"Te enviamos un correo de recuperación.",Toast.LENGTH_LONG).show())
--                     .addOnFailureListener(err -> Toast.makeText(this,err.getMessage(),Toast.LENGTH_LONG).show());
--         });
-- 
--+        // ir a registro
--         findViewById(R.id.txt_registrarse).setOnClickListener(v ->
--                 startActivity(new Intent(this, RegistroActivity.class)));
--     }
-- 
--     private void routeByRole(String role){
--         Class<?> next = Cliente_HomeActivity.class;
---        if ("superadmin".equals(role)) next = Superadmin_HomeActivity.class;
---        else if ("admin".equals(role)) next = Admin_HomeActivity.class;
---        else if ("guia".equals(role))  next = Guia_HomeActivity.class;
--+        if ("superadmin".equalsIgnoreCase(role)) {
--+            next = Superadmin_HomeActivity.class;
--+        } else if ("admin".equalsIgnoreCase(role)) {
--+            next = Admin_HomeActivity.class;
--+        } else if ("guia".equalsIgnoreCase(role))  {
--+            next = Guia_HomeActivity.class;
--+        }
--         startActivity(new Intent(this, next));
--         finish();
--     }
--Index: app/src/main/java/com/example/proyecto_2025/login/ConfirmacionActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class ConfirmacionActivity extends AppCompatActivity {\r\n\r\n    private Button btnConfirmar;\r\n    private String rolSeleccionado;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_confirmacion_joaco);\r\n        rolSeleccionado = getIntent().getStringExtra(\"rol\");\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnConfirmar = findViewById(R.id.btn_confirmar);\r\n\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnConfirmar.setOnClickListener(v -> {\r\n            Intent intent;\r\n\r\n            if (\"Cliente\".equals(rolSeleccionado)) {\r\n                intent = new Intent(this, ExitoClienteActivity.class);\r\n            } else if (\"Guía de turismo\".equals(rolSeleccionado)) {\r\n                intent = new Intent(this, PendienteGuiaActivity.class);\r\n            } else {\r\n                // Por defecto, ir a cliente\r\n                intent = new Intent(this, ExitoClienteActivity.class);\r\n            }\r\n\r\n            startActivity(intent);\r\n        });\r\n\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/ConfirmacionActivity.java b/app/src/main/java/com/example/proyecto_2025/login/ConfirmacionActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/ConfirmacionActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/ConfirmacionActivity.java	(date 1762143988044)
--@@ -3,43 +3,47 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Button;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
-- 
-- public class ConfirmacionActivity extends AppCompatActivity {
-- 
---    private Button btnConfirmar;
--+    private Button btnOk;
--     private String rolSeleccionado;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_confirmacion_joaco);
---        rolSeleccionado = getIntent().getStringExtra("rol");
--+        setContentView(R.layout.activity_confirmacion);
--+
--+        rolSeleccionado = getIntent().getStringExtra("rol"); // "cliente" o "guia"
--+
--         initViews();
--         setupListeners();
--     }
-- 
--     private void initViews() {
---        btnConfirmar = findViewById(R.id.btn_confirmar);
---
--+        btnOk = findViewById(R.id.btn_ok);
--     }
-- 
--     private void setupListeners() {
---        btnConfirmar.setOnClickListener(v -> {
--+        btnOk.setOnClickListener(v -> {
--             Intent intent;
-- 
---            if ("Cliente".equals(rolSeleccionado)) {
--+            if ("cliente".equalsIgnoreCase(rolSeleccionado)) {
--                 intent = new Intent(this, ExitoClienteActivity.class);
---            } else if ("Guía de turismo".equals(rolSeleccionado)) {
--+            } else if ("guia".equalsIgnoreCase(rolSeleccionado) ||
--+                    "guía de turismo".equalsIgnoreCase(rolSeleccionado)) {
--                 intent = new Intent(this, PendienteGuiaActivity.class);
--             } else {
---                // Por defecto, ir a cliente
--+                // por defecto, tratarlo como cliente
--                 intent = new Intent(this, ExitoClienteActivity.class);
--             }
-- 
--             startActivity(intent);
--+            finish();
--         });
---
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.AutoCompleteTextView;\r\nimport android.widget.CheckBox;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.auth.AuthRepository;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\n\r\npublic class RegistroActivity extends AppCompatActivity {\r\n    private AuthRepository repo;\r\n\r\n    private TextInputEditText etNombre, etCorreo, etPass, etPass2;\r\n    private AutoCompleteTextView rolView;\r\n    private CheckBox cbTerminos;\r\n\r\n    @Override protected void onCreate(Bundle b) {\r\n        super.onCreate(b);\r\n        setContentView(R.layout.activity_registro);\r\n        repo = new AuthRepository();\r\n\r\n        etNombre = findViewById(R.id.et_nombre);\r\n        etCorreo = findViewById(R.id.et_correo);\r\n        etPass   = findViewById(R.id.et_password);\r\n        etPass2  = findViewById(R.id.et_confirm_password);\r\n        rolView  = findViewById(R.id.spinner_rol);\r\n        cbTerminos = findViewById(R.id.cb_terminos);\r\n\r\n        // Dropdown de roles (\"cliente\" / \"guia\")\r\n        String[] roles = new String[]{\"cliente\",\"guia\"};\r\n        rolView.setAdapter(new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, roles));\r\n        rolView.setText(roles[0], false); // valor por defecto\r\n\r\n        findViewById(R.id.btn_volver).setOnClickListener(v -> finish());\r\n\r\n        findViewById(R.id.btn_continuar).setOnClickListener(v -> {\r\n            String name  = safe(etNombre);\r\n            String email = safe(etCorreo);\r\n            String pass  = safe(etPass);\r\n            String pass2 = safe(etPass2);\r\n            String role  = safe(rolView).toLowerCase();\r\n\r\n            if (name.isEmpty() || email.isEmpty() || pass.isEmpty()) {\r\n                toast(\"Completa nombre, correo y contraseña.\"); return;\r\n            }\r\n            if (pass.length() < 6) { toast(\"La contraseña debe tener al menos 6 caracteres.\"); return; }\r\n            if (!pass.equals(pass2)) { toast(\"Las contraseñas no coinciden.\"); return; }\r\n            if (!role.equals(\"cliente\") && !role.equals(\"guia\")) { toast(\"Selecciona un rol válido.\"); return; }\r\n            if (!cbTerminos.isChecked()) { toast(\"Debes aceptar los términos y condiciones.\"); return; }\r\n\r\n            repo.signUp(name, email, pass, role, new AuthRepository.Callback<Void>() {\r\n                @Override public void onSuccess(Void unused) {\r\n                    toast(\"Cuenta creada. Inicia sesión.\"); finish();\r\n                }\r\n                @Override public void onError(Exception e) {\r\n                    toast(\"Error: \"+e.getMessage());\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private String safe(TextInputEditText t){ return t.getText()==null? \"\": t.getText().toString().trim(); }\r\n    private String safe(AutoCompleteTextView t){ return t.getText()==null? \"\": t.getText().toString().trim(); }\r\n    private void toast(String m){ Toast.makeText(this,m,Toast.LENGTH_LONG).show(); }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java b/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java	(date 1761977221960)
--@@ -1,10 +1,12 @@
-- package com.example.proyecto_2025.login;
-- 
-- import android.os.Bundle;
--+import android.view.View;
-- import android.widget.ArrayAdapter;
-- import android.widget.AutoCompleteTextView;
-- import android.widget.CheckBox;
-- import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
-- 
-- import com.example.proyecto_2025.R;
--@@ -12,13 +14,15 @@
-- import com.google.android.material.textfield.TextInputEditText;
-- 
-- public class RegistroActivity extends AppCompatActivity {
--+
--     private AuthRepository repo;
-- 
---    private TextInputEditText etNombre, etCorreo, etPass, etPass2;
--+    private TextInputEditText etNombre, etCorreo, etPass, etPass2, etDni;
--     private AutoCompleteTextView rolView;
--     private CheckBox cbTerminos;
-- 
---    @Override protected void onCreate(Bundle b) {
--+    @Override
--+    protected void onCreate(Bundle b) {
--         super.onCreate(b);
--         setContentView(R.layout.activity_registro);
--         repo = new AuthRepository();
--@@ -29,11 +33,21 @@
--         etPass2  = findViewById(R.id.et_confirm_password);
--         rolView  = findViewById(R.id.spinner_rol);
--         cbTerminos = findViewById(R.id.cb_terminos);
--+        etDni    = findViewById(R.id.et_dni);  // agrega este campo en el XML
-- 
---        // Dropdown de roles ("cliente" / "guia")
--         String[] roles = new String[]{"cliente","guia"};
--         rolView.setAdapter(new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, roles));
---        rolView.setText(roles[0], false); // valor por defecto
--+        rolView.setText(roles[0], false);
--+
--+        // mostrar/ocultar dni según rol
--+        rolView.setOnItemClickListener((parent, view, position, id) -> {
--+            String r = roles[position];
--+            if ("guia".equalsIgnoreCase(r)) {
--+                if (etDni != null) etDni.setVisibility(View.VISIBLE);
--+            } else {
--+                if (etDni != null) etDni.setVisibility(View.GONE);
--+            }
--+        });
-- 
--         findViewById(R.id.btn_volver).setOnClickListener(v -> finish());
-- 
--@@ -43,6 +57,7 @@
--             String pass  = safe(etPass);
--             String pass2 = safe(etPass2);
--             String role  = safe(rolView).toLowerCase();
--+            String dni   = etDni != null ? safe(etDni) : "";
-- 
--             if (name.isEmpty() || email.isEmpty() || pass.isEmpty()) {
--                 toast("Completa nombre, correo y contraseña."); return;
--@@ -51,13 +66,22 @@
--             if (!pass.equals(pass2)) { toast("Las contraseñas no coinciden."); return; }
--             if (!role.equals("cliente") && !role.equals("guia")) { toast("Selecciona un rol válido."); return; }
--             if (!cbTerminos.isChecked()) { toast("Debes aceptar los términos y condiciones."); return; }
--+            if ("guia".equals(role) && dni.isEmpty()) { toast("El guía debe ingresar DNI."); return; }
-- 
--+            // registramos
--             repo.signUp(name, email, pass, role, new AuthRepository.Callback<Void>() {
--                 @Override public void onSuccess(Void unused) {
---                    toast("Cuenta creada. Inicia sesión."); finish();
--+                    // aquí podrías mandar a ConfirmarEmailActivity
--+                    if ("guia".equals(role)) {
--+                        toast("Cuenta de guía creada. Revisa tu correo y espera aprobación.");
--+                    } else {
--+                        toast("Cuenta creada. Revisa tu correo y confirma con el código.");
--+                    }
--+                    finish();
--                 }
--+
--                 @Override public void onError(Exception e) {
---                    toast("Error: "+e.getMessage());
--+                    toast("Error: " + e.getMessage());
--                 }
--             });
--         });
--Index: app/src/main/res/layout/activity_confirmacion_joaco.xml
--===================================================================
--diff --git a/app/src/main/res/layout/activity_confirmacion_joaco.xml b/app/src/main/res/layout/activity_confirmacion_joaco.xml
--deleted file mode 100644
----- a/app/src/main/res/layout/activity_confirmacion_joaco.xml	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ /dev/null	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--@@ -1,105 +0,0 @@
---<?xml version="1.0" encoding="utf-8"?>
---<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
---    android:layout_width="match_parent"
---    android:layout_height="match_parent"
---    android:orientation="vertical"
---    android:background="#FFFFFF"
---    android:padding="24dp"
---    android:gravity="center">
---
---    <!-- Título principal -->
---    <TextView
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---        android:text="Introducir el código de confirmación"
---        android:textSize="18sp"
---        android:textStyle="bold"
---        android:textColor="#000000"
---        android:gravity="center"
---        android:layout_marginBottom="16dp" />
---
---    <!-- Subtítulo -->
---    <TextView
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---        android:text="Se envió un código de 4 dígitos\na nombre@gmail.com"
---        android:textSize="14sp"
---        android:textColor="#666666"
---        android:gravity="center"
---        android:layout_marginBottom="40dp" />
---
---    <!-- Campos de código (4 campos separados) -->
---    <LinearLayout
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---        android:orientation="horizontal"
---        android:layout_marginBottom="40dp">
---
---        <EditText
---            android:id="@+id/et_digit1"
---            android:layout_width="50dp"
---            android:layout_height="50dp"
---            android:layout_margin="8dp"
---            android:gravity="center"
---            android:inputType="number"
---            android:maxLength="1"
---            android:textSize="18sp"
---            android:background="@android:drawable/edit_text" />
---
---        <EditText
---            android:id="@+id/et_digit2"
---            android:layout_width="50dp"
---            android:layout_height="50dp"
---            android:layout_margin="8dp"
---            android:gravity="center"
---            android:inputType="number"
---            android:maxLength="1"
---            android:textSize="18sp"
---            android:background="@android:drawable/edit_text" />
---
---        <EditText
---            android:id="@+id/et_digit3"
---            android:layout_width="50dp"
---            android:layout_height="50dp"
---            android:layout_margin="8dp"
---            android:gravity="center"
---            android:inputType="number"
---            android:maxLength="1"
---            android:textSize="18sp"
---            android:background="@android:drawable/edit_text" />
---
---        <EditText
---            android:id="@+id/et_digit4"
---            android:layout_width="50dp"
---            android:layout_height="50dp"
---            android:layout_margin="8dp"
---            android:gravity="center"
---            android:inputType="number"
---            android:maxLength="1"
---            android:textSize="18sp"
---            android:background="@android:drawable/edit_text" />
---
---    </LinearLayout>
---
---    <!-- Botón Reenviar código -->
---    <Button
---        android:id="@+id/btn_reenviar"
---        android:layout_width="match_parent"
---        android:layout_height="50dp"
---        android:text="Reenviar código"
---        android:textColor="#FFFFFF"
---        android:backgroundTint="#1976D2"
---        android:layout_marginBottom="16dp"
---        android:textSize="16sp" />
---
---    <!-- Botón Continuar -->
---    <Button
---        android:id="@+id/btn_confirmar"
---        android:layout_width="match_parent"
---        android:layout_height="50dp"
---        android:text="Continuar"
---        android:textColor="#FFFFFF"
---        android:backgroundTint="#1976D2"
---        android:textSize="16sp" />
---
---</LinearLayout>
--\ No newline at end of file
--Index: app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class CodigoConfirmacionActivity extends AppCompatActivity {\r\n\r\n    private Button btnContinuar;\r\n    private ImageButton btnVolver;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_codigo_confirmacion_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnContinuar = findViewById(R.id.btn_continuar);\r\n        btnVolver = findViewById(R.id.btn_volver);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnVolver.setOnClickListener(v -> {\r\n            finish(); // Volver a la pantalla anterior\r\n        });\r\n\r\n        btnContinuar.setOnClickListener(v -> {\r\n            Intent intent = new Intent(this, CrearPasswordActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java b/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java	(date 1762011896910)
--@@ -3,37 +3,131 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Button;
--+import android.widget.EditText;
-- import android.widget.ImageButton;
--+import android.widget.TextView;
--+import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
--+
-- import com.example.proyecto_2025.R;
--+import com.google.firebase.auth.FirebaseAuth;
--+import com.google.firebase.auth.FirebaseUser;
--+import com.google.firebase.firestore.FieldValue;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+
--+import java.util.HashMap;
--+import java.util.Map;
-- 
-- public class CodigoConfirmacionActivity extends AppCompatActivity {
-- 
--+    private EditText et1, et2, et3, et4;
--     private Button btnContinuar;
--     private ImageButton btnVolver;
--+    private TextView tvSubtitulo;
--+
--+    private FirebaseAuth auth;
--+    private FirebaseFirestore db;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_codigo_confirmacion_joaco);
--+        setContentView(R.layout.activity_codigo_confirmacion);
--+
--+        auth = FirebaseAuth.getInstance();
--+        db   = FirebaseFirestore.getInstance();
-- 
--         initViews();
--         setupListeners();
--+        fillEmailIfAvailable();
--     }
-- 
--     private void initViews() {
--         btnContinuar = findViewById(R.id.btn_continuar);
---        btnVolver = findViewById(R.id.btn_volver);
--+        btnVolver    = findViewById(R.id.btn_volver);
--+        et1 = findViewById(R.id.et_digit1);
--+        et2 = findViewById(R.id.et_digit2);
--+        et3 = findViewById(R.id.et_digit3);
--+        et4 = findViewById(R.id.et_digit4);
--+        tvSubtitulo = findViewById(R.id.tv_subtitulo);
--     }
-- 
--     private void setupListeners() {
---        btnVolver.setOnClickListener(v -> {
---            finish(); // Volver a la pantalla anterior
---        });
--+        btnVolver.setOnClickListener(v -> finish());
-- 
--         btnContinuar.setOnClickListener(v -> {
---            Intent intent = new Intent(this, CrearPasswordActivity.class);
---            startActivity(intent);
--+            String d1 = et1.getText() == null ? "" : et1.getText().toString().trim();
--+            String d2 = et2.getText() == null ? "" : et2.getText().toString().trim();
--+            String d3 = et3.getText() == null ? "" : et3.getText().toString().trim();
--+            String d4 = et4.getText() == null ? "" : et4.getText().toString().trim();
--+
--+            String codeUser = d1 + d2 + d3 + d4;
--+            if (codeUser.length() != 4) {
--+                Toast.makeText(this, "Ingresa los 4 dígitos.", Toast.LENGTH_LONG).show();
--+                return;
--+            }
--+
--+            FirebaseUser u = auth.getCurrentUser();
--+            if (u == null) {
--+                Toast.makeText(this, "Vuelve a iniciar sesión para confirmar.", Toast.LENGTH_LONG).show();
--+                return;
--+            }
--+
--+            String uid = u.getUid();
--+
--+            db.collection("users").document(uid).get()
--+                    .addOnSuccessListener(snap -> {
--+                        if (!snap.exists()) {
--+                            Toast.makeText(this, "No se encontró tu perfil.", Toast.LENGTH_LONG).show();
--+                            return;
--+                        }
--+
--+                        String codeDb = snap.getString("verificationCode");
--+                        if (codeDb == null) {
--+                            Toast.makeText(this, "No hay código registrado. Vuelve a registrarte.", Toast.LENGTH_LONG).show();
--+                            return;
--+                        }
--+
--+                        // si en BD está en 6 dígitos y en UI en 4 → comparamos primeros 4
--+                        if (codeDb.length() > 4) {
--+                            codeDb = codeDb.substring(0, 4);
--+                        }
--+
--+                        if (!codeDb.equals(codeUser)) {
--+                            Toast.makeText(this, "Código incorrecto.", Toast.LENGTH_LONG).show();
--+                            return;
--+                        }
--+
--+                        // si el código es correcto → actualizar flags
--+                        Map<String, Object> updates = new HashMap<>();
--+                        updates.put("emailVerified", true);
--+                        updates.put("verificationRequired", false);
--+                        updates.put("updatedAt", FieldValue.serverTimestamp());
--+
--+                        db.collection("users").document(uid).update(updates)
--+                                .addOnSuccessListener(x -> {
--+                                    Toast.makeText(this, "Correo verificado.", Toast.LENGTH_LONG).show();
--+                                    // seguir tu flujo original → crear password
--+                                    Intent i = new Intent(this, CrearPasswordActivity.class);
--+                                    startActivity(i);
--+                                    finish();
--+                                })
--+                                .addOnFailureListener(e -> Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show());
--+                    })
--+                    .addOnFailureListener(e -> Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show());
--         });
--     }
---}
--\ No newline at end of file
--+
--+    private void fillEmailIfAvailable() {
--+        // si el login te mandó el email como extra, lo mostramos
--+        String email = getIntent().getStringExtra("email");
--+        if (email == null) {
--+            // si no vino por intent, tratamos de leerlo del currentUser
--+            FirebaseUser u = FirebaseAuth.getInstance().getCurrentUser();
--+            if (u != null) email = u.getEmail();
--+        }
--+        if (email != null && tvSubtitulo != null) {
--+            tvSubtitulo.setText("Se envió un código de 4 dígitos\na " + email);
--+        }
--+    }
--+}
--Index: app/src/main/res/layout/activity_codigo_confirmacion_joaco.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_codigo_confirmacion_joaco.xml b/app/src/main/res/layout/activity_codigo_confirmacion.xml
--rename from app/src/main/res/layout/activity_codigo_confirmacion_joaco.xml
--rename to app/src/main/res/layout/activity_codigo_confirmacion.xml
----- a/app/src/main/res/layout/activity_codigo_confirmacion_joaco.xml	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/res/layout/activity_codigo_confirmacion.xml	(date 1762011879210)
--@@ -23,11 +23,8 @@
--             android:src="@android:drawable/ic_menu_revert"
--             android:contentDescription="Volver atrás" />
-- 
---
---
--     </LinearLayout>
-- 
---
--     <!-- Título -->
--     <TextView
--         android:layout_width="wrap_content"
--@@ -41,9 +38,10 @@
-- 
--     <!-- Subtítulo -->
--     <TextView
--+        android:id="@+id/tv_subtitulo"
--         android:layout_width="wrap_content"
--         android:layout_height="wrap_content"
---        android:text="Se envió un código de 4 dígitos\na nombre@gmail.com"
--+        android:text="Se envió un código de 4 dígitos"
--         android:textSize="14sp"
--         android:textColor="#666666"
--         android:gravity="center"
--@@ -114,4 +112,4 @@
--         android:textStyle="bold"
--         android:textAllCaps="false" />
-- 
---</LinearLayout>
--\ No newline at end of file
--+</LinearLayout>
--Index: app/src/main/res/layout/activity_registro.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#FFFFFF\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"24dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_marginBottom=\"16dp\">\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/btn_volver\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:background=\"?android:attr/selectableItemBackgroundBorderless\"\r\n                android:src=\"@android:drawable/ic_menu_revert\"\r\n                android:contentDescription=\"Volver atrás\" />\r\n\r\n            <View\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"0dp\"\r\n                android:layout_weight=\"1\" />\r\n\r\n        </LinearLayout>\r\n\r\n\r\n        <!-- Header -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Regístrate\"\r\n            android:textSize=\"24sp\"\r\n            android:textStyle=\"bold\"\r\n            android:textColor=\"#000000\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Crea una cuenta para iniciar\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#666666\"\r\n            android:layout_marginBottom=\"32dp\" />\r\n\r\n        <!-- Campo Nombre -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Nombre\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_nombre\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Ingresa tu nombre completo\"\r\n                android:inputType=\"textPersonName\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Correo electrónico -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Correo electrónico\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_correo\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"nombre@gmail.com\"\r\n                android:inputType=\"textEmailAddress\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Contraseña -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Contraseña\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\"\r\n            app:passwordToggleEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_password\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Crea tu contraseña\"\r\n                android:inputType=\"textPassword\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Confirmar contraseña -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\"\r\n            app:passwordToggleEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_confirm_password\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Confirmar contraseña\"\r\n                android:inputType=\"textPassword\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Rol -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Rol\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu\">\r\n\r\n            <AutoCompleteTextView\r\n                android:id=\"@+id/spinner_rol\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Selecciona una opción\"\r\n                android:inputType=\"none\"\r\n                android:focusable=\"false\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Checkbox términos -->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_marginBottom=\"24dp\">\r\n\r\n            <CheckBox\r\n                android:id=\"@+id/cb_terminos\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginEnd=\"8dp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"He leído y acepto los Términos y Condiciones y la Política de Privacidad\"\r\n                android:textSize=\"12sp\"\r\n                android:textColor=\"#666666\"\r\n                android:lineSpacingExtra=\"2dp\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <!-- Botón continuar -->\r\n        <Button\r\n            android:id=\"@+id/btn_continuar\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:text=\"Continuar\"\r\n            android:textColor=\"#FFFFFF\"\r\n            android:backgroundTint=\"#1976D2\"\r\n            android:textSize=\"16sp\"\r\n            android:textStyle=\"bold\"\r\n            android:textAllCaps=\"false\" />\r\n\r\n    </LinearLayout>\r\n\r\n</ScrollView>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_registro.xml b/app/src/main/res/layout/activity_registro.xml
----- a/app/src/main/res/layout/activity_registro.xml	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/res/layout/activity_registro.xml	(date 1761977221918)
--@@ -77,6 +77,24 @@
-- 
--         </com.google.android.material.textfield.TextInputLayout>
-- 
--+        <!-- DNI (solo guias) -->
--+        <com.google.android.material.textfield.TextInputLayout
--+            android:layout_width="match_parent"
--+            android:layout_height="wrap_content"
--+            android:layout_marginBottom="16dp"
--+            app:boxStrokeColor="#1976D2"
--+            app:boxStrokeWidth="2dp">
--+
--+            <com.google.android.material.textfield.TextInputEditText
--+                android:id="@+id/et_dni"
--+                android:layout_width="match_parent"
--+                android:layout_height="wrap_content"
--+                android:hint="DNI"
--+                android:inputType="number"
--+                android:visibility="gone"/>
--+        </com.google.android.material.textfield.TextInputLayout>
--+
--+
--         <!-- Campo Correo electrónico -->
--         <TextView
--             android:layout_width="wrap_content"
--Index: app/src/main/res/navigation/nav_graph.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/nav_graph\"\r\n    app:startDestination=\"@id/loginActivity\">\r\n\r\n    <!-- Flujo principal de Login y Registro -->\r\n    <activity\r\n        android:id=\"@+id/loginActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.LoginActivity\"\r\n        android:label=\"Login\"\r\n        tools:layout=\"@layout/activity_login\">\r\n        <action\r\n            android:id=\"@+id/action_login_to_registro\"\r\n            app:destination=\"@id/registroActivity\" />\r\n        <action\r\n            android:id=\"@+id/action_login_to_recuperar_password\"\r\n            app:destination=\"@id/recuperarPasswordActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/registroActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.RegistroActivity\"\r\n        android:label=\"Registro\"\r\n        tools:layout=\"@layout/activity_registro\">\r\n        <action\r\n            android:id=\"@+id/action_registro_to_confirmacion\"\r\n            app:destination=\"@id/confirmacionActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/confirmacionActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.ConfirmacionActivity\"\r\n        android:label=\"Confirmación\"\r\n        tools:layout=\"@layout/activity_confirmacion_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_confirmacion_to_exito_cliente\"\r\n            app:destination=\"@id/exitoClienteActivity\" />\r\n        <action\r\n            android:id=\"@+id/action_confirmacion_to_pendiente_guia\"\r\n            app:destination=\"@id/pendienteGuiaActivity\" />\r\n    </activity>\r\n\r\n    <!-- Pantallas finales según rol -->\r\n    <activity\r\n        android:id=\"@+id/exitoClienteActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.ExitoClienteActivity\"\r\n        android:label=\"Cuenta Creada\"\r\n        tools:layout=\"@layout/activity_exito_cliente_joaco\" />\r\n\r\n    <activity\r\n        android:id=\"@+id/pendienteGuiaActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.PendienteGuiaActivity\"\r\n        android:label=\"Pendiente Aprobación\"\r\n        tools:layout=\"@layout/activity_pendiente_guia_joaco\" />\r\n\r\n    <!-- Flujo de recuperación de contraseña -->\r\n    <activity\r\n        android:id=\"@+id/recuperarPasswordActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.RecuperarPasswordActivity\"\r\n        android:label=\"Recuperar Contraseña\"\r\n        tools:layout=\"@layout/activity_recuperar_password_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_recuperar_to_confirmar_email\"\r\n            app:destination=\"@id/confirmarEmailActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/confirmarEmailActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.ConfirmarEmailActivity\"\r\n        android:label=\"Confirmar Email\"\r\n        tools:layout=\"@layout/activity_confirmar_email_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_confirmar_email_to_codigo\"\r\n            app:destination=\"@id/codigoConfirmacionActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/codigoConfirmacionActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.CodigoConfirmacionActivity\"\r\n        android:label=\"Código Confirmación\"\r\n        tools:layout=\"@layout/activity_codigo_confirmacion_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_codigo_to_crear_password\"\r\n            app:destination=\"@id/crearPasswordActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/crearPasswordActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.CrearPasswordActivity\"\r\n        android:label=\"Crear Nueva Contraseña\"\r\n        tools:layout=\"@layout/activity_crear_password_joaco\" />\r\n\r\n</navigation>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/navigation/nav_graph.xml b/app/src/main/res/navigation/nav_graph.xml
----- a/app/src/main/res/navigation/nav_graph.xml	(revision ff37e809ab64bea5bcc32b16a8a24e0a0fa953af)
--+++ b/app/src/main/res/navigation/nav_graph.xml	(date 1762104758737)
--@@ -47,13 +47,13 @@
--         android:id="@+id/exitoClienteActivity"
--         android:name="com.example.proyecto_2025.login.ExitoClienteActivity"
--         android:label="Cuenta Creada"
---        tools:layout="@layout/activity_exito_cliente_joaco" />
--+        tools:layout="@layout/activity_exito_cliente" />
-- 
--     <activity
--         android:id="@+id/pendienteGuiaActivity"
--         android:name="com.example.proyecto_2025.login.PendienteGuiaActivity"
--         android:label="Pendiente Aprobación"
---        tools:layout="@layout/activity_pendiente_guia_joaco" />
--+        tools:layout="@layout/activity_pendiente_guia" />
-- 
--     <!-- Flujo de recuperación de contraseña -->
--     <activity
--@@ -70,7 +70,7 @@
--         android:id="@+id/confirmarEmailActivity"
--         android:name="com.example.proyecto_2025.login.ConfirmarEmailActivity"
--         android:label="Confirmar Email"
---        tools:layout="@layout/activity_confirmar_email_joaco">
--+        tools:layout="@layout/activity_confirmar_email">
--         <action
--             android:id="@+id/action_confirmar_email_to_codigo"
--             app:destination="@id/codigoConfirmacionActivity" />
--@@ -80,7 +80,7 @@
--         android:id="@+id/codigoConfirmacionActivity"
--         android:name="com.example.proyecto_2025.login.CodigoConfirmacionActivity"
--         android:label="Código Confirmación"
---        tools:layout="@layout/activity_codigo_confirmacion_joaco">
--+        tools:layout="@layout/activity_codigo_confirmacion">
--         <action
--             android:id="@+id/action_codigo_to_crear_password"
--             app:destination="@id/crearPasswordActivity" />
--@@ -90,6 +90,6 @@
--         android:id="@+id/crearPasswordActivity"
--         android:name="com.example.proyecto_2025.login.CrearPasswordActivity"
--         android:label="Crear Nueva Contraseña"
---        tools:layout="@layout/activity_crear_password_joaco" />
--+        tools:layout="@layout/activity_crear_password" />
-- 
-- </navigation>
--\ No newline at end of file
--Index: app/src/main/res/layout/activity_confirmacion.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_confirmacion.xml b/app/src/main/res/layout/activity_confirmacion.xml
--new file mode 100644
----- /dev/null	(date 1762144028079)
--+++ b/app/src/main/res/layout/activity_confirmacion.xml	(date 1762144028079)
--@@ -0,0 +1,55 @@
--+<?xml version="1.0" encoding="utf-8"?>
--+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
--+    xmlns:app="http://schemas.android.com/apk/res-auto"
--+    android:layout_width="match_parent"
--+    android:layout_height="match_parent"
--+    android:orientation="vertical"
--+    android:background="#FFFFFF"
--+    android:padding="24dp"
--+    android:gravity="center">
--+
--+    <!-- Ícono -->
--+    <ImageView
--+        android:layout_width="90dp"
--+        android:layout_height="90dp"
--+        android:src="@android:drawable/ic_dialog_info"
--+        android:layout_marginBottom="28dp"
--+        app:tint="#1976D2" />
--+
--+    <!-- Título -->
--+    <TextView
--+        android:id="@+id/tv_titulo"
--+        android:layout_width="wrap_content"
--+        android:layout_height="wrap_content"
--+        android:text="Registro completado"
--+        android:textSize="22sp"
--+        android:textStyle="bold"
--+        android:textColor="#000000"
--+        android:gravity="center"
--+        android:layout_marginBottom="12dp" />
--+
--+    <!-- Mensaje -->
--+    <TextView
--+        android:id="@+id/tv_mensaje"
--+        android:layout_width="wrap_content"
--+        android:layout_height="wrap_content"
--+        android:text="Tu cuenta fue creada correctamente. Presiona continuar para finalizar."
--+        android:textSize="15sp"
--+        android:textColor="#666666"
--+        android:gravity="center"
--+        android:lineSpacingExtra="2dp"
--+        android:layout_marginBottom="48dp" />
--+
--+    <!-- Botón continuar -->
--+    <Button
--+        android:id="@+id/btn_ok"
--+        android:layout_width="match_parent"
--+        android:layout_height="50dp"
--+        android:text="Confirmar"
--+        android:textColor="#FFFFFF"
--+        android:backgroundTint="#1976D2"
--+        android:textSize="16sp"
--+        android:textStyle="bold"
--+        android:textAllCaps="false" />
--+
--+</LinearLayout>
--diff --git a/app/src/main/res/layout/activity_exito_cliente_joaco.xml b/app/src/main/res/layout/activity_exito_cliente.xml
--rename from app/src/main/res/layout/activity_exito_cliente_joaco.xml
--rename to app/src/main/res/layout/activity_exito_cliente.xml
--diff --git a/app/src/main/res/layout/activity_confirmar_email_joaco.xml b/app/src/main/res/layout/activity_confirmar_email.xml
--rename from app/src/main/res/layout/activity_confirmar_email_joaco.xml
--rename to app/src/main/res/layout/activity_confirmar_email.xml
--diff --git a/app/src/main/res/layout/activity_pendiente_guia_joaco.xml b/app/src/main/res/layout/activity_pendiente_guia.xml
--rename from app/src/main/res/layout/activity_pendiente_guia_joaco.xml
--rename to app/src/main/res/layout/activity_pendiente_guia.xml
--diff --git a/app/src/main/res/layout/activity_crear_password_joaco.xml b/app/src/main/res/layout/activity_crear_password.xml
--rename from app/src/main/res/layout/activity_crear_password_joaco.xml
--rename to app/src/main/res/layout/activity_crear_password.xml
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06__Changes_.xml	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_1_11_2025_01_06_[Changes]" date="1761977222380" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 1/11/2025 01:06 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_1_11_2025_01_06_[Changes]/shelved.patch	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,465 +0,0 @@
--Index: app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.data.auth;\r\n\r\nimport com.google.firebase.auth.*;\r\nimport com.google.firebase.firestore.*;\r\nimport java.util.*;\r\nimport static com.google.firebase.firestore.FieldValue.serverTimestamp;\r\n\r\npublic class AuthRepository {\r\n    private final FirebaseAuth auth = FirebaseAuth.getInstance();\r\n    private final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    public interface Callback<T> { void onSuccess(T t); void onError(Exception e); }\r\n\r\n    // LOGIN\r\n    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {\r\n        auth.signInWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r ->\r\n                        db.collection(\"users\").document(r.getUser().getUid()).get()\r\n                                .addOnSuccessListener(snap -> {\r\n                                    if (!snap.exists()) { cb.onError(new Exception(\"Perfil no encontrado.\")); return; }\r\n                                    String status = snap.getString(\"status\");\r\n                                    if (!\"active\".equals(status)) { cb.onError(new Exception(\"Usuario deshabilitado.\")); return; }\r\n                                    cb.onSuccess(snap);\r\n                                })\r\n                                .addOnFailureListener(cb::onError)\r\n                )\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    public void signUp(String name, String email, String pass, String role, Callback<Void> cb) {\r\n        auth.createUserWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r -> {\r\n                    String uid = r.getUser().getUid();\r\n                    Map<String,Object> m = new HashMap<>();\r\n                    m.put(\"uid\", uid);\r\n                    m.put(\"email\", email);\r\n                    m.put(\"displayName\", name);\r\n                    m.put(\"role\", role.toLowerCase());\r\n                    m.put(\"status\", \"active\");\r\n                    m.put(\"companyId\", null);\r\n                    m.put(\"createdAt\", serverTimestamp());\r\n                    m.put(\"updatedAt\", serverTimestamp());\r\n                    db.collection(\"users\").document(uid).set(m)\r\n                            .addOnSuccessListener(v -> cb.onSuccess(null))\r\n                            .addOnFailureListener(cb::onError);\r\n                })\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    // Buscar usuario por email (para promoción)\r\n    public void findUserByEmail(String email, Callback<QuerySnapshot> cb){\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"email\", email).limit(1)\r\n                .get()\r\n                .addOnSuccessListener(cb::onSuccess)\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    // Promover a admin (cambia role + companyId)\r\n    public void promoteToAdmin(String uid, String companyId, Callback<Void> cb){\r\n        Map<String,Object> m = new HashMap<>();\r\n        m.put(\"role\",\"admin\");\r\n        m.put(\"companyId\", companyId);\r\n        m.put(\"updatedAt\", FieldValue.serverTimestamp());\r\n        db.collection(\"users\").document(uid).update(m)\r\n                .addOnSuccessListener(v -> cb.onSuccess(null))\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    // (Opcional) Crear admin desde cero (Auth + Firestore)\r\n    public void createAdminFromScratch(String name, String email, String pass, String companyId, Callback<Void> cb){\r\n        auth.createUserWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r -> {\r\n                    String uid = r.getUser().getUid();\r\n                    Map<String,Object> u = new HashMap<>();\r\n                    u.put(\"uid\", uid);\r\n                    u.put(\"email\", email);\r\n                    u.put(\"displayName\", name);\r\n                    u.put(\"role\", \"admin\");\r\n                    u.put(\"status\", \"active\");\r\n                    u.put(\"companyId\", companyId);\r\n                    u.put(\"createdAt\", FieldValue.serverTimestamp());\r\n                    u.put(\"updatedAt\", FieldValue.serverTimestamp());\r\n                    db.collection(\"users\").document(uid).set(u)\r\n                            .addOnSuccessListener(x -> cb.onSuccess(null))\r\n                            .addOnFailureListener(cb::onError);\r\n                })\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    public void logout(){ auth.signOut(); }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java b/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java
----- a/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java	(revision fcc14c26a711c5d7e134392a3aa3cdcefd4ac423)
--+++ b/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java	(date 1761943091728)
--@@ -1,92 +1,111 @@
-- package com.example.proyecto_2025.data.auth;
-- 
---import com.google.firebase.auth.*;
--+import com.google.firebase.auth.AuthResult;
--+import com.google.firebase.auth.FirebaseAuth;
--+import com.google.firebase.auth.FirebaseUser;
-- import com.google.firebase.firestore.*;
---import java.util.*;
---import static com.google.firebase.firestore.FieldValue.serverTimestamp;
--+
--+import java.util.HashMap;
--+import java.util.Map;
--+import java.util.Random;
-- 
-- public class AuthRepository {
--+
--     private final FirebaseAuth auth = FirebaseAuth.getInstance();
--     private final FirebaseFirestore db = FirebaseFirestore.getInstance();
-- 
---    public interface Callback<T> { void onSuccess(T t); void onError(Exception e); }
---
---    // LOGIN
---    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {
---        auth.signInWithEmailAndPassword(email, pass)
---                .addOnSuccessListener(r ->
---                        db.collection("users").document(r.getUser().getUid()).get()
---                                .addOnSuccessListener(snap -> {
---                                    if (!snap.exists()) { cb.onError(new Exception("Perfil no encontrado.")); return; }
---                                    String status = snap.getString("status");
---                                    if (!"active".equals(status)) { cb.onError(new Exception("Usuario deshabilitado.")); return; }
---                                    cb.onSuccess(snap);
---                                })
---                                .addOnFailureListener(cb::onError)
---                )
---                .addOnFailureListener(cb::onError);
---    }
---
---    public void signUp(String name, String email, String pass, String role, Callback<Void> cb) {
---        auth.createUserWithEmailAndPassword(email, pass)
---                .addOnSuccessListener(r -> {
---                    String uid = r.getUser().getUid();
---                    Map<String,Object> m = new HashMap<>();
---                    m.put("uid", uid);
---                    m.put("email", email);
---                    m.put("displayName", name);
---                    m.put("role", role.toLowerCase());
---                    m.put("status", "active");
---                    m.put("companyId", null);
---                    m.put("createdAt", serverTimestamp());
---                    m.put("updatedAt", serverTimestamp());
---                    db.collection("users").document(uid).set(m)
---                            .addOnSuccessListener(v -> cb.onSuccess(null))
---                            .addOnFailureListener(cb::onError);
---                })
---                .addOnFailureListener(cb::onError);
--+    public interface Callback<T> {
--+        void onSuccess(T t);
--+        void onError(Exception e);
--     }
-- 
---    // Buscar usuario por email (para promoción)
---    public void findUserByEmail(String email, Callback<QuerySnapshot> cb){
---        db.collection("users")
---                .whereEqualTo("email", email).limit(1)
---                .get()
---                .addOnSuccessListener(cb::onSuccess)
---                .addOnFailureListener(cb::onError);
--+    // genera código de 6 dígitos
--+    private String genCode() {
--+        int n = new Random().nextInt(900000) + 100000; // 100000..999999
--+        return String.valueOf(n);
--     }
-- 
---    // Promover a admin (cambia role + companyId)
---    public void promoteToAdmin(String uid, String companyId, Callback<Void> cb){
---        Map<String,Object> m = new HashMap<>();
---        m.put("role","admin");
---        m.put("companyId", companyId);
---        m.put("updatedAt", FieldValue.serverTimestamp());
---        db.collection("users").document(uid).update(m)
---                .addOnSuccessListener(v -> cb.onSuccess(null))
---                .addOnFailureListener(cb::onError);
---    }
--+    /**
--+     * REGISTRO de cliente/guia
--+     * - cliente: status=active, dni=null
--+     * - guia:    status=pending, dni=OJO (de momento null -> lo completa después)
--+     */
--+    public void signUp(String name,
--+                       String email,
--+                       String pass,
--+                       String role,
--+                       Callback<Void> cb) {
-- 
---    // (Opcional) Crear admin desde cero (Auth + Firestore)
---    public void createAdminFromScratch(String name, String email, String pass, String companyId, Callback<Void> cb){
--         auth.createUserWithEmailAndPassword(email, pass)
---                .addOnSuccessListener(r -> {
---                    String uid = r.getUser().getUid();
---                    Map<String,Object> u = new HashMap<>();
--+                .addOnSuccessListener((AuthResult r) -> {
--+                    FirebaseUser fUser = r.getUser();
--+                    if (fUser == null) {
--+                        cb.onError(new Exception("No se pudo crear el usuario."));
--+                        return;
--+                    }
--+                    String uid = fUser.getUid();
--+
--+                    // status según rol
--+                    String status = "active";
--+                    if ("guia".equalsIgnoreCase(role)) {
--+                        status = "pending";
--+                    }
--+
--+                    // código de verificación interno
--+                    String code = genCode();
--+
--+                    Map<String, Object> u = new HashMap<>();
--                     u.put("uid", uid);
---                    u.put("email", email);
--                     u.put("displayName", name);
---                    u.put("role", "admin");
---                    u.put("status", "active");
---                    u.put("companyId", companyId);
--+                    u.put("email", email);
--+                    u.put("role", role.toLowerCase());
--+                    u.put("status", status);
--+                    u.put("dni", null);                   // guia/admin lo completan
--+                    u.put("phone", null);
--+                    u.put("photoUrl", "https://example.com/default-user.png"); // placeholder
--+                    u.put("companyId", null);             // solo admin tendrá esto
--+                    u.put("emailVerified", false);        // hasta que ponga el código
--+                    u.put("verificationCode", code);      // 6 dígitos
--+                    u.put("verificationRequired", true);  // para que el login lo chequee
--                     u.put("createdAt", FieldValue.serverTimestamp());
--                     u.put("updatedAt", FieldValue.serverTimestamp());
--+
--                     db.collection("users").document(uid).set(u)
---                            .addOnSuccessListener(x -> cb.onSuccess(null))
--+                            .addOnSuccessListener(x -> {
--+                                // dispara verificación de Firebase (link)
--+                                fUser.sendEmailVerification();
--+                                // el correo con el CODE lo puedes armar en tu activity
--+                                cb.onSuccess(null);
--+                            })
--+                            .addOnFailureListener(cb::onError);
--+                })
--+                .addOnFailureListener(cb::onError);
--+    }
--+
--+    /**
--+     * LOGIN → devuelve doc de Firestore
--+     */
--+    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {
--+        auth.signInWithEmailAndPassword(email, pass)
--+                .addOnSuccessListener((AuthResult r) -> {
--+                    FirebaseUser fUser = auth.getCurrentUser();
--+                    if (fUser == null) {
--+                        cb.onError(new Exception("No se encontró el usuario."));
--+                        return;
--+                    }
--+                    String uid = fUser.getUid();
--+                    db.collection("users").document(uid).get()
--+                            .addOnSuccessListener(cb::onSuccess)
--                             .addOnFailureListener(cb::onError);
--                 })
--                 .addOnFailureListener(cb::onError);
--     }
-- 
---    public void logout(){ auth.signOut(); }
--+    public FirebaseUser getCurrentUser() {
--+        return auth.getCurrentUser();
--+    }
--+
--+    public void signOut() {
--+        auth.signOut();
--+    }
-- }
--Index: app/src/main/res/layout/activity_registro.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#FFFFFF\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"24dp\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_marginBottom=\"16dp\">\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/btn_volver\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"40dp\"\r\n                android:background=\"?android:attr/selectableItemBackgroundBorderless\"\r\n                android:src=\"@android:drawable/ic_menu_revert\"\r\n                android:contentDescription=\"Volver atrás\" />\r\n\r\n            <View\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"0dp\"\r\n                android:layout_weight=\"1\" />\r\n\r\n        </LinearLayout>\r\n\r\n\r\n        <!-- Header -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Regístrate\"\r\n            android:textSize=\"24sp\"\r\n            android:textStyle=\"bold\"\r\n            android:textColor=\"#000000\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Crea una cuenta para iniciar\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#666666\"\r\n            android:layout_marginBottom=\"32dp\" />\r\n\r\n        <!-- Campo Nombre -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Nombre\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_nombre\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Ingresa tu nombre completo\"\r\n                android:inputType=\"textPersonName\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Correo electrónico -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Correo electrónico\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_correo\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"nombre@gmail.com\"\r\n                android:inputType=\"textEmailAddress\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Contraseña -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Contraseña\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\"\r\n            app:passwordToggleEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_password\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Crea tu contraseña\"\r\n                android:inputType=\"textPassword\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Confirmar contraseña -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\"\r\n            app:passwordToggleEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/et_confirm_password\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Confirmar contraseña\"\r\n                android:inputType=\"textPassword\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Rol -->\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Rol\"\r\n            android:textSize=\"14sp\"\r\n            android:textColor=\"#000000\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_marginBottom=\"8dp\" />\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginBottom=\"16dp\"\r\n            app:boxStrokeColor=\"#1976D2\"\r\n            app:boxStrokeWidth=\"2dp\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu\">\r\n\r\n            <AutoCompleteTextView\r\n                android:id=\"@+id/spinner_rol\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Selecciona una opción\"\r\n                android:inputType=\"none\"\r\n                android:focusable=\"false\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Checkbox términos -->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_marginBottom=\"24dp\">\r\n\r\n            <CheckBox\r\n                android:id=\"@+id/cb_terminos\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginEnd=\"8dp\" />\r\n\r\n            <TextView\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"He leído y acepto los Términos y Condiciones y la Política de Privacidad\"\r\n                android:textSize=\"12sp\"\r\n                android:textColor=\"#666666\"\r\n                android:lineSpacingExtra=\"2dp\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <!-- Botón continuar -->\r\n        <Button\r\n            android:id=\"@+id/btn_continuar\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:text=\"Continuar\"\r\n            android:textColor=\"#FFFFFF\"\r\n            android:backgroundTint=\"#1976D2\"\r\n            android:textSize=\"16sp\"\r\n            android:textStyle=\"bold\"\r\n            android:textAllCaps=\"false\" />\r\n\r\n    </LinearLayout>\r\n\r\n</ScrollView>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_registro.xml b/app/src/main/res/layout/activity_registro.xml
----- a/app/src/main/res/layout/activity_registro.xml	(revision fcc14c26a711c5d7e134392a3aa3cdcefd4ac423)
--+++ b/app/src/main/res/layout/activity_registro.xml	(date 1761943161902)
--@@ -77,6 +77,24 @@
-- 
--         </com.google.android.material.textfield.TextInputLayout>
-- 
--+        <!-- DNI (solo guias) -->
--+        <com.google.android.material.textfield.TextInputLayout
--+            android:layout_width="match_parent"
--+            android:layout_height="wrap_content"
--+            android:layout_marginBottom="16dp"
--+            app:boxStrokeColor="#1976D2"
--+            app:boxStrokeWidth="2dp">
--+
--+            <com.google.android.material.textfield.TextInputEditText
--+                android:id="@+id/et_dni"
--+                android:layout_width="match_parent"
--+                android:layout_height="wrap_content"
--+                android:hint="DNI"
--+                android:inputType="number"
--+                android:visibility="gone"/>
--+        </com.google.android.material.textfield.TextInputLayout>
--+
--+
--         <!-- Campo Correo electrónico -->
--         <TextView
--             android:layout_width="wrap_content"
--Index: app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.AutoCompleteTextView;\r\nimport android.widget.CheckBox;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.auth.AuthRepository;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\n\r\npublic class RegistroActivity extends AppCompatActivity {\r\n    private AuthRepository repo;\r\n\r\n    private TextInputEditText etNombre, etCorreo, etPass, etPass2;\r\n    private AutoCompleteTextView rolView;\r\n    private CheckBox cbTerminos;\r\n\r\n    @Override protected void onCreate(Bundle b) {\r\n        super.onCreate(b);\r\n        setContentView(R.layout.activity_registro);\r\n        repo = new AuthRepository();\r\n\r\n        etNombre = findViewById(R.id.et_nombre);\r\n        etCorreo = findViewById(R.id.et_correo);\r\n        etPass   = findViewById(R.id.et_password);\r\n        etPass2  = findViewById(R.id.et_confirm_password);\r\n        rolView  = findViewById(R.id.spinner_rol);\r\n        cbTerminos = findViewById(R.id.cb_terminos);\r\n\r\n        // Dropdown de roles (\"cliente\" / \"guia\")\r\n        String[] roles = new String[]{\"cliente\",\"guia\"};\r\n        rolView.setAdapter(new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, roles));\r\n        rolView.setText(roles[0], false); // valor por defecto\r\n\r\n        findViewById(R.id.btn_volver).setOnClickListener(v -> finish());\r\n\r\n        findViewById(R.id.btn_continuar).setOnClickListener(v -> {\r\n            String name  = safe(etNombre);\r\n            String email = safe(etCorreo);\r\n            String pass  = safe(etPass);\r\n            String pass2 = safe(etPass2);\r\n            String role  = safe(rolView).toLowerCase();\r\n\r\n            if (name.isEmpty() || email.isEmpty() || pass.isEmpty()) {\r\n                toast(\"Completa nombre, correo y contraseña.\"); return;\r\n            }\r\n            if (pass.length() < 6) { toast(\"La contraseña debe tener al menos 6 caracteres.\"); return; }\r\n            if (!pass.equals(pass2)) { toast(\"Las contraseñas no coinciden.\"); return; }\r\n            if (!role.equals(\"cliente\") && !role.equals(\"guia\")) { toast(\"Selecciona un rol válido.\"); return; }\r\n            if (!cbTerminos.isChecked()) { toast(\"Debes aceptar los términos y condiciones.\"); return; }\r\n\r\n            repo.signUp(name, email, pass, role, new AuthRepository.Callback<Void>() {\r\n                @Override public void onSuccess(Void unused) {\r\n                    toast(\"Cuenta creada. Inicia sesión.\"); finish();\r\n                }\r\n                @Override public void onError(Exception e) {\r\n                    toast(\"Error: \"+e.getMessage());\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private String safe(TextInputEditText t){ return t.getText()==null? \"\": t.getText().toString().trim(); }\r\n    private String safe(AutoCompleteTextView t){ return t.getText()==null? \"\": t.getText().toString().trim(); }\r\n    private void toast(String m){ Toast.makeText(this,m,Toast.LENGTH_LONG).show(); }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java b/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java	(revision fcc14c26a711c5d7e134392a3aa3cdcefd4ac423)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/RegistroActivity.java	(date 1761943185257)
--@@ -1,10 +1,12 @@
-- package com.example.proyecto_2025.login;
-- 
-- import android.os.Bundle;
--+import android.view.View;
-- import android.widget.ArrayAdapter;
-- import android.widget.AutoCompleteTextView;
-- import android.widget.CheckBox;
-- import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
-- 
-- import com.example.proyecto_2025.R;
--@@ -12,13 +14,15 @@
-- import com.google.android.material.textfield.TextInputEditText;
-- 
-- public class RegistroActivity extends AppCompatActivity {
--+
--     private AuthRepository repo;
-- 
---    private TextInputEditText etNombre, etCorreo, etPass, etPass2;
--+    private TextInputEditText etNombre, etCorreo, etPass, etPass2, etDni;
--     private AutoCompleteTextView rolView;
--     private CheckBox cbTerminos;
-- 
---    @Override protected void onCreate(Bundle b) {
--+    @Override
--+    protected void onCreate(Bundle b) {
--         super.onCreate(b);
--         setContentView(R.layout.activity_registro);
--         repo = new AuthRepository();
--@@ -29,11 +33,21 @@
--         etPass2  = findViewById(R.id.et_confirm_password);
--         rolView  = findViewById(R.id.spinner_rol);
--         cbTerminos = findViewById(R.id.cb_terminos);
--+        etDni    = findViewById(R.id.et_dni);  // agrega este campo en el XML
-- 
---        // Dropdown de roles ("cliente" / "guia")
--         String[] roles = new String[]{"cliente","guia"};
--         rolView.setAdapter(new ArrayAdapter<>(this, android.R.layout.simple_list_item_1, roles));
---        rolView.setText(roles[0], false); // valor por defecto
--+        rolView.setText(roles[0], false);
--+
--+        // mostrar/ocultar dni según rol
--+        rolView.setOnItemClickListener((parent, view, position, id) -> {
--+            String r = roles[position];
--+            if ("guia".equalsIgnoreCase(r)) {
--+                if (etDni != null) etDni.setVisibility(View.VISIBLE);
--+            } else {
--+                if (etDni != null) etDni.setVisibility(View.GONE);
--+            }
--+        });
-- 
--         findViewById(R.id.btn_volver).setOnClickListener(v -> finish());
-- 
--@@ -43,6 +57,7 @@
--             String pass  = safe(etPass);
--             String pass2 = safe(etPass2);
--             String role  = safe(rolView).toLowerCase();
--+            String dni   = etDni != null ? safe(etDni) : "";
-- 
--             if (name.isEmpty() || email.isEmpty() || pass.isEmpty()) {
--                 toast("Completa nombre, correo y contraseña."); return;
--@@ -51,13 +66,22 @@
--             if (!pass.equals(pass2)) { toast("Las contraseñas no coinciden."); return; }
--             if (!role.equals("cliente") && !role.equals("guia")) { toast("Selecciona un rol válido."); return; }
--             if (!cbTerminos.isChecked()) { toast("Debes aceptar los términos y condiciones."); return; }
--+            if ("guia".equals(role) && dni.isEmpty()) { toast("El guía debe ingresar DNI."); return; }
-- 
--+            // registramos
--             repo.signUp(name, email, pass, role, new AuthRepository.Callback<Void>() {
--                 @Override public void onSuccess(Void unused) {
---                    toast("Cuenta creada. Inicia sesión."); finish();
--+                    // aquí podrías mandar a ConfirmarEmailActivity
--+                    if ("guia".equals(role)) {
--+                        toast("Cuenta de guía creada. Revisa tu correo y espera aprobación.");
--+                    } else {
--+                        toast("Cuenta creada. Revisa tu correo y confirma con el código.");
--+                    }
--+                    finish();
--                 }
--+
--                 @Override public void onError(Exception e) {
---                    toast("Error: "+e.getMessage());
--+                    toast("Error: " + e.getMessage());
--                 }
--             });
--         });
--Index: app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\n\r\npublic class CodigoConfirmacionActivity extends AppCompatActivity {\r\n\r\n    private Button btnContinuar;\r\n    private ImageButton btnVolver;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_codigo_confirmacion_joaco);\r\n\r\n        initViews();\r\n        setupListeners();\r\n    }\r\n\r\n    private void initViews() {\r\n        btnContinuar = findViewById(R.id.btn_continuar);\r\n        btnVolver = findViewById(R.id.btn_volver);\r\n    }\r\n\r\n    private void setupListeners() {\r\n        btnVolver.setOnClickListener(v -> {\r\n            finish(); // Volver a la pantalla anterior\r\n        });\r\n\r\n        btnContinuar.setOnClickListener(v -> {\r\n            Intent intent = new Intent(this, CrearPasswordActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java b/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java	(revision fcc14c26a711c5d7e134392a3aa3cdcefd4ac423)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/CodigoConfirmacionActivity.java	(date 1761946380220)
--@@ -15,7 +15,7 @@
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
---        setContentView(R.layout.activity_codigo_confirmacion_joaco);
--+        setContentView(R.layout.activity_codigo_confirmacion);
-- 
--         initViews();
--         setupListeners();
--Index: app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.login;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.proyecto_2025.Activities_Administrador.Admin_HomeActivity;\r\nimport com.example.proyecto_2025.Activities_Guia.Guia_HomeActivity;\r\nimport com.example.proyecto_2025.Activities_Superadmin.Superadmin_HomeActivity;\r\nimport com.example.proyecto_2025.Activities_Usuario.Cliente_HomeActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.auth.AuthRepository;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n    private AuthRepository repo;\r\n    private TextInputEditText etCorreo, etPassword;\r\n\r\n    @Override protected void onCreate(Bundle b) {\r\n        super.onCreate(b);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        repo = new AuthRepository();\r\n        etCorreo   = findViewById(R.id.et_correo);\r\n        etPassword = findViewById(R.id.et_password);\r\n\r\n        findViewById(R.id.btn_acceder).setOnClickListener(v -> {\r\n            String email = etCorreo.getText() == null ? \"\" : etCorreo.getText().toString().trim();\r\n            String pass  = etPassword.getText() == null ? \"\" : etPassword.getText().toString();\r\n\r\n            if (email.isEmpty() || pass.isEmpty()) {\r\n                Toast.makeText(this,\"Ingresa correo y contraseña.\",Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            repo.login(email, pass, new AuthRepository.Callback<DocumentSnapshot>() {\r\n                @Override public void onSuccess(DocumentSnapshot snap) {\r\n                    routeByRole(snap.getString(\"role\"));\r\n                }\r\n                @Override public void onError(Exception e) {\r\n                    Toast.makeText(LoginActivity.this, \"Error: \"+e.getMessage(), Toast.LENGTH_LONG).show();\r\n                }\r\n            });\r\n        });\r\n\r\n        // (Opcional) listeners de “olvidaste contraseña” y “registrarse”\r\n        findViewById(R.id.txt_olvidaste_password).setOnClickListener(v -> {\r\n            String email = etCorreo.getText()==null? \"\" : etCorreo.getText().toString().trim();\r\n            if (email.isEmpty()) { Toast.makeText(this,\"Escribe tu correo arriba.\",Toast.LENGTH_SHORT).show(); return; }\r\n            com.google.firebase.auth.FirebaseAuth.getInstance()\r\n                    .sendPasswordResetEmail(email)\r\n                    .addOnSuccessListener(x -> Toast.makeText(this,\"Te enviamos un correo de recuperación.\",Toast.LENGTH_LONG).show())\r\n                    .addOnFailureListener(err -> Toast.makeText(this,err.getMessage(),Toast.LENGTH_LONG).show());\r\n        });\r\n\r\n        findViewById(R.id.txt_registrarse).setOnClickListener(v ->\r\n                startActivity(new Intent(this, RegistroActivity.class)));\r\n    }\r\n\r\n    private void routeByRole(String role){\r\n        Class<?> next = Cliente_HomeActivity.class;\r\n        if (\"superadmin\".equals(role)) next = Superadmin_HomeActivity.class;\r\n        else if (\"admin\".equals(role)) next = Admin_HomeActivity.class;\r\n        else if (\"guia\".equals(role))  next = Guia_HomeActivity.class;\r\n        startActivity(new Intent(this, next));\r\n        finish();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java b/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java
----- a/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java	(revision fcc14c26a711c5d7e134392a3aa3cdcefd4ac423)
--+++ b/app/src/main/java/com/example/proyecto_2025/login/LoginActivity.java	(date 1761943109148)
--@@ -3,6 +3,7 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.Toast;
--+
-- import androidx.appcompat.app.AppCompatActivity;
-- 
-- import com.example.proyecto_2025.Activities_Administrador.Admin_HomeActivity;
--@@ -15,10 +16,12 @@
-- import com.google.firebase.firestore.DocumentSnapshot;
-- 
-- public class LoginActivity extends AppCompatActivity {
--+
--     private AuthRepository repo;
--     private TextInputEditText etCorreo, etPassword;
-- 
---    @Override protected void onCreate(Bundle b) {
--+    @Override
--+    protected void onCreate(Bundle b) {
--         super.onCreate(b);
--         setContentView(R.layout.activity_login);
-- 
--@@ -37,24 +40,66 @@
-- 
--             repo.login(email, pass, new AuthRepository.Callback<DocumentSnapshot>() {
--                 @Override public void onSuccess(DocumentSnapshot snap) {
---                    routeByRole(snap.getString("role"));
--+                    if (!snap.exists()) {
--+                        Toast.makeText(LoginActivity.this, "Perfil no encontrado.", Toast.LENGTH_LONG).show();
--+                        return;
--+                    }
--+                    String role = snap.getString("role");
--+                    String status = snap.getString("status");
--+                    Boolean verReq = snap.getBoolean("verificationRequired");
--+                    Boolean emailVer = snap.getBoolean("emailVerified");
--+
--+                    if (status == null) status = "active";
--+                    if (verReq == null) verReq = true;
--+                    if (emailVer == null) emailVer = false;
--+
--+                    // si requiere verificación y todavía no está verificado → ir a activity de código
--+                    if (verReq && !emailVer) {
--+                        // abrir tu pantalla de código
--+                        Intent i = new Intent(LoginActivity.this, CodigoConfirmacionActivity.class);
--+                        i.putExtra("email", snap.getString("email"));
--+                        startActivity(i);
--+                        // no finish(); para que pueda volver
--+                        return;
--+                    }
--+
--+                    // guía pendiente
--+                    if ("guia".equals(role) && "pending".equals(status)) {
--+                        startActivity(new Intent(LoginActivity.this, PendienteGuiaActivity.class));
--+                        finish();
--+                        return;
--+                    }
--+
--+                    // usuario deshabilitado
--+                    if (!"active".equals(status) && !"superadmin".equals(role)) {
--+                        Toast.makeText(LoginActivity.this, "Tu cuenta está deshabilitada.", Toast.LENGTH_LONG).show();
--+                        repo.signOut();
--+                        return;
--+                    }
--+
--+                    routeByRole(role);
--                 }
--+
--                 @Override public void onError(Exception e) {
--                     Toast.makeText(LoginActivity.this, "Error: "+e.getMessage(), Toast.LENGTH_LONG).show();
--                 }
--             });
--         });
-- 
---        // (Opcional) listeners de “olvidaste contraseña” y “registrarse”
--+        // recuperar password
--         findViewById(R.id.txt_olvidaste_password).setOnClickListener(v -> {
--             String email = etCorreo.getText()==null? "" : etCorreo.getText().toString().trim();
---            if (email.isEmpty()) { Toast.makeText(this,"Escribe tu correo arriba.",Toast.LENGTH_SHORT).show(); return; }
--+            if (email.isEmpty()) {
--+                Toast.makeText(this,"Escribe tu correo arriba.",Toast.LENGTH_SHORT).show();
--+                return;
--+            }
--             com.google.firebase.auth.FirebaseAuth.getInstance()
--                     .sendPasswordResetEmail(email)
--                     .addOnSuccessListener(x -> Toast.makeText(this,"Te enviamos un correo de recuperación.",Toast.LENGTH_LONG).show())
--                     .addOnFailureListener(err -> Toast.makeText(this,err.getMessage(),Toast.LENGTH_LONG).show());
--         });
-- 
--+        // ir a registro
--         findViewById(R.id.txt_registrarse).setOnClickListener(v ->
--                 startActivity(new Intent(this, RegistroActivity.class)));
--     }
--Index: app/src/main/res/navigation/nav_graph.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/nav_graph\"\r\n    app:startDestination=\"@id/loginActivity\">\r\n\r\n    <!-- Flujo principal de Login y Registro -->\r\n    <activity\r\n        android:id=\"@+id/loginActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.LoginActivity\"\r\n        android:label=\"Login\"\r\n        tools:layout=\"@layout/activity_login\">\r\n        <action\r\n            android:id=\"@+id/action_login_to_registro\"\r\n            app:destination=\"@id/registroActivity\" />\r\n        <action\r\n            android:id=\"@+id/action_login_to_recuperar_password\"\r\n            app:destination=\"@id/recuperarPasswordActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/registroActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.RegistroActivity\"\r\n        android:label=\"Registro\"\r\n        tools:layout=\"@layout/activity_registro\">\r\n        <action\r\n            android:id=\"@+id/action_registro_to_confirmacion\"\r\n            app:destination=\"@id/confirmacionActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/confirmacionActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.ConfirmacionActivity\"\r\n        android:label=\"Confirmación\"\r\n        tools:layout=\"@layout/activity_confirmacion_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_confirmacion_to_exito_cliente\"\r\n            app:destination=\"@id/exitoClienteActivity\" />\r\n        <action\r\n            android:id=\"@+id/action_confirmacion_to_pendiente_guia\"\r\n            app:destination=\"@id/pendienteGuiaActivity\" />\r\n    </activity>\r\n\r\n    <!-- Pantallas finales según rol -->\r\n    <activity\r\n        android:id=\"@+id/exitoClienteActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.ExitoClienteActivity\"\r\n        android:label=\"Cuenta Creada\"\r\n        tools:layout=\"@layout/activity_exito_cliente_joaco\" />\r\n\r\n    <activity\r\n        android:id=\"@+id/pendienteGuiaActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.PendienteGuiaActivity\"\r\n        android:label=\"Pendiente Aprobación\"\r\n        tools:layout=\"@layout/activity_pendiente_guia_joaco\" />\r\n\r\n    <!-- Flujo de recuperación de contraseña -->\r\n    <activity\r\n        android:id=\"@+id/recuperarPasswordActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.RecuperarPasswordActivity\"\r\n        android:label=\"Recuperar Contraseña\"\r\n        tools:layout=\"@layout/activity_recuperar_password_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_recuperar_to_confirmar_email\"\r\n            app:destination=\"@id/confirmarEmailActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/confirmarEmailActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.ConfirmarEmailActivity\"\r\n        android:label=\"Confirmar Email\"\r\n        tools:layout=\"@layout/activity_confirmar_email_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_confirmar_email_to_codigo\"\r\n            app:destination=\"@id/codigoConfirmacionActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/codigoConfirmacionActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.CodigoConfirmacionActivity\"\r\n        android:label=\"Código Confirmación\"\r\n        tools:layout=\"@layout/activity_codigo_confirmacion_joaco\">\r\n        <action\r\n            android:id=\"@+id/action_codigo_to_crear_password\"\r\n            app:destination=\"@id/crearPasswordActivity\" />\r\n    </activity>\r\n\r\n    <activity\r\n        android:id=\"@+id/crearPasswordActivity\"\r\n        android:name=\"com.example.proyecto_2025.login.CrearPasswordActivity\"\r\n        android:label=\"Crear Nueva Contraseña\"\r\n        tools:layout=\"@layout/activity_crear_password_joaco\" />\r\n\r\n</navigation>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/navigation/nav_graph.xml b/app/src/main/res/navigation/nav_graph.xml
----- a/app/src/main/res/navigation/nav_graph.xml	(revision fcc14c26a711c5d7e134392a3aa3cdcefd4ac423)
--+++ b/app/src/main/res/navigation/nav_graph.xml	(date 1761946380209)
--@@ -80,7 +80,7 @@
--         android:id="@+id/codigoConfirmacionActivity"
--         android:name="com.example.proyecto_2025.login.CodigoConfirmacionActivity"
--         android:label="Código Confirmación"
---        tools:layout="@layout/activity_codigo_confirmacion_joaco">
--+        tools:layout="@layout/activity_codigo_confirmacion">
--         <action
--             android:id="@+id/action_codigo_to_crear_password"
--             app:destination="@id/crearPasswordActivity" />
--diff --git a/app/src/main/res/layout/activity_codigo_confirmacion_joaco.xml b/app/src/main/res/layout/activity_codigo_confirmacion.xml
--rename from app/src/main/res/layout/activity_codigo_confirmacion_joaco.xml
--rename to app/src/main/res/layout/activity_codigo_confirmacion.xml
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48_[Changes]/shelved.patch	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,57 +0,0 @@
--Index: app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.proyecto_2025.data.auth;\r\n\r\nimport com.google.firebase.auth.*;\r\nimport com.google.firebase.firestore.*;\r\nimport java.util.*;\r\nimport static com.google.firebase.firestore.FieldValue.serverTimestamp;\r\n\r\npublic class AuthRepository {\r\n    private final FirebaseAuth auth = FirebaseAuth.getInstance();\r\n    private final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    public interface Callback<T> { void onSuccess(T t); void onError(Exception e); }\r\n\r\n    // LOGIN\r\n    public void login(String email, String pass, Callback<DocumentSnapshot> cb) {\r\n        auth.signInWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r ->\r\n                        db.collection(\"users\").document(r.getUser().getUid()).get()\r\n                                .addOnSuccessListener(snap -> {\r\n                                    if (!snap.exists()) { cb.onError(new Exception(\"Perfil no encontrado.\")); return; }\r\n                                    String status = snap.getString(\"status\");\r\n                                    if (!\"active\".equals(status)) { cb.onError(new Exception(\"Usuario deshabilitado.\")); return; }\r\n                                    cb.onSuccess(snap);\r\n                                })\r\n                                .addOnFailureListener(cb::onError)\r\n                )\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    public void signUp(String name, String email, String pass, String role, Callback<Void> cb) {\r\n        auth.createUserWithEmailAndPassword(email, pass)\r\n                .addOnSuccessListener(r -> {\r\n                    String uid = r.getUser().getUid();\r\n                    Map<String,Object> m = new HashMap<>();\r\n                    m.put(\"uid\", uid);\r\n                    m.put(\"email\", email);\r\n                    m.put(\"displayName\", name);\r\n                    m.put(\"role\", role.toLowerCase());\r\n                    m.put(\"status\", \"active\");\r\n                    m.put(\"companyId\", null);\r\n                    m.put(\"createdAt\", serverTimestamp());\r\n                    m.put(\"updatedAt\", serverTimestamp());\r\n                    db.collection(\"users\").document(uid).set(m)\r\n                            .addOnSuccessListener(v -> cb.onSuccess(null))\r\n                            .addOnFailureListener(cb::onError);\r\n                })\r\n                .addOnFailureListener(cb::onError);\r\n    }\r\n\r\n    public void logout(){ auth.signOut(); }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java b/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java
----- a/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java	(revision c1d6dd080008e934a89da6ccd27e6181f2ad3c47)
--+++ b/app/src/main/java/com/example/proyecto_2025/data/auth/AuthRepository.java	(date 1761681714030)
--@@ -47,5 +47,46 @@
--                 .addOnFailureListener(cb::onError);
--     }
-- 
--+    // Buscar usuario por email (para promoción)
--+    public void findUserByEmail(String email, Callback<QuerySnapshot> cb){
--+        db.collection("users")
--+                .whereEqualTo("email", email).limit(1)
--+                .get()
--+                .addOnSuccessListener(cb::onSuccess)
--+                .addOnFailureListener(cb::onError);
--+    }
--+
--+    // Promover a admin (cambia role + companyId)
--+    public void promoteToAdmin(String uid, String companyId, Callback<Void> cb){
--+        Map<String,Object> m = new HashMap<>();
--+        m.put("role","admin");
--+        m.put("companyId", companyId);
--+        m.put("updatedAt", FieldValue.serverTimestamp());
--+        db.collection("users").document(uid).update(m)
--+                .addOnSuccessListener(v -> cb.onSuccess(null))
--+                .addOnFailureListener(cb::onError);
--+    }
--+
--+    // (Opcional) Crear admin desde cero (Auth + Firestore)
--+    public void createAdminFromScratch(String name, String email, String pass, String companyId, Callback<Void> cb){
--+        auth.createUserWithEmailAndPassword(email, pass)
--+                .addOnSuccessListener(r -> {
--+                    String uid = r.getUser().getUid();
--+                    Map<String,Object> u = new HashMap<>();
--+                    u.put("uid", uid);
--+                    u.put("email", email);
--+                    u.put("displayName", name);
--+                    u.put("role", "admin");
--+                    u.put("status", "active");
--+                    u.put("companyId", companyId);
--+                    u.put("createdAt", FieldValue.serverTimestamp());
--+                    u.put("updatedAt", FieldValue.serverTimestamp());
--+                    db.collection("users").document(uid).set(u)
--+                            .addOnSuccessListener(x -> cb.onSuccess(null))
--+                            .addOnFailureListener(cb::onError);
--+                })
--+                .addOnFailureListener(cb::onError);
--+    }
--+
--     public void logout(){ auth.signOut(); }
-- }
-Index: app/src/main/java/com/example/proyecto_2025/model/Guide.java
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/model/Guide.java b/app/src/main/java/com/example/proyecto_2025/model/Guide.java
-deleted file mode 100644
---- a/app/src/main/java/com/example/proyecto_2025/model/Guide.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,27 +0,0 @@
--package com.example.proyecto_2025.model;
--
--import java.io.Serializable;
--import java.util.List;
--
--public class Guide implements Serializable {
--    public enum Language {ES, EN, FR, PT, DE}
--    private String id;
--    private String name;
--    private List<Language> languages;
--    private String photoUrl;
--    private String bio;
--    private float rating;
--    private String zone;
--
--    public Guide(String id, String name, List<Language> languages, String photoUrl, String bio, float rating, String zone) {
--        this.id = id; this.name = name; this.languages = languages;
--        this.photoUrl = photoUrl; this.bio = bio; this.rating = rating; this.zone = zone;
--    }
--    public String getId(){return id;}
--    public String getName(){return name;}
--    public List<Language> getLanguages(){return languages;}
--    public String getPhotoUrl(){return photoUrl;}
--    public String getBio(){return bio;}
--    public float getRating(){return rating;}
--    public String getZone(){return zone;}
--}
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10__Changes_.xml	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_3_11_2025_00_10_[Changes]" date="1762146615748" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_3_11_2025_00_10_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 3/11/2025 00:10 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48__Changes_.xml	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ /dev/null	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_29_10_2025_22_48_[Changes]" date="1761796100906" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_29_10_2025_22_48_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 29/10/2025 22:48 [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: app/src/main/java/com/example/proyecto_2025/model/Guia.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/model/Guia.java b/app/src/main/java/com/example/proyecto_2025/model/Guia.java
-new file mode 100644
---- /dev/null	(date 1762986080091)
-+++ b/app/src/main/java/com/example/proyecto_2025/model/Guia.java	(date 1762986080091)
-@@ -0,0 +1,164 @@
-+package com.example.proyecto_2025.model;
-+
-+import com.google.firebase.Timestamp;
-+import com.google.firebase.firestore.Exclude;
-+import com.google.firebase.firestore.IgnoreExtraProperties;
-+
-+import java.io.Serializable;
-+import java.util.ArrayList;
-+import java.util.HashMap;
-+import java.util.List;
-+import java.util.Map;
-+
-+/**
-+ * Modelo unificado de Guía (compatibilidad con la clase anterior "Guide" + Firestore).
-+ * - Conserva getters como getId(), getName(), getLanguages(), etc.
-+ * - Incluye campos de control usados en Firestore (role/status/verificación).
-+ */
-+@IgnoreExtraProperties
-+public class Guia implements Serializable {
-+
-+    // === Compatibilidad con el modelo anterior ===
-+    public enum Language { ES, EN, FR, PT, DE }
-+
-+    // --- Identidad y perfil ---
-+    private String uid;            // == id anterior
-+    private String displayName;    // == name anterior
-+    private String email;
-+    private String phone;
-+    private String dni;
-+    private String bio;            // igual al anterior
-+    private String photoUrl;       // igual al anterior
-+    private List<Language> languages = new ArrayList<>();  // igual al anterior
-+    private float rating = 0f;     // igual al anterior
-+    private String zone;           // igual al anterior
-+
-+    // --- Gestión de acceso ---
-+    private String role = "guia";          // "guia" siempre
-+    private String status = "pending";     // "pending" | "active" | "disabled"
-+    private Boolean emailVerified = false; // verificación de correo (si usas link de Firebase)
-+    private Boolean verificationRequired = true;
-+
-+    // --- Auditoría ---
-+    private Timestamp createdAt;
-+    private Timestamp updatedAt;
-+
-+    // ===== Constructores =====
-+    public Guia() {
-+        // Requerido por Firestore
-+    }
-+
-+    /** Constructor de compatibilidad con el modelo anterior Guide */
-+    public Guia(String id,
-+                String name,
-+                List<Language> languages,
-+                String photoUrl,
-+                String bio,
-+                float rating,
-+                String zone) {
-+        this.uid = id;
-+        this.displayName = name;
-+        if (languages != null) this.languages = languages;
-+        this.photoUrl = photoUrl;
-+        this.bio = bio;
-+        this.rating = rating;
-+        this.zone = zone;
-+        // por defecto: role="guia", status="pending"
-+    }
-+
-+    /** Constructor recomendado para registro (con email, teléfono y al menos 1 idioma) */
-+    public Guia(String name,
-+                String email,
-+                String phone,
-+                List<Language> languages) {
-+        this.displayName = name;
-+        this.email = email;
-+        this.phone = phone;
-+        if (languages != null) this.languages = languages;
-+        // por defecto: role="guia", status="pending"
-+    }
-+
-+    // ===== Getters/Setters (nuevos nombres) =====
-+    public String getUid() { return uid; }
-+    public void setUid(String uid) { this.uid = uid; }
-+
-+    public String getDisplayName() { return displayName; }
-+    public void setDisplayName(String displayName) { this.displayName = displayName; }
-+
-+    public String getEmail() { return email; }
-+    public void setEmail(String email) { this.email = email; }
-+
-+    public String getPhone() { return phone; }
-+    public void setPhone(String phone) { this.phone = phone; }
-+
-+    public String getDni() { return dni; }
-+    public void setDni(String dni) { this.dni = dni; }
-+
-+    public String getBio() { return bio; }
-+    public void setBio(String bio) { this.bio = bio; }
-+
-+    public String getPhotoUrl() { return photoUrl; }
-+    public void setPhotoUrl(String photoUrl) { this.photoUrl = photoUrl; }
-+
-+    public List<Language> getLanguages() { return languages; }
-+    public void setLanguages(List<Language> languages) {
-+        this.languages = languages != null ? languages : new ArrayList<>();
-+    }
-+
-+    public float getRating() { return rating; }
-+    public void setRating(float rating) { this.rating = rating; }
-+
-+    public String getZone() { return zone; }
-+    public void setZone(String zone) { this.zone = zone; }
-+
-+    public String getRole() { return role; }
-+    public void setRole(String role) { this.role = role; }
-+
-+    public String getStatus() { return status; }
-+    public void setStatus(String status) { this.status = status; }
-+
-+    public Boolean getEmailVerified() { return emailVerified; }
-+    public void setEmailVerified(Boolean emailVerified) { this.emailVerified = emailVerified; }
-+
-+    public Boolean getVerificationRequired() { return verificationRequired; }
-+    public void setVerificationRequired(Boolean verificationRequired) { this.verificationRequired = verificationRequired; }
-+
-+    public Timestamp getCreatedAt() { return createdAt; }
-+    public void setCreatedAt(Timestamp createdAt) { this.createdAt = createdAt; }
-+
-+    public Timestamp getUpdatedAt() { return updatedAt; }
-+    public void setUpdatedAt(Timestamp updatedAt) { this.updatedAt = updatedAt; }
-+
-+    // ===== Getters de COMPATIBILIDAD con el modelo anterior =====
-+    public String getId() { return uid; }
-+    public String getName() { return displayName; }
-+
-+    // ===== Helpers =====
-+    @Exclude
-+    public boolean isActive() { return "active".equalsIgnoreCase(status); }
-+
-+    @Exclude
-+    public boolean isPending() { return "pending".equalsIgnoreCase(status); }
-+
-+    @Exclude
-+    public Map<String, Object> toFirestoreMap() {
-+        Map<String, Object> m = new HashMap<>();
-+        m.put("uid", uid);
-+        m.put("displayName", displayName);
-+        m.put("email", email);
-+        m.put("phone", phone);
-+        m.put("dni", dni);
-+        m.put("bio", bio);
-+        m.put("photoUrl", photoUrl);
-+        m.put("languages", languages); // Firestore guarda enums como strings
-+        m.put("rating", rating);
-+        m.put("zone", zone);
-+        m.put("role", role);
-+        m.put("status", status);
-+        m.put("emailVerified", emailVerified);
-+        m.put("verificationRequired", verificationRequired);
-+        m.put("createdAt", createdAt);
-+        m.put("updatedAt", updatedAt);
-+        return m;
-+    }
-+}
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Superadmin;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.example.proyecto_2025.BaseActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminAdministradoresSedeBinding;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminRegistrarAdministradorBinding;\r\nimport com.google.android.material.dialog.MaterialAlertDialogBuilder;\r\n\r\npublic class Superadmin_Registrar_Administrador extends AppCompatActivity {\r\n\r\n    private ActivitySuperadminRegistrarAdministradorBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivitySuperadminRegistrarAdministradorBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        binding.btnRegistrarAdministrador.setOnClickListener(view ->\r\n                RegistrarAdministrador());\r\n    }\r\n\r\n    public void RegistrarAdministrador() {\r\n        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);\r\n        dialogBuilder.setTitle(\"Registrar Administrador\");\r\n        dialogBuilder.setMessage(\"¿Está seguro de registrar este usuario?\");\r\n        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn neutral\"));\r\n        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn positivo\"));\r\n        dialogBuilder.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java	(date 1762203365918)
-@@ -1,24 +1,22 @@
- package com.example.proyecto_2025.Activities_Superadmin;
- 
- import android.os.Bundle;
--import android.util.Log;
--
--import androidx.activity.EdgeToEdge;
-+import android.text.TextUtils;
-+import android.widget.Toast;
- import androidx.annotation.Nullable;
- import androidx.appcompat.app.AppCompatActivity;
--import androidx.core.graphics.Insets;
--import androidx.core.view.ViewCompat;
--import androidx.core.view.WindowInsetsCompat;
- 
--import com.example.proyecto_2025.BaseActivity;
--import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.databinding.ActivitySuperadminAdministradoresSedeBinding;
- import com.example.proyecto_2025.databinding.ActivitySuperadminRegistrarAdministradorBinding;
--import com.google.android.material.dialog.MaterialAlertDialogBuilder;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.functions.FirebaseFunctions;
-+
-+import java.util.HashMap;
-+import java.util.Map;
- 
- public class Superadmin_Registrar_Administrador extends AppCompatActivity {
- 
-     private ActivitySuperadminRegistrarAdministradorBinding binding;
-+    private FirebaseFunctions functions;
- 
-     @Override
-     protected void onCreate(@Nullable Bundle savedInstanceState) {
-@@ -26,16 +24,67 @@
-         binding = ActivitySuperadminRegistrarAdministradorBinding.inflate(getLayoutInflater());
-         setContentView(binding.getRoot());
- 
--        binding.btnRegistrarAdministrador.setOnClickListener(view ->
--                RegistrarAdministrador());
-+        functions = FirebaseFunctions.getInstance();
-+
-+        binding.btnRegistrarAdministrador.setOnClickListener(v -> registrarAdministrador());
-+    }
-+
-+    private void registrarAdministrador() {
-+        String nombre    = txt(binding.etNombre);
-+        String dni       = txt(binding.etDni);
-+        String email     = txt(binding.etEmail);
-+        String password  = txt(binding.etPassword);
-+        String companyId = txt(binding.etCompanyId);
-+        String telefono  = txt(binding.etTelefono);
-+        String domicilio = txt(binding.etDomicilio);
-+
-+        // Validaciones mínimas
-+        if (TextUtils.isEmpty(nombre) || TextUtils.isEmpty(email) ||
-+                TextUtils.isEmpty(password) || TextUtils.isEmpty(companyId) ||
-+                TextUtils.isEmpty(dni)) {
-+            toast("Completa nombre, DNI, email, contraseña y companyId.");
-+            return;
-+        }
-+        if (dni.length() != 8) { toast("DNI debe tener 8 dígitos."); return; }
-+        if (password.length() < 6) { toast("La contraseña debe tener al menos 6 caracteres."); return; }
-+
-+        binding.btnRegistrarAdministrador.setEnabled(false);
-+
-+        Map<String, Object> data = new HashMap<>();
-+        data.put("displayName", nombre);
-+        data.put("email", email);
-+        data.put("password", password);
-+        data.put("dni", dni);
-+        data.put("phone", emptyToNull(telefono));
-+        data.put("address", emptyToNull(domicilio));
-+        data.put("companyId", companyId);
-+
-+        // Llama a la Cloud Function createAdmin
-+        functions
-+                .getHttpsCallable("createAdmin")
-+                .call(data)
-+                .continueWith(task -> {
-+                    binding.btnRegistrarAdministrador.setEnabled(true);
-+                    if (!task.isSuccessful()) {
-+                        Exception e = task.getException();
-+                        throw e != null ? e : new Exception("Error desconocido");
-+                    }
-+                    return task.getResult();
-+                })
-+                .addOnSuccessListener(result -> {
-+                    toast("Administrador creado correctamente.");
-+                    finish(); // opcional
-+                })
-+                .addOnFailureListener(e -> {
-+                    toast("Error: " + e.getMessage());
-+                });
-+    }
-+
-+    private String txt(com.google.android.material.textfield.TextInputEditText e) {
-+        return e.getText() == null ? "" : e.getText().toString().trim();
-     }
- 
--    public void RegistrarAdministrador() {
--        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);
--        dialogBuilder.setTitle("Registrar Administrador");
--        dialogBuilder.setMessage("¿Está seguro de registrar este usuario?");
--        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d("msg-test","btn neutral"));
--        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d("msg-test","btn positivo"));
--        dialogBuilder.show();
--    }
--}
-\ No newline at end of file
-+    private Object emptyToNull(String s) { return s.isEmpty() ? null : s; }
-+
-+    private void toast(String m){ Toast.makeText(this, m, Toast.LENGTH_LONG).show(); }
-+}
-Index: app/src/main/res/layout/activity_superadmin_registrar_administrador.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:padding=\"16dp\"\r\n    tools:context=\".Activities_Superadmin.Superadmin_Registrar_Administrador\">\r\n\r\n    <!-- Título -->\r\n\r\n    <!-- Contenedor de campos -->\r\n    <TextView\r\n        android:id=\"@+id/Etiqueta1\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Registrar Nuevo Administrador\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"18sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/contenedorCampos\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        android:orientation=\"vertical\"\r\n        android:layout_marginTop=\"16dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/Etiqueta1\"\r\n        app:layout_constraintBottom_toTopOf=\"@id/btnRegistrarAdministrador\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\">\r\n\r\n        <!-- Campo Nombre -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Nombre\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textPersonName\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Apellidos -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Apellidos\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textPersonName\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Número de Documento -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Número de Documento de Identidad\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"number\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Fecha de Nacimiento -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Fecha de Nacimiento\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"date\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Edad -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textFieldEdad\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Edad\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"number\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Correo Electrónico -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Correo Electrónico\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textEmailAddress\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Teléfono -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Teléfono\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"phone\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <!-- Campo Domicilio -->\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:hint=\"Domicilio\"\r\n            android:layout_marginTop=\"8dp\">\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textPostalAddress\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    </LinearLayout>\r\n\r\n    <!-- Botón Registrar -->\r\n    <Button\r\n        android:id=\"@+id/btnRegistrarAdministrador\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:backgroundTint=\"#007AFF\"\r\n        android:minHeight=\"40dp\"\r\n        android:paddingHorizontal=\"16dp\"\r\n        android:text=\"Registrar\"\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#FFFFFF\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        android:layout_marginTop=\"16dp\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_superadmin_registrar_administrador.xml b/app/src/main/res/layout/activity_superadmin_registrar_administrador.xml
---- a/app/src/main/res/layout/activity_superadmin_registrar_administrador.xml	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/res/layout/activity_superadmin_registrar_administrador.xml	(date 1762193225099)
-@@ -1,28 +1,21 @@
- <?xml version="1.0" encoding="utf-8"?>
- <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
--    xmlns:tools="http://schemas.android.com/tools"
--    android:id="@+id/main"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    android:padding="16dp"
--    tools:context=".Activities_Superadmin.Superadmin_Registrar_Administrador">
-+    android:padding="16dp">
- 
--    <!-- Título -->
--
--    <!-- Contenedor de campos -->
-     <TextView
--        android:id="@+id/Etiqueta1"
-+        android:id="@+id/tvTitulo"
-         android:layout_width="wrap_content"
-         android:layout_height="wrap_content"
-         android:text="Registrar Nuevo Administrador"
-         android:textColor="#000000"
-         android:textSize="18sp"
-         android:textStyle="bold"
--        app:layout_constraintEnd_toEndOf="parent"
--        app:layout_constraintHorizontal_bias="0.0"
-+        app:layout_constraintTop_toTopOf="parent"
-         app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintTop_toTopOf="parent" />
-+        app:layout_constraintEnd_toEndOf="parent"/>
- 
-     <LinearLayout
-         android:id="@+id/contenedorCampos"
-@@ -30,123 +23,113 @@
-         android:layout_height="0dp"
-         android:orientation="vertical"
-         android:layout_marginTop="16dp"
--        app:layout_constraintTop_toBottomOf="@id/Etiqueta1"
-+        app:layout_constraintTop_toBottomOf="@id/tvTitulo"
-         app:layout_constraintBottom_toTopOf="@id/btnRegistrarAdministrador"
-         app:layout_constraintStart_toStartOf="parent"
-         app:layout_constraintEnd_toEndOf="parent">
- 
--        <!-- Campo Nombre -->
--        <com.google.android.material.textfield.TextInputLayout
--            android:layout_width="match_parent"
--            android:layout_height="wrap_content"
--            android:hint="Nombre">
--            <com.google.android.material.textfield.TextInputEditText
--                android:layout_width="match_parent"
--                android:layout_height="wrap_content"
--                android:inputType="textPersonName" />
--        </com.google.android.material.textfield.TextInputLayout>
--
--        <!-- Campo Apellidos -->
-+        <!-- Nombre -->
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Apellidos"
--            android:layout_marginTop="8dp">
-+            android:hint="Nombre completo">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etNombre"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="textPersonName" />
-+                android:inputType="textPersonName"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <!-- Campo Número de Documento -->
-+        <!-- DNI -->
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Número de Documento de Identidad"
-+            android:hint="DNI (8 dígitos)"
-             android:layout_marginTop="8dp">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etDni"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="number" />
-+                android:maxLength="8"
-+                android:inputType="number"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <!-- Campo Fecha de Nacimiento -->
-+        <!-- Email -->
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Fecha de Nacimiento"
-+            android:hint="Correo electrónico"
-             android:layout_marginTop="8dp">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etEmail"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="date" />
-+                android:inputType="textEmailAddress"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <!-- Campo Edad -->
-+        <!-- Password inicial -->
-         <com.google.android.material.textfield.TextInputLayout
--            android:id="@+id/textFieldEdad"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Edad"
--            android:layout_marginTop="8dp">
-+            android:hint="Contraseña inicial"
-+            android:layout_marginTop="8dp"
-+            app:passwordToggleEnabled="true">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etPassword"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="number" />
-+                android:inputType="textPassword"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <!-- Campo Correo Electrónico -->
-+        <!-- CompanyId (obligatorio para admin) -->
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Correo Electrónico"
-+            android:hint="companyId (obligatorio)"
-             android:layout_marginTop="8dp">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etCompanyId"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="textEmailAddress" />
-+                android:inputType="text"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <!-- Campo Teléfono -->
-+        <!-- Teléfono (opcional) -->
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Teléfono"
-+            android:hint="Teléfono (opcional)"
-             android:layout_marginTop="8dp">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etTelefono"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="phone" />
-+                android:inputType="phone"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
--        <!-- Campo Domicilio -->
-+        <!-- Domicilio (opcional) -->
-         <com.google.android.material.textfield.TextInputLayout
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
--            android:hint="Domicilio"
-+            android:hint="Domicilio (opcional)"
-             android:layout_marginTop="8dp">
-             <com.google.android.material.textfield.TextInputEditText
-+                android:id="@+id/etDomicilio"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:inputType="textPostalAddress" />
-+                android:inputType="textPostalAddress"/>
-         </com.google.android.material.textfield.TextInputLayout>
- 
-     </LinearLayout>
- 
--    <!-- Botón Registrar -->
--    <Button
-+    <com.google.android.material.button.MaterialButton
-         android:id="@+id/btnRegistrarAdministrador"
--        android:layout_width="wrap_content"
-+        android:layout_width="0dp"
-         android:layout_height="wrap_content"
--        android:backgroundTint="#007AFF"
--        android:minHeight="40dp"
--        android:paddingHorizontal="16dp"
-         android:text="Registrar"
-         android:textAllCaps="false"
--        android:textColor="#FFFFFF"
--        app:layout_constraintBottom_toBottomOf="parent"
-         app:layout_constraintStart_toStartOf="parent"
-         app:layout_constraintEnd_toEndOf="parent"
--        android:layout_marginTop="16dp" />
-+        app:layout_constraintBottom_toBottomOf="parent"/>
- 
- </androidx.constraintlayout.widget.ConstraintLayout>
-Index: app/src/main/res/layout/item_guia_pendiente.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/item_guia_pendiente.xml b/app/src/main/res/layout/item_guia_pendiente.xml
-new file mode 100644
---- /dev/null	(date 1762556987689)
-+++ b/app/src/main/res/layout/item_guia_pendiente.xml	(date 1762556987689)
-@@ -0,0 +1,43 @@
-+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    android:padding="12dp"
-+    android:orientation="vertical"
-+    android:layout_width="match_parent"
-+    android:layout_height="wrap_content">
-+
-+    <TextView android:id="@+id/tvNombre"
-+        android:textStyle="bold"
-+        android:textSize="16sp"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"/>
-+
-+    <TextView android:id="@+id/tvEmail"
-+        android:textColor="#666"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"/>
-+
-+    <LinearLayout
-+        android:layout_marginTop="8dp"
-+        android:orientation="horizontal"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content">
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnAprobar"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_weight="1"
-+            android:text="Aprobar"/>
-+
-+        <View
-+            android:layout_width="8dp"
-+            android:layout_height="0dp"/>
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnRechazar"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_weight="1"
-+            android:text="Rechazar"
-+            style="@style/Widget.Material3.Button.OutlinedButton"/>
-+    </LinearLayout>
-+</LinearLayout>
-Index: app/src/main/res/layout/item_guia_aprobado.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/item_guia_aprobado.xml b/app/src/main/res/layout/item_guia_aprobado.xml
-new file mode 100644
---- /dev/null	(date 1762556965029)
-+++ b/app/src/main/res/layout/item_guia_aprobado.xml	(date 1762556965029)
-@@ -0,0 +1,38 @@
-+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    android:padding="12dp"
-+    android:orientation="vertical"
-+    android:layout_width="match_parent"
-+    android:layout_height="wrap_content">
-+
-+    <TextView android:id="@+id/tvNombre"
-+        android:textStyle="bold"
-+        android:textSize="16sp"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"/>
-+
-+    <TextView android:id="@+id/tvEmail"
-+        android:textColor="#666"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content"/>
-+
-+    <LinearLayout
-+        android:layout_marginTop="8dp"
-+        android:orientation="horizontal"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content">
-+
-+        <TextView
-+            android:id="@+id/tvStatus"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_weight="1"
-+            android:text="status: active"/>
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnToggle"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="Desactivar"
-+            style="@style/Widget.Material3.Button.OutlinedButton"/>
-+    </LinearLayout>
-+</LinearLayout>
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_GestionGuiasActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_GestionGuiasActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_GestionGuiasActivity.java
-new file mode 100644
---- /dev/null	(date 1763325761436)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_GestionGuiasActivity.java	(date 1763325761436)
-@@ -0,0 +1,143 @@
-+package com.example.proyecto_2025.Activities_Superadmin;
-+
-+import android.os.Bundle;
-+import android.text.Editable;
-+import android.text.TextWatcher;
-+import android.widget.EditText;
-+import android.widget.TextView;
-+import android.widget.Toast;
-+
-+import androidx.annotation.Nullable;
-+import androidx.appcompat.app.AppCompatActivity;
-+import androidx.recyclerview.widget.LinearLayoutManager;
-+import androidx.recyclerview.widget.RecyclerView;
-+
-+import com.example.proyecto_2025.R;
-+import com.example.proyecto_2025.adapter.GuiasAdapter;
-+import com.example.proyecto_2025.model.Guia;
-+import com.google.android.material.button.MaterialButton;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.FieldValue;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.ListenerRegistration;
-+import com.google.firebase.firestore.Query;
-+
-+import java.util.ArrayList;
-+import java.util.Arrays;
-+import java.util.List;
-+import java.util.Locale;
-+
-+public class Superadmin_GestionGuiasActivity extends AppCompatActivity {
-+
-+    private RecyclerView rv;
-+    private EditText etBuscar;
-+    private MaterialButton btnAprobados, btnPendientes;
-+    private TextView tvTitulo;
-+
-+    private GuiasAdapter adapter;
-+    private GuiasAdapter.Mode mode = GuiasAdapter.Mode.APPROVED;
-+
-+    private final FirebaseFirestore db = FirebaseFirestore.getInstance();
-+    private ListenerRegistration reg;
-+    private final List<Guia> source = new ArrayList<>();
-+
-+    @Override
-+    protected void onCreate(@Nullable Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-+        setContentView(R.layout.screen_superadmin_guias);
-+
-+        rv          = findViewById(R.id.rvGuias);
-+        etBuscar    = findViewById(R.id.etBuscarGuia);
-+        btnAprobados= findViewById(R.id.btnAprobados);
-+        btnPendientes=findViewById(R.id.btnPendientes);
-+        tvTitulo    = findViewById(R.id.tvTituloLista);
-+
-+        rv.setLayoutManager(new LinearLayoutManager(this));
-+        adapter = new GuiasAdapter(mode, this::onToggle, this::onApprove, this::onReject);
-+        rv.setAdapter(adapter);
-+
-+        btnAprobados.setOnClickListener(v -> switchMode(GuiasAdapter.Mode.APPROVED));
-+        btnPendientes.setOnClickListener(v -> switchMode(GuiasAdapter.Mode.PENDING));
-+
-+        etBuscar.addTextChangedListener(new TextWatcher() {
-+            @Override public void beforeTextChanged(CharSequence s, int st, int c, int a) {}
-+            @Override public void onTextChanged(CharSequence s, int st, int b, int c) {}
-+            @Override public void afterTextChanged(Editable s) { applyFilter(s.toString()); }
-+        });
-+
-+        switchMode(GuiasAdapter.Mode.APPROVED);
-+    }
-+
-+    private void switchMode(GuiasAdapter.Mode m) {
-+        mode = m;
-+        tvTitulo.setText(m == GuiasAdapter.Mode.APPROVED ? "Guías registrados" : "Guías pendientes");
-+        adapter.setMode(mode);
-+        listenRealtime();
-+    }
-+
-+    private void listenRealtime() {
-+        if (reg != null) { reg.remove(); reg = null; }
-+
-+        Query q = db.collection("users").whereEqualTo("role", "guia");
-+        if (mode == GuiasAdapter.Mode.APPROVED) {
-+            q = q.whereIn("status", Arrays.asList("active","disabled"));
-+        } else {
-+            q = q.whereEqualTo("status", "pending");
-+        }
-+
-+        reg = q.addSnapshotListener((snap, err) -> {
-+            if (err != null) { toast(err.getMessage()); return; }
-+            source.clear();
-+            if (snap != null) {
-+                for (DocumentSnapshot d : snap.getDocuments()) {
-+                    Guia g = d.toObject(Guia.class);
-+                    if (g != null) { g.setUid(d.getId()); source.add(g); }
-+                }
-+            }
-+            applyFilter(etBuscar.getText()==null? "" : etBuscar.getText().toString());
-+        });
-+    }
-+
-+    private void applyFilter(String text) {
-+        String f = text.toLowerCase(Locale.ROOT).trim();
-+        List<Guia> out = new ArrayList<>();
-+        for (Guia g : source) {
-+            boolean ok = f.isEmpty()
-+                    || (g.getDisplayName() != null && g.getDisplayName().toLowerCase().contains(f))
-+                    || (g.getEmail() != null && g.getEmail().toLowerCase().contains(f));
-+            if (ok) out.add(g);
-+        }
-+        adapter.setData(out);
-+    }
-+
-+    // --- Actions ---
-+
-+    // Alterna active <-> disabled
-+    private void onToggle(Guia g) {
-+        String next = "active".equalsIgnoreCase(g.getStatus()) ? "disabled" : "active";
-+        db.collection("users").document(g.getUid())
-+                .update("status", next, "updatedAt", FieldValue.serverTimestamp())
-+                .addOnFailureListener(e -> toast(e.getMessage()));
-+    }
-+
-+    // Pasa pending -> active
-+    private void onApprove(Guia g) {
-+        db.collection("users").document(g.getUid())
-+                .update("status", "active", "updatedAt", FieldValue.serverTimestamp())
-+                .addOnFailureListener(e -> toast(e.getMessage()));
-+    }
-+
-+    // Rechaza: elimina doc (si quieres, elimina también del Auth via Cloud Function)
-+    private void onReject(Guia g) {
-+        db.collection("users").document(g.getUid())
-+                .delete()
-+                .addOnFailureListener(e -> toast(e.getMessage()));
-+    }
-+
-+    private void toast(String m) { Toast.makeText(this, m, Toast.LENGTH_LONG).show(); }
-+
-+    @Override protected void onDestroy() {
-+        super.onDestroy();
-+        if (reg != null) { reg.remove(); reg = null; }
-+    }
-+}
-Index: app/src/main/java/com/example/proyecto_2025/data/repository/GuiaRepository.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/data/repository/GuiaRepository.java b/app/src/main/java/com/example/proyecto_2025/data/repository/GuiaRepository.java
-new file mode 100644
---- /dev/null	(date 1763323588777)
-+++ b/app/src/main/java/com/example/proyecto_2025/data/repository/GuiaRepository.java	(date 1763323588777)
-@@ -0,0 +1,82 @@
-+package com.example.proyecto_2025.data.repository;
-+
-+import com.example.proyecto_2025.model.Guia;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.QueryDocumentSnapshot;
-+
-+import java.util.ArrayList;
-+import java.util.List;
-+
-+public class GuiaRepository {
-+
-+    private final FirebaseFirestore db = FirebaseFirestore.getInstance();
-+    private static GuiaRepository instance;
-+
-+    public static GuiaRepository get() {
-+        if (instance == null) instance = new GuiaRepository();
-+        return instance;
-+    }
-+
-+    // === Listar guías activos ===
-+    public void getGuiasActivos(Callback<List<Guia>> cb) {
-+        db.collection("users")
-+                .whereEqualTo("role", "guia")
-+                .whereEqualTo("status", "active")
-+                .get()
-+                .addOnSuccessListener(snaps -> {
-+                    List<Guia> list = new ArrayList<>();
-+                    for (QueryDocumentSnapshot d : snaps) {
-+                        Guia g = d.toObject(Guia.class);
-+                        list.add(g);
-+                    }
-+                    cb.onSuccess(list);
-+                })
-+                .addOnFailureListener(cb::onError);
-+    }
-+
-+    // === Listar guías pendientes ===
-+    public void getGuiasPendientes(Callback<List<Guia>> cb) {
-+        db.collection("users")
-+                .whereEqualTo("role", "guia")
-+                .whereEqualTo("status", "pending")
-+                .get()
-+                .addOnSuccessListener(snaps -> {
-+                    List<Guia> list = new ArrayList<>();
-+                    for (QueryDocumentSnapshot d : snaps) {
-+                        Guia g = d.toObject(Guia.class);
-+                        list.add(g);
-+                    }
-+                    cb.onSuccess(list);
-+                })
-+                .addOnFailureListener(cb::onError);
-+    }
-+
-+    // === Cambiar estado (activar/desactivar/rechazar) ===
-+    public void updateStatus(String uid, String status, Callback<Void> cb) {
-+        db.collection("users").document(uid)
-+                .update("status", status)
-+                .addOnSuccessListener(x -> cb.onSuccess(null))
-+                .addOnFailureListener(cb::onError);
-+    }
-+    public void getById(String uid, Callback<Guia> cb) {
-+        db.collection("users")
-+                .document(uid)
-+                .get()
-+                .addOnSuccessListener(doc -> {
-+                    if (doc.exists()) {
-+                        Guia g = doc.toObject(Guia.class);
-+                        cb.onSuccess(g);
-+                    } else {
-+                        cb.onError(new Exception("Guía no existe"));
-+                    }
-+                })
-+                .addOnFailureListener(cb::onError);
-+    }
-+
-+
-+    // === Callback genérico ===
-+    public interface Callback<T> {
-+        void onSuccess(T result);
-+        void onError(Exception e);
-+    }
-+}
-Index: app/src/main/res/layout/screen_superadmin_guias.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:padding=\"4dp\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <EditText\r\n        android:id=\"@+id/etBuscarGuia\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:hint=\"Buscar guia\"\r\n        android:drawableStart=\"@android:drawable/ic_menu_search\"\r\n        android:inputType=\"text\"\r\n        android:padding=\"12dp\"\r\n        android:background=\"@drawable/bg_input\"\r\n        android:layout_marginBottom=\"12dp\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/Etiqueta1\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Guias Registrados\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        android:layout_marginTop=\"16dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/etBuscarGuia\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"/>\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/recyclerView\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        android:layout_marginTop=\"24dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/Etiqueta1\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/screen_superadmin_guias.xml b/app/src/main/res/layout/screen_superadmin_guias.xml
---- a/app/src/main/res/layout/screen_superadmin_guias.xml	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/res/layout/screen_superadmin_guias.xml	(date 1762985585299)
-@@ -1,43 +1,67 @@
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<androidx.constraintlayout.widget.ConstraintLayout
-+    xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
--    android:padding="4dp"
-+    android:padding="8dp"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent">
- 
--    <EditText
--        android:id="@+id/etBuscarGuia"
--        android:layout_width="0dp"
--        android:layout_height="wrap_content"
--        android:hint="Buscar guia"
--        android:drawableStart="@android:drawable/ic_menu_search"
--        android:inputType="text"
--        android:padding="12dp"
--        android:background="@drawable/bg_input"
--        android:layout_marginBottom="12dp"
--        app:layout_constraintTop_toTopOf="parent"
--        app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintEnd_toEndOf="parent" />
-+    <LinearLayout
-+        android:id="@+id/rowFiltros"
-+        android:layout_width="0dp"
-+        android:layout_height="wrap_content"
-+        android:orientation="horizontal"
-+        android:gravity="center_vertical"
-+        app:layout_constraintTop_toTopOf="parent"
-+        app:layout_constraintStart_toStartOf="parent"
-+        app:layout_constraintEnd_toEndOf="parent">
-+
-+        <EditText
-+            android:id="@+id/etBuscarGuia"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_weight="1"
-+            android:hint="Buscar guía"
-+            android:drawableStart="@android:drawable/ic_menu_search"
-+            android:inputType="text"
-+            android:padding="12dp"
-+            android:background="@android:drawable/edit_text"/>
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnAprobados"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="Aprobados"
-+            style="@style/Widget.Material3.Button.OutlinedButton"
-+            android:layout_marginStart="8dp"/>
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnPendientes"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="Pendientes"
-+            style="@style/Widget.Material3.Button.OutlinedButton"
-+            android:layout_marginStart="4dp"/>
-+    </LinearLayout>
- 
-     <TextView
--        android:id="@+id/Etiqueta1"
-+        android:id="@+id/tvTituloLista"
-         android:layout_width="wrap_content"
-         android:layout_height="wrap_content"
--        android:text="Guias Registrados"
-+        android:text="Guías registrados"
-         android:textColor="#000000"
-         android:textSize="16sp"
-         android:textStyle="bold"
--        android:layout_marginTop="16dp"
--        app:layout_constraintTop_toBottomOf="@id/etBuscarGuia"
--        app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintEnd_toEndOf="parent"/>
-+        android:layout_marginTop="12dp"
-+        app:layout_constraintTop_toBottomOf="@id/rowFiltros"
-+        app:layout_constraintStart_toStartOf="parent"/>
- 
-     <androidx.recyclerview.widget.RecyclerView
--        android:id="@+id/recyclerView"
-+        android:id="@+id/rvGuias"
-         android:layout_width="0dp"
-         android:layout_height="0dp"
--        android:layout_marginTop="24dp"
--        app:layout_constraintTop_toBottomOf="@id/Etiqueta1"
-+        android:layout_marginTop="8dp"
-+        app:layout_constraintTop_toBottomOf="@id/tvTituloLista"
-         app:layout_constraintBottom_toBottomOf="parent"
-         app:layout_constraintEnd_toEndOf="parent"
--        app:layout_constraintStart_toStartOf="parent" />
-+        app:layout_constraintStart_toStartOf="parent"/>
- </androidx.constraintlayout.widget.ConstraintLayout>
-Index: app/src/main/java/com/example/proyecto_2025/adapter/GuideAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/adapter/GuideAdapter.java b/app/src/main/java/com/example/proyecto_2025/adapter/GuiasAdapter.java
-rename from app/src/main/java/com/example/proyecto_2025/adapter/GuideAdapter.java
-rename to app/src/main/java/com/example/proyecto_2025/adapter/GuiasAdapter.java
---- a/app/src/main/java/com/example/proyecto_2025/adapter/GuideAdapter.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/adapter/GuiasAdapter.java	(date 1763318932821)
-@@ -1,78 +1,123 @@
- package com.example.proyecto_2025.adapter;
- 
--import android.content.Context;
--import android.view.*;
--import android.widget.*;
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+import android.widget.TextView;
-+
- import androidx.annotation.NonNull;
- import androidx.recyclerview.widget.RecyclerView;
--import com.bumptech.glide.Glide;
-+
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.model.Guide;
--import java.util.*;
-+import com.example.proyecto_2025.model.Guia;
-+import com.google.android.material.button.MaterialButton;
-+
-+import java.util.ArrayList;
-+import java.util.List;
- 
--public class GuideAdapter extends RecyclerView.Adapter<GuideAdapter.VH> {
-+
-+public class GuiasAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {
-+
-+    public enum Mode { APPROVED, PENDING }
-+
-+    public interface Action<T> { void call(T t); }
-+
-+    private final List<Guia> data = new ArrayList<>();
-+    private Mode mode = Mode.APPROVED;
-+
-+    private final Action<Guia> onToggle;   // activar/desactivar operatividad de guias
-+    private final Action<Guia> onApprove;  // aprobar
-+    private final Action<Guia> onReject;   // rechazar
-+
-+    public GuiasAdapter(Mode mode,
-+                        Action<Guia> onToggle,
-+                        Action<Guia> onApprove,
-+                        Action<Guia> onReject) {
-+        this.mode = mode;
-+        this.onToggle = onToggle;
-+        this.onApprove = onApprove;
-+        this.onReject = onReject;
-+    }
-+
-+    public void setMode(Mode m) {
-+        this.mode = m;
-+        notifyDataSetChanged();
-+    }
-+
-+    public void setData(List<Guia> d) {
-+        data.clear();
-+        if (d != null) data.addAll(d);
-+        notifyDataSetChanged();
-+    }
-+
-+    @Override public int getItemViewType(int position) {
-+        return mode == Mode.APPROVED ? 1 : 2;
-+    }
-+
-+    @NonNull
-+    @Override public RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
-+        LayoutInflater inf = LayoutInflater.from(parent.getContext());
-+        if (viewType == 1) {
-+            View v = inf.inflate(R.layout.item_guia_aprobado, parent, false);
-+            return new VHApproved(v);
-+        } else {
-+            View v = inf.inflate(R.layout.item_guia_pendiente, parent, false);
-+            return new VHPending(v);
-+        }
-+    }
-+
-+    @Override public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {
-+        Guia g = data.get(position);
-+        if (holder instanceof VHApproved) {
-+            VHApproved h = (VHApproved) holder;
-+            h.tvNombre.setText(g.getDisplayName() == null ? "(sin nombre)" : g.getDisplayName());
-+            h.tvEmail.setText(g.getEmail() == null ? "" : g.getEmail());
-+            h.tvStatus.setText("status: " + (g.getStatus() == null ? "-" : g.getStatus()));
-+
-+            boolean isActive = "active".equalsIgnoreCase(g.getStatus());
-+            h.btnToggle.setText(isActive ? "Desactivar" : "Activar");
-+            h.btnToggle.setOnClickListener(v -> { if (onToggle != null) onToggle.call(g); });
-+
-+        } else if (holder instanceof VHPending) {
-+            VHPending h = (VHPending) holder;
-+            h.tvNombre.setText(g.getDisplayName() == null ? "(sin nombre)" : g.getDisplayName());
-+            h.tvEmail.setText(g.getEmail() == null ? "" : g.getEmail());
-+
-+            h.btnAprobar.setOnClickListener(v -> { if (onApprove != null) onApprove.call(g); });
-+            h.btnRechazar.setOnClickListener(v -> { if (onReject != null) onReject.call(g); });
-+        }
-+    }
-+
-+    @Override public int getItemCount() { return data.size(); }
-+
-     public interface OnAction {
--        void onProfile(Guide g);
--        void onOffer(Guide g);
--    }
-+        void onProfile(Guia g);
- 
--    private final List<Guide> data;
--    private final OnAction listener;
--
--    public GuideAdapter(Context ctx, List<Guide> data, OnAction l){
--        this.data = data;
--        this.listener = l;
-+        void onOffer(Guia g);
-     }
- 
--    @NonNull @Override
--    public VH onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
--        View v = LayoutInflater.from(parent.getContext())
--                .inflate(R.layout.item_guide_card, parent, false);
--        return new VH(v);
--    }
--
--    @Override
--    public void onBindViewHolder(@NonNull VH h, int i) {
--        Guide g = data.get(i);
--        h.name.setText(g.getName());
--        h.zone.setText(g.getZone());
--        h.rating.setText(String.format(Locale.getDefault(),"%.1f ★", g.getRating()));
--        h.langs.setText(g.getLanguages().toString()
--                .replace("[","").replace("]","").replace(","," · "));
--
--        Glide.with(h.itemView.getContext())
--                .load(g.getPhotoUrl())
--                .placeholder(R.drawable.ic_user_placeholder) // opcional
--                .error(R.drawable.ic_user_placeholder)       // opcional
--                .into(h.photo);
--
--        h.btnMore.setOnClickListener(v -> {
--            PopupMenu menu = new PopupMenu(v.getContext(), h.btnMore);
--            menu.getMenu().add(0, 1, 0, "Ver perfil");
--            menu.getMenu().add(0, 2, 1, "Ofertar");
--            menu.setOnMenuItemClickListener(mi -> {
--                int id = mi.getItemId();
--                if (id == 1) listener.onProfile(g);
--                else if (id == 2) listener.onOffer(g);
--                return true;
--            });
--            menu.show();
--        });
-+    // --- ViewHolders ---
-+    static class VHApproved extends RecyclerView.ViewHolder {
-+        TextView tvNombre, tvEmail, tvStatus;
-+        MaterialButton btnToggle;
-+        VHApproved(View v){
-+            super(v);
-+            tvNombre = v.findViewById(R.id.tvNombre);
-+            tvEmail  = v.findViewById(R.id.tvEmail);
-+            tvStatus = v.findViewById(R.id.tvStatus);
-+            btnToggle= v.findViewById(R.id.btnToggle);
-+        }
-     }
- 
--    @Override public int getItemCount(){ return data.size(); }
--
--    static class VH extends RecyclerView.ViewHolder{
--        ImageView photo; TextView name, zone, rating, langs; ImageButton btnMore;
--        VH(@NonNull View v){
-+    static class VHPending extends RecyclerView.ViewHolder {
-+        TextView tvNombre, tvEmail;
-+        MaterialButton btnAprobar, btnRechazar;
-+        VHPending(View v){
-             super(v);
--            photo   = v.findViewById(R.id.imgGuide);
--            name    = v.findViewById(R.id.tvName);
--            zone    = v.findViewById(R.id.tvZone);
--            rating  = v.findViewById(R.id.tvRating);
--            langs   = v.findViewById(R.id.tvLangs);
--            btnMore = v.findViewById(R.id.btnMore);
-+            tvNombre    = v.findViewById(R.id.tvNombre);
-+            tvEmail     = v.findViewById(R.id.tvEmail);
-+            btnAprobar  = v.findViewById(R.id.btnAprobar);
-+            btnRechazar = v.findViewById(R.id.btnRechazar);
-         }
-     }
- }
--
-Index: app/src/main/java/com/example/proyecto_2025/adapter/OfferAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.adapter;\r\n\r\nimport android.content.Context;\r\nimport android.view.*;\r\nimport android.widget.*;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.GuideRepository;\r\nimport com.example.proyecto_2025.data.TourRepository;\r\nimport com.example.proyecto_2025.model.Offer;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.*;\r\n\r\npublic class OfferAdapter extends RecyclerView.Adapter<OfferAdapter.VH> {\r\n    public interface OnAction { void onAssign(Offer o); void onDetail(Offer o); }\r\n    private final List<Offer> data; private final Context ctx; private final OnAction listener;\r\n    private final SimpleDateFormat sdf = new SimpleDateFormat(\"dd MMM HH:mm\", Locale.getDefault());\r\n\r\n    public OfferAdapter(Context c, List<Offer> d, OnAction l){ctx=c; data=d; listener=l;}\r\n\r\n    @NonNull @Override public VH onCreateViewHolder(@NonNull ViewGroup p, int v) {\r\n        return new VH(LayoutInflater.from(ctx).inflate(R.layout.item_offer_card, p, false));\r\n    }\r\n\r\n    @Override public void onBindViewHolder(@NonNull VH h, int i) {\r\n        Offer o = data.get(i);\r\n        String gName = GuideRepository.get().byId(o.getGuideId()).getName();\r\n        String tTitle = o.getTourId();        h.title.setText(tTitle);\r\n        h.subtitle.setText(gName+\" • \"+o.getPayMode()+\" • S/\"+String.format(Locale.getDefault(),\"%.2f\", o.getAmount()));\r\n        h.dates.setText(sdf.format(o.getStartDate())+\" — \"+sdf.format(o.getEndDate()));\r\n        h.status.setText(o.getStatus().name());\r\n\r\n        h.btnDetail.setOnClickListener(v->listener.onDetail(o));\r\n        h.btnAssign.setVisibility(o.getStatus()== Offer.Status.ACEPTADA ? View.VISIBLE : View.GONE);\r\n        h.btnAssign.setOnClickListener(v->listener.onAssign(o));\r\n    }\r\n\r\n    @Override public int getItemCount(){ return data.size(); }\r\n\r\n    static class VH extends RecyclerView.ViewHolder{\r\n        TextView title, subtitle, dates, status; Button btnDetail, btnAssign;\r\n        VH(@NonNull View v){\r\n            super(v);\r\n            title=v.findViewById(R.id.tvOfferTitle);\r\n            subtitle=v.findViewById(R.id.tvOfferSub);\r\n            dates=v.findViewById(R.id.tvOfferDates);\r\n            status=v.findViewById(R.id.tvOfferStatus);\r\n            btnDetail=v.findViewById(R.id.btnOfferDetail);\r\n            btnAssign=v.findViewById(R.id.btnOfferAssign);\r\n        }\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/adapter/OfferAdapter.java b/app/src/main/java/com/example/proyecto_2025/adapter/OfferAdapter.java
---- a/app/src/main/java/com/example/proyecto_2025/adapter/OfferAdapter.java	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/src/main/java/com/example/proyecto_2025/adapter/OfferAdapter.java	(date 1763322434598)
-@@ -6,8 +6,6 @@
- import androidx.annotation.NonNull;
- import androidx.recyclerview.widget.RecyclerView;
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.data.GuideRepository;
--import com.example.proyecto_2025.data.TourRepository;
- import com.example.proyecto_2025.model.Offer;
- import java.text.SimpleDateFormat;
- import java.util.*;
-Index: gradle/libs.versions.toml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>[versions]\r\nagp = \"8.12.3\"\r\ncompiler = \"5.0.5\"\r\ncoreKtx = \"1.17.0\"\r\nfirebaseBom = \"34.4.0\"\r\nglide = \"5.0.5\"\r\ngson = \"2.13.2\"\r\ngsonVersion = \"2.13.2\"\r\njunit = \"4.13.2\"\r\njunitVersion = \"1.3.0\"\r\nespressoCore = \"3.7.0\"\r\nappcompat = \"1.7.1\"\r\nmaterial = \"1.13.0\"\r\nactivity = \"1.11.0\"\r\nconstraintlayout = \"2.2.1\"\r\nmaterialVersion = \"1.12.0\"\r\nmpandroidchart = \"v3.1.0\"\r\nnavigationFragment = \"2.9.5\"\r\nnavigationUi = \"2.9.5\"\r\nosmdroidAndroid = \"6.1.20\"\r\npreference = \"1.2.1\"\r\nrecyclerview = \"1.4.0\"\r\nretrofit = \"3.0.0\"\r\nroomCompiler = \"2.8.2\"\r\nworkRuntime = \"2.10.5\"\r\n\r\n[libraries]\r\ncompiler = { module = \"com.github.bumptech.glide:compiler\", version.ref = \"compiler\" }\r\nconverter-gson = { module = \"com.squareup.retrofit2:converter-gson\", version.ref = \"retrofit\" }\r\ncore-ktx = { module = \"androidx.core:core-ktx\", version.ref = \"coreKtx\" }\r\nfirebase-analytics = { module = \"com.google.firebase:firebase-analytics\" }\r\nfirebase-auth = { module = \"com.google.firebase:firebase-auth\" }\r\nfirebase-bom = { module = \"com.google.firebase:firebase-bom\", version.ref = \"firebaseBom\" }\r\nfirebase-firestore = { module = \"com.google.firebase:firebase-firestore\" }\r\nglide = { module = \"com.github.bumptech.glide:glide\", version.ref = \"glide\" }\r\ngson = { module = \"com.google.code.gson:gson\", version.ref = \"gson\" }\r\ngson-v2101 = { module = \"com.google.code.gson:gson\", version.ref = \"gsonVersion\" }\r\njunit = { group = \"junit\", name = \"junit\", version.ref = \"junit\" }\r\next-junit = { group = \"androidx.test.ext\", name = \"junit\", version.ref = \"junitVersion\" }\r\nespresso-core = { group = \"androidx.test.espresso\", name = \"espresso-core\", version.ref = \"espressoCore\" }\r\nappcompat = { group = \"androidx.appcompat\", name = \"appcompat\", version.ref = \"appcompat\" }\r\nmaterial = { group = \"com.google.android.material\", name = \"material\", version.ref = \"material\" }\r\nactivity = { group = \"androidx.activity\", name = \"activity\", version.ref = \"activity\" }\r\nconstraintlayout = { group = \"androidx.constraintlayout\", name = \"constraintlayout\", version.ref = \"constraintlayout\" }\r\nmaterial-v1120 = { module = \"com.google.android.material:material\", version.ref = \"materialVersion\" }\r\nmpandroidchart = { module = \"com.github.PhilJay:MPAndroidChart\", version.ref = \"mpandroidchart\" }\r\nnavigation-fragment = { group = \"androidx.navigation\", name = \"navigation-fragment\", version.ref = \"navigationFragment\" }\r\nnavigation-ui = { group = \"androidx.navigation\", name = \"navigation-ui\", version.ref = \"navigationUi\" }\r\nosmdroid-android = { module = \"org.osmdroid:osmdroid-android\", version.ref = \"osmdroidAndroid\" }\r\npreference = { group = \"androidx.preference\", name = \"preference\", version.ref = \"preference\" }\r\nrecyclerview = { module = \"androidx.recyclerview:recyclerview\", version.ref = \"recyclerview\" }\r\nretrofit = { module = \"com.squareup.retrofit2:retrofit\", version.ref = \"retrofit\" }\r\nroom-compiler = { module = \"androidx.room:room-compiler\", version.ref = \"roomCompiler\" }\r\nroom-runtime = { module = \"androidx.room:room-runtime\", version.ref = \"roomCompiler\" }\r\nwork-runtime = { module = \"androidx.work:work-runtime\", version.ref = \"workRuntime\" }\r\n\r\n[plugins]\r\nandroid-application = { id = \"com.android.application\", version.ref = \"agp\" }\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
---- a/gradle/libs.versions.toml	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/gradle/libs.versions.toml	(date 1762193266103)
-@@ -32,6 +32,7 @@
- firebase-auth = { module = "com.google.firebase:firebase-auth" }
- firebase-bom = { module = "com.google.firebase:firebase-bom", version.ref = "firebaseBom" }
- firebase-firestore = { module = "com.google.firebase:firebase-firestore" }
-+firebase-functions = { module = "com.google.firebase:firebase-functions" }
- glide = { module = "com.github.bumptech.glide:glide", version.ref = "glide" }
- gson = { module = "com.google.code.gson:gson", version.ref = "gson" }
- gson-v2101 = { module = "com.google.code.gson:gson", version.ref = "gsonVersion" }
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    alias(libs.plugins.android.application)\r\n    id 'com.google.gms.google-services'\r\n}\r\n\r\nandroid {\r\n    namespace 'com.example.proyecto_2025'\r\n    compileSdk 36\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.proyecto_2025\"\r\n        minSdk 31\r\n        targetSdk 36\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n    buildFeatures { viewBinding true } // si aún no lo tienes\r\n    sourceSets {\r\n        main {\r\n            res.srcDirs = [\r\n                    \"src/main/res\",\r\n            ]\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation libs.appcompat\r\n    implementation libs.material\r\n    implementation libs.activity\r\n    implementation libs.constraintlayout\r\n    implementation libs.navigation.fragment\r\n    implementation libs.navigation.ui\r\n    implementation libs.preference\r\n    testImplementation libs.junit\r\n    androidTestImplementation libs.ext.junit\r\n    androidTestImplementation libs.espresso.core\r\n    implementation libs.osmdroid.android\r\n    implementation libs.glide\r\n\r\n    implementation libs.retrofit\r\n    implementation libs.converter.gson\r\n    implementation libs.gson\r\n    annotationProcessor libs.compiler // ✅ necesario para Glide\r\n    implementation libs.mpandroidchart\r\n\r\n    implementation libs.core.ktx\r\n    implementation libs.recyclerview\r\n\r\n    // ROOM\r\n    implementation libs.room.runtime\r\n    annotationProcessor libs.room.compiler\r\n\r\n    // WORKMANAGER (recordatorios)\r\n    implementation libs.work.runtime\r\n\r\n    implementation platform(libs.firebase.bom)\r\n    implementation libs.firebase.analytics\r\n    implementation libs.firebase.auth\r\n    implementation libs.firebase.firestore\r\n\r\n    implementation libs.material.v1120\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle b/app/build.gradle
---- a/app/build.gradle	(revision c41306083e1eefe2b19808b11749a2debe57da9d)
-+++ b/app/build.gradle	(date 1762193266097)
-@@ -69,6 +69,7 @@
-     implementation libs.work.runtime
- 
-     implementation platform(libs.firebase.bom)
-+    implementation libs.firebase.functions
-     implementation libs.firebase.analytics
-     implementation libs.firebase.auth
-     implementation libs.firebase.firestore
Index: .idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38__Changes_.xml	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
+++ /dev/null	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_16_11_2025_19_38_[Changes]" date="1763339942187" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_16_11_2025_19_38_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 16/11/2025 19:38 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41__Changes_1.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41__Changes_1.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41__Changes_1.xml	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
+++ /dev/null	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_17_11_2025_04_41_[Changes]1" date="1763373377120" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41_[Changes]1/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 17/11/2025 04:41 [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41_[Changes]1/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41_[Changes]1/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_17_11_2025_04_41_[Changes]1/shelved.patch	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
+++ /dev/null	(revision 6bd3a5692a0dadfa0a245867690281de4230e5cc)
@@ -1,567 +0,0 @@
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.*;\r\nimport com.example.proyecto_2025.model.*;\r\n\r\npublic class AssignGuideActivity extends AppCompatActivity {\r\n    @SuppressLint(\"SetTextI18n\")\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.assign_guide);\r\n\r\n        String offerId = getIntent().getStringExtra(\"offerId\");\r\n        com.example.proyecto_2025.model.Offer o =\r\n                com.example.proyecto_2025.data.OfferRepository.get().byId(offerId);\r\n        com.example.proyecto_2025.model.Guide g =\r\n                com.example.proyecto_2025.data.GuideRepository.get().byId(o.getGuideId());\r\n\r\n        TextView tv = findViewById(R.id.tvSummary);\r\n        // Usamos el ID de tour como placeholder hasta enlazar tu TourRepository real\r\n        String tourDisplay = (o.getTourId() != null) ? o.getTourId() : \"(sin tour)\";\r\n        tv.setText(\"Tour: \" + tourDisplay\r\n                + \"\\nGuía: \" + (g != null ? g.getName() : \"(desconocido)\")\r\n                + \"\\nPago: \" + o.getPayMode() + \" S/\" + o.getAmount());\r\n\r\n        Button btn = findViewById(R.id.btnConfirm);\r\n        btn.setOnClickListener(v -> {\r\n            // Aquí solo confirmamos. Cuando integremos con tu TourRepository real,\r\n            // marcamos el tour como \"con guía\".\r\n            android.widget.Toast.makeText(this, \"Guía asignado.\", android.widget.Toast.LENGTH_LONG).show();\r\n            finish();\r\n        });\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java	(revision 733feaf55ac5fc4b53ac43a82a34322bd3fca414)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/AssignGuideActivity.java	(date 1763339941568)
-@@ -5,36 +5,89 @@
- import android.widget.Button;
- import android.widget.TextView;
- import android.widget.Toast;
-+
- import androidx.appcompat.app.AppCompatActivity;
-+
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.data.*;
--import com.example.proyecto_2025.model.*;
-+import com.example.proyecto_2025.data.OfferRepository;
-+import com.example.proyecto_2025.data.repository.GuiaRepository;
-+import com.example.proyecto_2025.model.Guia;
-+import com.example.proyecto_2025.model.Offer;
-+
-+import java.util.List;
- 
- public class AssignGuideActivity extends AppCompatActivity {
-+
-     @SuppressLint("SetTextI18n")
--    @Override protected void onCreate(Bundle b){
-+    @Override
-+    protected void onCreate(Bundle b) {
-         super.onCreate(b);
-         setContentView(R.layout.assign_guide);
- 
-         String offerId = getIntent().getStringExtra("offerId");
--        com.example.proyecto_2025.model.Offer o =
--                com.example.proyecto_2025.data.OfferRepository.get().byId(offerId);
--        com.example.proyecto_2025.model.Guide g =
--                com.example.proyecto_2025.data.GuideRepository.get().byId(o.getGuideId());
-+        if (offerId == null) {
-+            Toast.makeText(this, "Oferta no especificada", Toast.LENGTH_LONG).show();
-+            finish();
-+            return;
-+        }
-+
-+        // OfferRepository sigue siendo síncrono (byId)
-+        Offer o = OfferRepository.get().byId(offerId);
-+        if (o == null) {
-+            Toast.makeText(this, "Oferta no encontrada", Toast.LENGTH_LONG).show();
-+            finish();
-+            return;
-+        }
- 
-         TextView tv = findViewById(R.id.tvSummary);
--        // Usamos el ID de tour como placeholder hasta enlazar tu TourRepository real
--        String tourDisplay = (o.getTourId() != null) ? o.getTourId() : "(sin tour)";
--        tv.setText("Tour: " + tourDisplay
--                + "\nGuía: " + (g != null ? g.getName() : "(desconocido)")
--                + "\nPago: " + o.getPayMode() + " S/" + o.getAmount());
-+        Button btn = findViewById(R.id.btnConfirm);
-+        btn.setEnabled(false); // se habilita cuando carguemos al guía
-+
-+        // Cargar guías activos y buscar el que corresponde a la oferta
-+        GuiaRepository.get().getGuiasActivos(
-+                new GuiaRepository.Callback<List<Guia>>() {
-+                    @Override
-+                    public void onSuccess(List<Guia> result) {
-+                        Guia guia = null;
-+                        if (result != null && o.getGuideId() != null) {
-+                            for (Guia g : result) {
-+                                // asumiendo que Guia tiene getUid() que coincide con guideId
-+                                if (g.getUid() != null && g.getUid().equals(o.getGuideId())) {
-+                                    guia = g;
-+                                    break;
-+                                }
-+                            }
-+                        }
-+
-+                        String tourDisplay = (o.getTourId() != null) ? o.getTourId() : "(sin tour)";
-+                        String guiaNombre;
-+                        if (guia != null && guia.getDisplayName() != null && !guia.getDisplayName().isEmpty()) {
-+                            guiaNombre = guia.getDisplayName();
-+                        } else {
-+                            guiaNombre = "(desconocido)";
-+                        }
-+
-+                        tv.setText("Tour: " + tourDisplay
-+                                + "\nGuía: " + guiaNombre
-+                                + "\nPago: " + o.getPayMode() + " S/" + o.getAmount());
- 
--        Button btn = findViewById(R.id.btnConfirm);
--        btn.setOnClickListener(v -> {
--            // Aquí solo confirmamos. Cuando integremos con tu TourRepository real,
--            // marcamos el tour como "con guía".
--            android.widget.Toast.makeText(this, "Guía asignado.", android.widget.Toast.LENGTH_LONG).show();
--            finish();
--        });
-+                        btn.setEnabled(true);
-+                        btn.setOnClickListener(v -> {
-+                            // Aquí solo confirmamos. Cuando integres TourRepository,
-+                            // podrás marcar el tour como "con guía".
-+                            Toast.makeText(AssignGuideActivity.this,
-+                                    "Guía asignado.", Toast.LENGTH_LONG).show();
-+                            finish();
-+                        });
-+                    }
-+
-+                    @Override
-+                    public void onError(Exception e) {
-+                        Toast.makeText(AssignGuideActivity.this,
-+                                "Error al cargar guía: " + e.getMessage(),
-+                                Toast.LENGTH_LONG).show();
-+                        finish();
-+                    }
-+                });
-     }
- }
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Superadmin;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.example.proyecto_2025.BaseActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminAdministradoresSedeBinding;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminRegistrarAdministradorBinding;\r\nimport com.google.android.material.dialog.MaterialAlertDialogBuilder;\r\n\r\npublic class Superadmin_Registrar_Administrador extends AppCompatActivity {\r\n\r\n    private ActivitySuperadminRegistrarAdministradorBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivitySuperadminRegistrarAdministradorBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        binding.btnRegistrarAdministrador.setOnClickListener(view ->\r\n                RegistrarAdministrador());\r\n    }\r\n\r\n    public void RegistrarAdministrador() {\r\n        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);\r\n        dialogBuilder.setTitle(\"Registrar Administrador\");\r\n        dialogBuilder.setMessage(\"¿Está seguro de registrar este usuario?\");\r\n        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn neutral\"));\r\n        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn positivo\"));\r\n        dialogBuilder.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java	(revision 733feaf55ac5fc4b53ac43a82a34322bd3fca414)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Registrar_Administrador.java	(date 1763339941689)
-@@ -1,24 +1,22 @@
- package com.example.proyecto_2025.Activities_Superadmin;
- 
- import android.os.Bundle;
--import android.util.Log;
--
--import androidx.activity.EdgeToEdge;
-+import android.text.TextUtils;
-+import android.widget.Toast;
- import androidx.annotation.Nullable;
- import androidx.appcompat.app.AppCompatActivity;
--import androidx.core.graphics.Insets;
--import androidx.core.view.ViewCompat;
--import androidx.core.view.WindowInsetsCompat;
- 
--import com.example.proyecto_2025.BaseActivity;
--import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.databinding.ActivitySuperadminAdministradoresSedeBinding;
- import com.example.proyecto_2025.databinding.ActivitySuperadminRegistrarAdministradorBinding;
--import com.google.android.material.dialog.MaterialAlertDialogBuilder;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.functions.FirebaseFunctions;
-+
-+import java.util.HashMap;
-+import java.util.Map;
- 
- public class Superadmin_Registrar_Administrador extends AppCompatActivity {
- 
-     private ActivitySuperadminRegistrarAdministradorBinding binding;
-+    private FirebaseFunctions functions;
- 
-     @Override
-     protected void onCreate(@Nullable Bundle savedInstanceState) {
-@@ -26,16 +24,67 @@
-         binding = ActivitySuperadminRegistrarAdministradorBinding.inflate(getLayoutInflater());
-         setContentView(binding.getRoot());
- 
--        binding.btnRegistrarAdministrador.setOnClickListener(view ->
--                RegistrarAdministrador());
-+        functions = FirebaseFunctions.getInstance();
-+
-+        binding.btnRegistrarAdministrador.setOnClickListener(v -> registrarAdministrador());
-+    }
-+
-+    private void registrarAdministrador() {
-+        String nombre    = txt(binding.etNombre);
-+        String dni       = txt(binding.etDni);
-+        String email     = txt(binding.etEmail);
-+        String password  = txt(binding.etPassword);
-+        String companyId = txt(binding.etCompanyId);
-+        String telefono  = txt(binding.etTelefono);
-+        String domicilio = txt(binding.etDomicilio);
-+
-+        // Validaciones mínimas
-+        if (TextUtils.isEmpty(nombre) || TextUtils.isEmpty(email) ||
-+                TextUtils.isEmpty(password) || TextUtils.isEmpty(companyId) ||
-+                TextUtils.isEmpty(dni)) {
-+            toast("Completa nombre, DNI, email, contraseña y companyId.");
-+            return;
-+        }
-+        if (dni.length() != 8) { toast("DNI debe tener 8 dígitos."); return; }
-+        if (password.length() < 6) { toast("La contraseña debe tener al menos 6 caracteres."); return; }
-+
-+        binding.btnRegistrarAdministrador.setEnabled(false);
-+
-+        Map<String, Object> data = new HashMap<>();
-+        data.put("displayName", nombre);
-+        data.put("email", email);
-+        data.put("password", password);
-+        data.put("dni", dni);
-+        data.put("phone", emptyToNull(telefono));
-+        data.put("address", emptyToNull(domicilio));
-+        data.put("companyId", companyId);
-+
-+        // Llama a la Cloud Function createAdmin
-+        functions
-+                .getHttpsCallable("createAdmin")
-+                .call(data)
-+                .continueWith(task -> {
-+                    binding.btnRegistrarAdministrador.setEnabled(true);
-+                    if (!task.isSuccessful()) {
-+                        Exception e = task.getException();
-+                        throw e != null ? e : new Exception("Error desconocido");
-+                    }
-+                    return task.getResult();
-+                })
-+                .addOnSuccessListener(result -> {
-+                    toast("Administrador creado correctamente.");
-+                    finish(); // opcional
-+                })
-+                .addOnFailureListener(e -> {
-+                    toast("Error: " + e.getMessage());
-+                });
-+    }
-+
-+    private String txt(com.google.android.material.textfield.TextInputEditText e) {
-+        return e.getText() == null ? "" : e.getText().toString().trim();
-     }
- 
--    public void RegistrarAdministrador() {
--        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);
--        dialogBuilder.setTitle("Registrar Administrador");
--        dialogBuilder.setMessage("¿Está seguro de registrar este usuario?");
--        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d("msg-test","btn neutral"));
--        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d("msg-test","btn positivo"));
--        dialogBuilder.show();
--    }
--}
-\ No newline at end of file
-+    private Object emptyToNull(String s) { return s.isEmpty() ? null : s; }
-+
-+    private void toast(String m){ Toast.makeText(this, m, Toast.LENGTH_LONG).show(); }
-+}
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Superadmin;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.example.proyecto_2025.BaseActivity;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminAdministradoresSedeBinding;\r\nimport com.example.proyecto_2025.databinding.ActivitySuperadminClientesBinding;\r\nimport com.google.android.material.dialog.MaterialAlertDialogBuilder;\r\n\r\npublic class Superadmin_Clientes extends BaseActivity {\r\n\r\n    private ActivitySuperadminClientesBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivitySuperadminClientesBinding.inflate(getLayoutInflater());\r\n        setActivityContent(binding.getRoot());\r\n\r\n        binding.btn1.setOnClickListener(view ->\r\n                activarCliente());\r\n\r\n        binding.btn2.setOnClickListener(view ->\r\n                desactivarCliente());\r\n\r\n        binding.InfoCliente1.setOnClickListener(v -> {\r\n            // Creamos un Intent para ir a OtraActivity\r\n            Intent intent = new Intent(this, Superadmin_Ver_Cliente.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        binding.InfoCliente2.setOnClickListener(v -> {\r\n            // Creamos un Intent para ir a OtraActivity\r\n            Intent intent = new Intent(this, Superadmin_Ver_Cliente.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    public void activarCliente() {\r\n        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);\r\n        dialogBuilder.setTitle(\"Activar Cliente\");\r\n        dialogBuilder.setMessage(\"¿Está seguro de activar este usuario?\");\r\n        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn neutral\"));\r\n        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn positivo\"));\r\n        dialogBuilder.show();\r\n    }\r\n    public void desactivarCliente() {\r\n        MaterialAlertDialogBuilder dialogBuilder = new MaterialAlertDialogBuilder(this);\r\n        dialogBuilder.setTitle(\"Desactivar Cliente\");\r\n        dialogBuilder.setMessage(\"¿Está seguro de desactivar este usuario?\");\r\n        dialogBuilder.setNeutralButton(R.string.cancel, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn neutral\"));\r\n        dialogBuilder.setPositiveButton(R.string.ok, (dialogInterface, i) -> Log.d(\"msg-test\",\"btn positivo\"));\r\n        dialogBuilder.show();\r\n    }\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java	(revision 733feaf55ac5fc4b53ac43a82a34322bd3fca414)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Superadmin/Superadmin_Clientes.java	(date 1763339941591)
-@@ -19,12 +19,10 @@
- 
- public class Superadmin_Clientes extends BaseActivity {
- 
--    private ActivitySuperadminClientesBinding binding;
--
-     @Override
-     protected void onCreate(@Nullable Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
--        binding = ActivitySuperadminClientesBinding.inflate(getLayoutInflater());
-+        ActivitySuperadminClientesBinding binding = ActivitySuperadminClientesBinding.inflate(getLayoutInflater());
-         setActivityContent(binding.getRoot());
- 
-         binding.btn1.setOnClickListener(view ->
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.EditText;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.adapter.GuideAdapter;\r\nimport com.example.proyecto_2025.data.GuideRepository;\r\nimport com.example.proyecto_2025.model.Guide;\r\nimport java.util.*;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class GuideDirectoryActivity extends AppCompatActivity implements GuideAdapter.OnAction {\r\n    private List<Guide> base = new ArrayList<>();\r\n    private List<Guide> view = new ArrayList<>();\r\n    private GuideAdapter adapter;\r\n\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.guide_directory);\r\n\r\n        base = GuideRepository.get().all();\r\n        view.addAll(base);\r\n\r\n        RecyclerView rv = findViewById(R.id.rvGuides);\r\n        rv.setLayoutManager(new LinearLayoutManager(this));\r\n        adapter = new GuideAdapter(this, view, this);\r\n        rv.setAdapter(adapter);\r\n\r\n        EditText etSearch = findViewById(R.id.etSearch);\r\n        etSearch.addTextChangedListener(new android.text.TextWatcher(){\r\n            public void beforeTextChanged(CharSequence s,int a,int b,int c){}\r\n            public void onTextChanged(CharSequence s,int a,int b,int c){\r\n                String q = s.toString().toLowerCase(Locale.getDefault());\r\n                view.clear();\r\n                view.addAll(base.stream().filter(g ->\r\n                        g.getName().toLowerCase(Locale.getDefault()).contains(q) ||\r\n                                g.getZone().toLowerCase(Locale.getDefault()).contains(q)\r\n                ).collect(Collectors.toList()));\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n            public void afterTextChanged(android.text.Editable s){}\r\n        });\r\n    }\r\n\r\n    @Override public void onProfile(Guide g) {\r\n        Intent i = new Intent(this, GuideProfileActivity.class);\r\n        i.putExtra(\"guide\", g);\r\n        startActivity(i);\r\n    }\r\n\r\n    @Override public void onOffer(Guide g) {\r\n        Intent i = new Intent(this, OfferCreateActivity.class);\r\n        i.putExtra(\"guide\", g);\r\n        startActivity(i);\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java	(revision 733feaf55ac5fc4b53ac43a82a34322bd3fca414)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/GuideDirectoryActivity.java	(date 1763339941604)
-@@ -2,59 +2,125 @@
- 
- import android.content.Intent;
- import android.os.Bundle;
-+import android.text.Editable;
-+import android.text.TextWatcher;
- import android.widget.EditText;
-+
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
-+
- import com.example.proyecto_2025.R;
--import com.example.proyecto_2025.adapter.GuideAdapter;
--import com.example.proyecto_2025.data.GuideRepository;
--import com.example.proyecto_2025.model.Guide;
--import java.util.*;
-+import com.example.proyecto_2025.adapter.GuiasAdapter;
-+import com.example.proyecto_2025.data.repository.GuiaRepository;
-+import com.example.proyecto_2025.model.Guia;
-+import com.google.android.material.snackbar.Snackbar;
-+
-+import java.util.ArrayList;
-+import java.util.List;
-+import java.util.Locale;
- import java.util.stream.Collectors;
- 
--public class GuideDirectoryActivity extends AppCompatActivity implements GuideAdapter.OnAction {
--    private List<Guide> base = new ArrayList<>();
--    private List<Guide> view = new ArrayList<>();
--    private GuideAdapter adapter;
-+public class GuideDirectoryActivity extends AppCompatActivity {
- 
--    @Override protected void onCreate(Bundle b){
--        super.onCreate(b);
-+    private final List<Guia> base = new ArrayList<>();
-+    private final List<Guia> filtered = new ArrayList<>();
-+    private GuiasAdapter adapter;
-+
-+    @Override
-+    protected void onCreate(Bundle savedInstanceState) {
-+        super.onCreate(savedInstanceState);
-         setContentView(R.layout.guide_directory);
- 
--        base = GuideRepository.get().all();
--        view.addAll(base);
--
-+        // RecyclerView
-         RecyclerView rv = findViewById(R.id.rvGuides);
-         rv.setLayoutManager(new LinearLayoutManager(this));
--        adapter = new GuideAdapter(this, view, this);
-+
-+        // GuiasAdapter: usamos Mode.APPROVED y reasignamos las acciones
-+        adapter = new GuiasAdapter(
-+                GuiasAdapter.Mode.APPROVED,
-+                // onToggle -> ver perfil
-+                g -> {
-+                    Intent i = new Intent(GuideDirectoryActivity.this,
-+                            GuideProfileActivity.class);
-+                    i.putExtra("guia", g);
-+                    startActivity(i);
-+                },
-+                // onApprove -> crear oferta
-+                g -> {
-+                    Intent i = new Intent(GuideDirectoryActivity.this,
-+                            OfferCreateActivity.class);
-+                    i.putExtra("guia", g);
-+                    startActivity(i);
-+                },
-+                // onReject -> por ahora solo mensaje
-+                g -> Snackbar.make(
-+                        findViewById(android.R.id.content),
-+                        "Acción de rechazo no implementada aún",
-+                        Snackbar.LENGTH_SHORT
-+                ).show()
-+        );
-         rv.setAdapter(adapter);
- 
-+        // Cargar guías activos desde Firestore
-+        cargarGuiasActivos();
-+
-+        // Buscador
-         EditText etSearch = findViewById(R.id.etSearch);
--        etSearch.addTextChangedListener(new android.text.TextWatcher(){
--            public void beforeTextChanged(CharSequence s,int a,int b,int c){}
--            public void onTextChanged(CharSequence s,int a,int b,int c){
-+        etSearch.addTextChangedListener(new TextWatcher() {
-+            @Override public void beforeTextChanged(CharSequence s, int a, int b, int c) {}
-+            @Override public void afterTextChanged(Editable s) {}
-+
-+            @Override
-+            public void onTextChanged(CharSequence s, int a, int b, int c) {
-                 String q = s.toString().toLowerCase(Locale.getDefault());
--                view.clear();
--                view.addAll(base.stream().filter(g ->
--                        g.getName().toLowerCase(Locale.getDefault()).contains(q) ||
--                                g.getZone().toLowerCase(Locale.getDefault()).contains(q)
--                ).collect(Collectors.toList()));
--                adapter.notifyDataSetChanged();
-+                aplicarFiltro(q);
-             }
--            public void afterTextChanged(android.text.Editable s){}
--        });
-+        });
-+    }
-+
-+    private void cargarGuiasActivos() {
-+        GuiaRepository.get().getGuiasActivos(
-+                new GuiaRepository.Callback<List<Guia>>() {
-+                    @Override
-+                    public void onSuccess(List<Guia> result) {
-+                        base.clear();
-+                        if (result != null) base.addAll(result);
-+
-+                        // Sin filtro inicial: mostrar todo
-+                        aplicarFiltro("");
-+                    }
-+
-+                    @Override
-+                    public void onError(Exception e) {
-+                        base.clear();
-+                        filtered.clear();
-+                        adapter.setData(filtered);
-+                        Snackbar.make(findViewById(android.R.id.content),
-+                                "Error cargando guías", Snackbar.LENGTH_SHORT).show();
-+                    }
-+                });
-     }
- 
--    @Override public void onProfile(Guide g) {
--        Intent i = new Intent(this, GuideProfileActivity.class);
--        i.putExtra("guide", g);
--        startActivity(i);
--    }
-+    private void aplicarFiltro(String q) {
-+        filtered.clear();
-+
-+        if (q == null || q.isEmpty()) {
-+            filtered.addAll(base);
-+        } else {
-+            filtered.addAll(
-+                    base.stream()
-+                            .filter(g ->
-+                                    (g.getName() != null &&
-+                                            g.getName().toLowerCase(Locale.getDefault()).contains(q))
-+                                            ||
-+                                            (g.getZone() != null &&
-+                                                    g.getZone().toLowerCase(Locale.getDefault()).contains(q))
-+                            )
-+                            .collect(Collectors.toList())
-+            );
-+        }
- 
--    @Override public void onOffer(Guide g) {
--        Intent i = new Intent(this, OfferCreateActivity.class);
--        i.putExtra("guide", g);
--        startActivity(i);
-+        adapter.setData(filtered);
-     }
- }
-Index: app/src/main/res/layout/screen_superadmin_guias.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:padding=\"4dp\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n\r\n    <EditText\r\n        android:id=\"@+id/etBuscarGuia\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:hint=\"Buscar guia\"\r\n        android:drawableStart=\"@android:drawable/ic_menu_search\"\r\n        android:inputType=\"text\"\r\n        android:padding=\"12dp\"\r\n        android:background=\"@drawable/bg_input\"\r\n        android:layout_marginBottom=\"12dp\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/Etiqueta1\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Guias Registrados\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        android:layout_marginTop=\"16dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/etBuscarGuia\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"/>\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/recyclerView\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        android:layout_marginTop=\"24dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/Etiqueta1\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/screen_superadmin_guias.xml b/app/src/main/res/layout/screen_superadmin_guias.xml
---- a/app/src/main/res/layout/screen_superadmin_guias.xml	(revision 733feaf55ac5fc4b53ac43a82a34322bd3fca414)
-+++ b/app/src/main/res/layout/screen_superadmin_guias.xml	(date 1763339941739)
-@@ -1,43 +1,67 @@
--<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+<androidx.constraintlayout.widget.ConstraintLayout
-+    xmlns:android="http://schemas.android.com/apk/res/android"
-     xmlns:app="http://schemas.android.com/apk/res-auto"
--    android:padding="4dp"
-+    android:padding="8dp"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent">
- 
--    <EditText
--        android:id="@+id/etBuscarGuia"
--        android:layout_width="0dp"
--        android:layout_height="wrap_content"
--        android:hint="Buscar guia"
--        android:drawableStart="@android:drawable/ic_menu_search"
--        android:inputType="text"
--        android:padding="12dp"
--        android:background="@drawable/bg_input"
--        android:layout_marginBottom="12dp"
--        app:layout_constraintTop_toTopOf="parent"
--        app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintEnd_toEndOf="parent" />
-+    <LinearLayout
-+        android:id="@+id/rowFiltros"
-+        android:layout_width="0dp"
-+        android:layout_height="wrap_content"
-+        android:orientation="horizontal"
-+        android:gravity="center_vertical"
-+        app:layout_constraintTop_toTopOf="parent"
-+        app:layout_constraintStart_toStartOf="parent"
-+        app:layout_constraintEnd_toEndOf="parent">
-+
-+        <EditText
-+            android:id="@+id/etBuscarGuia"
-+            android:layout_width="0dp"
-+            android:layout_height="wrap_content"
-+            android:layout_weight="1"
-+            android:hint="Buscar guía"
-+            android:drawableStart="@android:drawable/ic_menu_search"
-+            android:inputType="text"
-+            android:padding="12dp"
-+            android:background="@android:drawable/edit_text"/>
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnAprobados"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="Aprobados"
-+            style="@style/Widget.Material3.Button.OutlinedButton"
-+            android:layout_marginStart="8dp"/>
-+
-+        <com.google.android.material.button.MaterialButton
-+            android:id="@+id/btnPendientes"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="Pendientes"
-+            style="@style/Widget.Material3.Button.OutlinedButton"
-+            android:layout_marginStart="4dp"/>
-+    </LinearLayout>
- 
-     <TextView
--        android:id="@+id/Etiqueta1"
-+        android:id="@+id/tvTituloLista"
-         android:layout_width="wrap_content"
-         android:layout_height="wrap_content"
--        android:text="Guias Registrados"
-+        android:text="Guías registrados"
-         android:textColor="#000000"
-         android:textSize="16sp"
-         android:textStyle="bold"
--        android:layout_marginTop="16dp"
--        app:layout_constraintTop_toBottomOf="@id/etBuscarGuia"
--        app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintEnd_toEndOf="parent"/>
-+        android:layout_marginTop="12dp"
-+        app:layout_constraintTop_toBottomOf="@id/rowFiltros"
-+        app:layout_constraintStart_toStartOf="parent"/>
- 
-     <androidx.recyclerview.widget.RecyclerView
--        android:id="@+id/recyclerView"
-+        android:id="@+id/rvGuias"
-         android:layout_width="0dp"
-         android:layout_height="0dp"
--        android:layout_marginTop="24dp"
--        app:layout_constraintTop_toBottomOf="@id/Etiqueta1"
-+        android:layout_marginTop="8dp"
-+        app:layout_constraintTop_toBottomOf="@id/tvTituloLista"
-         app:layout_constraintBottom_toBottomOf="parent"
-         app:layout_constraintEnd_toEndOf="parent"
--        app:layout_constraintStart_toStartOf="parent" />
-+        app:layout_constraintStart_toStartOf="parent"/>
- </androidx.constraintlayout.widget.ConstraintLayout>
-Index: app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.proyecto_2025.Activities_Administrador;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.proyecto_2025.R;\r\nimport com.example.proyecto_2025.data.OfferRepository;\r\nimport com.example.proyecto_2025.model.Guide;\r\nimport com.example.proyecto_2025.model.Offer;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Locale;\r\nimport java.util.UUID;\r\n\r\npublic class OfferCreateActivity extends AppCompatActivity {\r\n\r\n    // Listas simples para el spinner (mock por ahora)\r\n    private final ArrayList<String> tourIds    = new ArrayList<>();\r\n    private final ArrayList<String> tourTitles = new ArrayList<>();\r\n\r\n    @Override protected void onCreate(Bundle b){\r\n        super.onCreate(b);\r\n        setContentView(R.layout.offer_create);\r\n\r\n        Guide guide = (Guide) getIntent().getSerializableExtra(\"guide\");\r\n        if (guide == null) { finish(); return; }\r\n\r\n        TextView tvGuide   = findViewById(R.id.tvGuide);\r\n        TextView tvStart   = findViewById(R.id.tvStart);\r\n        TextView tvEnd     = findViewById(R.id.tvEnd);\r\n        RadioGroup rgPay   = findViewById(R.id.rgPay);\r\n        EditText etAmount  = findViewById(R.id.etAmount);\r\n        Button btnSend     = findViewById(R.id.btnSend);\r\n        android.widget.Spinner spTour = findViewById(R.id.spTour);\r\n\r\n        tvGuide.setText(\"Guía: \" + guide.getName());\r\n\r\n        // --------- CARGA DE TOURS (MOCK) ----------\r\n        seedToursForDemo(); // quita esto cuando conectes tu repo real\r\n\r\n        ArrayAdapter<String> ad = new ArrayAdapter<>(\r\n                this, android.R.layout.simple_spinner_dropdown_item, tourTitles);\r\n        spTour.setAdapter(ad);\r\n        // ------------------------------------------\r\n\r\n        final Calendar start = Calendar.getInstance();\r\n        final Calendar end   = Calendar.getInstance();\r\n\r\n        tvStart.setOnClickListener(v -> pickDate(tvStart, start));\r\n        tvEnd.setOnClickListener(v -> pickDate(tvEnd, end));\r\n\r\n        btnSend.setOnClickListener(v -> {\r\n            if (spTour.getSelectedItemPosition() == android.widget.AdapterView.INVALID_POSITION) {\r\n                Toast.makeText(this, \"Selecciona un tour\", Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n            String tourId = tourIds.get(spTour.getSelectedItemPosition());\r\n\r\n            Offer.PayMode payMode =\r\n                    (rgPay.getCheckedRadioButtonId() == R.id.rbFijo)\r\n                            ? Offer.PayMode.FIJO\r\n                            : Offer.PayMode.POR_HORA;\r\n\r\n            double amount;\r\n            try {\r\n                amount = Double.parseDouble(etAmount.getText().toString().trim());\r\n            } catch (Exception e) {\r\n                Toast.makeText(this, \"Monto inválido\", Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n\r\n            Offer o = new Offer(\r\n                    UUID.randomUUID().toString(),\r\n                    guide.getId(),\r\n                    tourId,\r\n                    start.getTime(),\r\n                    end.getTime(),\r\n                    payMode,\r\n                    amount,\r\n                    Offer.Status.PENDIENTE\r\n            );\r\n            OfferRepository.get().add(o);\r\n\r\n            Toast.makeText(this, \"Oferta enviada\", Toast.LENGTH_SHORT).show();\r\n            startActivity(new Intent(this, OfferInboxActivity.class));\r\n            finish();\r\n        });\r\n    }\r\n\r\n    private void pickDate(TextView tv, Calendar cal){\r\n        new DatePickerDialog(this, (view, year, month, dayOfMonth) -> {\r\n            cal.set(Calendar.YEAR, year);\r\n            cal.set(Calendar.MONTH, month);\r\n            cal.set(Calendar.DAY_OF_MONTH, dayOfMonth);\r\n            tv.setText(String.format(Locale.getDefault(), \"%02d/%02d/%04d\", dayOfMonth, month + 1, year));\r\n        }, cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH)).show();\r\n    }\r\n\r\n    /** Datos de ejemplo para que el flujo sea presentable */\r\n    private void seedToursForDemo() {\r\n        if (!tourIds.isEmpty()) return;\r\n        tourIds.add(\"t1\");  tourTitles.add(\"City Tour Cusco\");\r\n        tourIds.add(\"t2\");  tourTitles.add(\"Valle Sagrado Full Day\");\r\n        // agrega más si quieres\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java
---- a/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java	(revision 733feaf55ac5fc4b53ac43a82a34322bd3fca414)
-+++ b/app/src/main/java/com/example/proyecto_2025/Activities_Administrador/OfferCreateActivity.java	(date 1763339941613)
-@@ -14,7 +14,7 @@
- 
- import com.example.proyecto_2025.R;
- import com.example.proyecto_2025.data.OfferRepository;
--import com.example.proyecto_2025.model.Guide;
-+import com.example.proyecto_2025.model.Guia;
- import com.example.proyecto_2025.model.Offer;
- 
- import java.util.ArrayList;
-@@ -32,7 +32,7 @@
-         super.onCreate(b);
-         setContentView(R.layout.offer_create);
- 
--        Guide guide = (Guide) getIntent().getSerializableExtra("guide");
-+        Guia guide = (Guia) getIntent().getSerializableExtra("guide");
-         if (guide == null) { finish(); return; }
- 
-         TextView tvGuide   = findViewById(R.id.tvGuide);
